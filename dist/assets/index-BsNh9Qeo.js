var F0=Object.defineProperty;var V0=(e,t,n)=>t in e?F0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var tt=(e,t,n)=>(V0(e,typeof t!="symbol"?t+"":t,n),n),Rh=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var le=(e,t,n)=>(Rh(e,t,"read from private field"),n?n.call(e):t.get(e)),Kn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Xs=(e,t,n,r)=>(Rh(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function ad(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yg={exports:{}},ul={},vg={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oo=Symbol.for("react.element"),H0=Symbol.for("react.portal"),q0=Symbol.for("react.fragment"),B0=Symbol.for("react.strict_mode"),W0=Symbol.for("react.profiler"),K0=Symbol.for("react.provider"),G0=Symbol.for("react.context"),Q0=Symbol.for("react.forward_ref"),J0=Symbol.for("react.suspense"),Y0=Symbol.for("react.memo"),X0=Symbol.for("react.lazy"),Nh=Symbol.iterator;function ew(e){return e===null||typeof e!="object"?null:(e=Nh&&e[Nh]||e["@@iterator"],typeof e=="function"?e:null)}var _g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wg=Object.assign,kg={};function qs(e,t,n){this.props=e,this.context=t,this.refs=kg,this.updater=n||_g}qs.prototype.isReactComponent={};qs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Sg(){}Sg.prototype=qs.prototype;function ld(e,t,n){this.props=e,this.context=t,this.refs=kg,this.updater=n||_g}var ud=ld.prototype=new Sg;ud.constructor=ld;wg(ud,qs.prototype);ud.isPureReactComponent=!0;var Oh=Array.isArray,$g=Object.prototype.hasOwnProperty,cd={current:null},Eg={key:!0,ref:!0,__self:!0,__source:!0};function Tg(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)$g.call(t,r)&&!Eg.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:oo,type:e,key:i,ref:o,props:s,_owner:cd.current}}function tw(e,t){return{$$typeof:oo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function dd(e){return typeof e=="object"&&e!==null&&e.$$typeof===oo}function nw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ch=/\/+/g;function Jl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?nw(""+e.key):t.toString(36)}function Xo(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case oo:case H0:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Jl(o,0):r,Oh(s)?(n="",e!=null&&(n=e.replace(Ch,"$&/")+"/"),Xo(s,t,n,"",function(u){return u})):s!=null&&(dd(s)&&(s=tw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ch,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Oh(e))for(var a=0;a<e.length;a++){i=e[a];var l=r+Jl(i,a);o+=Xo(i,t,n,l,s)}else if(l=ew(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=r+Jl(i,a++),o+=Xo(i,t,n,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function To(e,t,n){if(e==null)return e;var r=[],s=0;return Xo(e,r,"","",function(i){return t.call(n,i,s++)}),r}function rw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Et={current:null},ea={transition:null},sw={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:ea,ReactCurrentOwner:cd};function bg(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:To,forEach:function(e,t,n){To(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return To(e,function(){t++}),t},toArray:function(e){return To(e,function(t){return t})||[]},only:function(e){if(!dd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};de.Component=qs;de.Fragment=q0;de.Profiler=W0;de.PureComponent=ld;de.StrictMode=B0;de.Suspense=J0;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sw;de.act=bg;de.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=wg({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=cd.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)$g.call(t,l)&&!Eg.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:oo,type:e.type,key:s,ref:i,props:r,_owner:o}};de.createContext=function(e){return e={$$typeof:G0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:K0,_context:e},e.Consumer=e};de.createElement=Tg;de.createFactory=function(e){var t=Tg.bind(null,e);return t.type=e,t};de.createRef=function(){return{current:null}};de.forwardRef=function(e){return{$$typeof:Q0,render:e}};de.isValidElement=dd;de.lazy=function(e){return{$$typeof:X0,_payload:{_status:-1,_result:e},_init:rw}};de.memo=function(e,t){return{$$typeof:Y0,type:e,compare:t===void 0?null:t}};de.startTransition=function(e){var t=ea.transition;ea.transition={};try{e()}finally{ea.transition=t}};de.unstable_act=bg;de.useCallback=function(e,t){return Et.current.useCallback(e,t)};de.useContext=function(e){return Et.current.useContext(e)};de.useDebugValue=function(){};de.useDeferredValue=function(e){return Et.current.useDeferredValue(e)};de.useEffect=function(e,t){return Et.current.useEffect(e,t)};de.useId=function(){return Et.current.useId()};de.useImperativeHandle=function(e,t,n){return Et.current.useImperativeHandle(e,t,n)};de.useInsertionEffect=function(e,t){return Et.current.useInsertionEffect(e,t)};de.useLayoutEffect=function(e,t){return Et.current.useLayoutEffect(e,t)};de.useMemo=function(e,t){return Et.current.useMemo(e,t)};de.useReducer=function(e,t,n){return Et.current.useReducer(e,t,n)};de.useRef=function(e){return Et.current.useRef(e)};de.useState=function(e){return Et.current.useState(e)};de.useSyncExternalStore=function(e,t,n){return Et.current.useSyncExternalStore(e,t,n)};de.useTransition=function(){return Et.current.useTransition()};de.version="18.3.1";vg.exports=de;var mn=vg.exports;const ir=ad(mn);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw=mn,ow=Symbol.for("react.element"),aw=Symbol.for("react.fragment"),lw=Object.prototype.hasOwnProperty,uw=iw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cw={key:!0,ref:!0,__self:!0,__source:!0};function Pg(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)lw.call(t,r)&&!cw.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:ow,type:e,key:i,ref:o,props:s,_owner:uw.current}}ul.Fragment=aw;ul.jsx=Pg;ul.jsxs=Pg;yg.exports=ul;var Mt=yg.exports,Du={},Ig={exports:{}},Ht={},Rg={exports:{}},Ng={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,Y){var C=M.length;M.push(Y);e:for(;0<C;){var $=C-1>>>1,O=M[$];if(0<s(O,Y))M[$]=Y,M[C]=O,C=$;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var Y=M[0],C=M.pop();if(C!==Y){M[0]=C;e:for(var $=0,O=M.length,T=O>>>1;$<T;){var y=2*($+1)-1,S=M[y],P=y+1,H=M[P];if(0>s(S,C))P<O&&0>s(H,S)?(M[$]=H,M[P]=C,$=P):(M[$]=S,M[y]=C,$=y);else if(P<O&&0>s(H,C))M[$]=H,M[P]=C,$=P;else break e}}return Y}function s(M,Y){var C=M.sortIndex-Y.sortIndex;return C!==0?C:M.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,m=3,v=!1,g=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(M){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=M)r(u),Y.sortIndex=Y.expirationTime,t(l,Y);else break;Y=n(u)}}function k(M){if(_=!1,p(M),!g)if(n(l)!==null)g=!0,ft(E);else{var Y=n(u);Y!==null&&re(k,Y.startTime-M)}}function E(M,Y){g=!1,_&&(_=!1,d(z),z=-1),v=!0;var C=m;try{for(p(Y),f=n(l);f!==null&&(!(f.expirationTime>Y)||M&&!V());){var $=f.callback;if(typeof $=="function"){f.callback=null,m=f.priorityLevel;var O=$(f.expirationTime<=Y);Y=e.unstable_now(),typeof O=="function"?f.callback=O:f===n(l)&&r(l),p(Y)}else r(l);f=n(l)}if(f!==null)var T=!0;else{var y=n(u);y!==null&&re(k,y.startTime-Y),T=!1}return T}finally{f=null,m=C,v=!1}}var R=!1,N=null,z=-1,ne=5,ee=-1;function V(){return!(e.unstable_now()-ee<ne)}function X(){if(N!==null){var M=e.unstable_now();ee=M;var Y=!0;try{Y=N(!0,M)}finally{Y?fe():(R=!1,N=null)}}else R=!1}var fe;if(typeof h=="function")fe=function(){h(X)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Fe=D.port2;D.port1.onmessage=X,fe=function(){Fe.postMessage(null)}}else fe=function(){w(X,0)};function ft(M){N=M,R||(R=!0,fe())}function re(M,Y){z=w(function(){M(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){g||v||(g=!0,ft(E))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(M){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var C=m;m=Y;try{return M()}finally{m=C}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,Y){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var C=m;m=M;try{return Y()}finally{m=C}},e.unstable_scheduleCallback=function(M,Y,C){var $=e.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?$+C:$):C=$,M){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=C+O,M={id:c++,callback:Y,priorityLevel:M,startTime:C,expirationTime:O,sortIndex:-1},C>$?(M.sortIndex=C,t(u,M),n(l)===null&&M===n(u)&&(_?(d(z),z=-1):_=!0,re(k,C-$))):(M.sortIndex=O,t(l,M),g||v||(g=!0,ft(E))),M},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(M){var Y=m;return function(){var C=m;m=Y;try{return M.apply(this,arguments)}finally{m=C}}}})(Ng);Rg.exports=Ng;var dw=Rg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw=mn,Ft=dw;function x(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Og=new Set,Di={};function Xr(e,t){Os(e,t),Os(e+"Capture",t)}function Os(e,t){for(Di[e]=t,e=0;e<t.length;e++)Og.add(t[e])}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lu=Object.prototype.hasOwnProperty,hw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xh={},jh={};function pw(e){return Lu.call(jh,e)?!0:Lu.call(xh,e)?!1:hw.test(e)?jh[e]=!0:(xh[e]=!0,!1)}function mw(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function gw(e,t,n,r){if(t===null||typeof t>"u"||mw(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Tt(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ut[e]=new Tt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ut[t]=new Tt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ut[e]=new Tt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ut[e]=new Tt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ut[e]=new Tt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ut[e]=new Tt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ut[e]=new Tt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ut[e]=new Tt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ut[e]=new Tt(e,5,!1,e.toLowerCase(),null,!1,!1)});var fd=/[\-:]([a-z])/g;function hd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fd,hd);ut[t]=new Tt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fd,hd);ut[t]=new Tt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fd,hd);ut[t]=new Tt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ut[e]=new Tt(e,1,!1,e.toLowerCase(),null,!1,!1)});ut.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ut[e]=new Tt(e,1,!1,e.toLowerCase(),null,!0,!0)});function pd(e,t,n,r){var s=ut.hasOwnProperty(t)?ut[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gw(t,n,s,r)&&(n=null),r||s===null?pw(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Wn=fw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bo=Symbol.for("react.element"),as=Symbol.for("react.portal"),ls=Symbol.for("react.fragment"),md=Symbol.for("react.strict_mode"),Zu=Symbol.for("react.profiler"),Cg=Symbol.for("react.provider"),xg=Symbol.for("react.context"),gd=Symbol.for("react.forward_ref"),Uu=Symbol.for("react.suspense"),Fu=Symbol.for("react.suspense_list"),yd=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),jg=Symbol.for("react.offscreen"),zh=Symbol.iterator;function ei(e){return e===null||typeof e!="object"?null:(e=zh&&e[zh]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,Yl;function hi(e){if(Yl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Yl=t&&t[1]||""}return`
`+Yl+e}var Xl=!1;function eu(e,t){if(!e||Xl)return"";Xl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Xl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?hi(e):""}function yw(e){switch(e.tag){case 5:return hi(e.type);case 16:return hi("Lazy");case 13:return hi("Suspense");case 19:return hi("SuspenseList");case 0:case 2:case 15:return e=eu(e.type,!1),e;case 11:return e=eu(e.type.render,!1),e;case 1:return e=eu(e.type,!0),e;default:return""}}function Vu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ls:return"Fragment";case as:return"Portal";case Zu:return"Profiler";case md:return"StrictMode";case Uu:return"Suspense";case Fu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xg:return(e.displayName||"Context")+".Consumer";case Cg:return(e._context.displayName||"Context")+".Provider";case gd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yd:return t=e.displayName||null,t!==null?t:Vu(e.type)||"Memo";case Xn:t=e._payload,e=e._init;try{return Vu(e(t))}catch{}}return null}function vw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vu(t);case 8:return t===md?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _w(e){var t=zg(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Po(e){e._valueTracker||(e._valueTracker=_w(e))}function Ag(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=zg(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function va(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Hu(e,t){var n=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ah(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=vr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Mg(e,t){t=t.checked,t!=null&&pd(e,"checked",t,!1)}function qu(e,t){Mg(e,t);var n=vr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Bu(e,t.type,n):t.hasOwnProperty("defaultValue")&&Bu(e,t.type,vr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Mh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Bu(e,t,n){(t!=="number"||va(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pi=Array.isArray;function Ss(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+vr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Wu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(x(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Dh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(x(92));if(pi(n)){if(1<n.length)throw Error(x(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:vr(n)}}function Dg(e,t){var n=vr(t.value),r=vr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Lh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Lg(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ku(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Lg(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Io,Zg=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Io=Io||document.createElement("div"),Io.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Io.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Li(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ww=["Webkit","ms","Moz","O"];Object.keys(Si).forEach(function(e){ww.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Si[t]=Si[e]})});function Ug(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Si.hasOwnProperty(e)&&Si[e]?(""+t).trim():t+"px"}function Fg(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ug(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var kw=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gu(e,t){if(t){if(kw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(x(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(x(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(x(61))}if(t.style!=null&&typeof t.style!="object")throw Error(x(62))}}function Qu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ju=null;function vd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yu=null,$s=null,Es=null;function Zh(e){if(e=uo(e)){if(typeof Yu!="function")throw Error(x(280));var t=e.stateNode;t&&(t=pl(t),Yu(e.stateNode,e.type,t))}}function Vg(e){$s?Es?Es.push(e):Es=[e]:$s=e}function Hg(){if($s){var e=$s,t=Es;if(Es=$s=null,Zh(e),t)for(e=0;e<t.length;e++)Zh(t[e])}}function qg(e,t){return e(t)}function Bg(){}var tu=!1;function Wg(e,t,n){if(tu)return e(t,n);tu=!0;try{return qg(e,t,n)}finally{tu=!1,($s!==null||Es!==null)&&(Bg(),Hg())}}function Zi(e,t){var n=e.stateNode;if(n===null)return null;var r=pl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(x(231,t,typeof n));return n}var Xu=!1;if(Un)try{var ti={};Object.defineProperty(ti,"passive",{get:function(){Xu=!0}}),window.addEventListener("test",ti,ti),window.removeEventListener("test",ti,ti)}catch{Xu=!1}function Sw(e,t,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var $i=!1,_a=null,wa=!1,ec=null,$w={onError:function(e){$i=!0,_a=e}};function Ew(e,t,n,r,s,i,o,a,l){$i=!1,_a=null,Sw.apply($w,arguments)}function Tw(e,t,n,r,s,i,o,a,l){if(Ew.apply(this,arguments),$i){if($i){var u=_a;$i=!1,_a=null}else throw Error(x(198));wa||(wa=!0,ec=u)}}function es(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Kg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Uh(e){if(es(e)!==e)throw Error(x(188))}function bw(e){var t=e.alternate;if(!t){if(t=es(e),t===null)throw Error(x(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Uh(s),e;if(i===r)return Uh(s),t;i=i.sibling}throw Error(x(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(x(189))}}if(n.alternate!==r)throw Error(x(190))}if(n.tag!==3)throw Error(x(188));return n.stateNode.current===n?e:t}function Gg(e){return e=bw(e),e!==null?Qg(e):null}function Qg(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Qg(e);if(t!==null)return t;e=e.sibling}return null}var Jg=Ft.unstable_scheduleCallback,Fh=Ft.unstable_cancelCallback,Pw=Ft.unstable_shouldYield,Iw=Ft.unstable_requestPaint,Be=Ft.unstable_now,Rw=Ft.unstable_getCurrentPriorityLevel,_d=Ft.unstable_ImmediatePriority,Yg=Ft.unstable_UserBlockingPriority,ka=Ft.unstable_NormalPriority,Nw=Ft.unstable_LowPriority,Xg=Ft.unstable_IdlePriority,cl=null,In=null;function Ow(e){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(cl,e,void 0,(e.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:jw,Cw=Math.log,xw=Math.LN2;function jw(e){return e>>>=0,e===0?32:31-(Cw(e)/xw|0)|0}var Ro=64,No=4194304;function mi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Sa(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=mi(a):(i&=o,i!==0&&(r=mi(i)))}else o=n&~s,o!==0?r=mi(o):i!==0&&(r=mi(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-gn(t),s=1<<n,r|=e[n],t&=~s;return r}function zw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Aw(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-gn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=zw(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function tc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ey(){var e=Ro;return Ro<<=1,!(Ro&4194240)&&(Ro=64),e}function nu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ao(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-gn(t),e[t]=n}function Mw(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-gn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function wd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-gn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var $e=0;function ty(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ny,kd,ry,sy,iy,nc=!1,Oo=[],ur=null,cr=null,dr=null,Ui=new Map,Fi=new Map,nr=[],Dw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vh(e,t){switch(e){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":Ui.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fi.delete(t.pointerId)}}function ni(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=uo(t),t!==null&&kd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Lw(e,t,n,r,s){switch(t){case"focusin":return ur=ni(ur,e,t,n,r,s),!0;case"dragenter":return cr=ni(cr,e,t,n,r,s),!0;case"mouseover":return dr=ni(dr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ui.set(i,ni(Ui.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Fi.set(i,ni(Fi.get(i)||null,e,t,n,r,s)),!0}return!1}function oy(e){var t=Ar(e.target);if(t!==null){var n=es(t);if(n!==null){if(t=n.tag,t===13){if(t=Kg(n),t!==null){e.blockedOn=t,iy(e.priority,function(){ry(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ta(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=rc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ju=r,n.target.dispatchEvent(r),Ju=null}else return t=uo(n),t!==null&&kd(t),e.blockedOn=n,!1;t.shift()}return!0}function Hh(e,t,n){ta(e)&&n.delete(t)}function Zw(){nc=!1,ur!==null&&ta(ur)&&(ur=null),cr!==null&&ta(cr)&&(cr=null),dr!==null&&ta(dr)&&(dr=null),Ui.forEach(Hh),Fi.forEach(Hh)}function ri(e,t){e.blockedOn===t&&(e.blockedOn=null,nc||(nc=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,Zw)))}function Vi(e){function t(s){return ri(s,e)}if(0<Oo.length){ri(Oo[0],e);for(var n=1;n<Oo.length;n++){var r=Oo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ur!==null&&ri(ur,e),cr!==null&&ri(cr,e),dr!==null&&ri(dr,e),Ui.forEach(t),Fi.forEach(t),n=0;n<nr.length;n++)r=nr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<nr.length&&(n=nr[0],n.blockedOn===null);)oy(n),n.blockedOn===null&&nr.shift()}var Ts=Wn.ReactCurrentBatchConfig,$a=!0;function Uw(e,t,n,r){var s=$e,i=Ts.transition;Ts.transition=null;try{$e=1,Sd(e,t,n,r)}finally{$e=s,Ts.transition=i}}function Fw(e,t,n,r){var s=$e,i=Ts.transition;Ts.transition=null;try{$e=4,Sd(e,t,n,r)}finally{$e=s,Ts.transition=i}}function Sd(e,t,n,r){if($a){var s=rc(e,t,n,r);if(s===null)fu(e,t,r,Ea,n),Vh(e,r);else if(Lw(s,e,t,n,r))r.stopPropagation();else if(Vh(e,r),t&4&&-1<Dw.indexOf(e)){for(;s!==null;){var i=uo(s);if(i!==null&&ny(i),i=rc(e,t,n,r),i===null&&fu(e,t,r,Ea,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else fu(e,t,r,null,n)}}var Ea=null;function rc(e,t,n,r){if(Ea=null,e=vd(r),e=Ar(e),e!==null)if(t=es(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Kg(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ea=e,null}function ay(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rw()){case _d:return 1;case Yg:return 4;case ka:case Nw:return 16;case Xg:return 536870912;default:return 16}default:return 16}}var or=null,$d=null,na=null;function ly(){if(na)return na;var e,t=$d,n=t.length,r,s="value"in or?or.value:or.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return na=s.slice(e,1<r?1-r:void 0)}function ra(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Co(){return!0}function qh(){return!1}function qt(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Co:qh,this.isPropagationStopped=qh,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Co)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Co)},persist:function(){},isPersistent:Co}),t}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ed=qt(Bs),lo=Le({},Bs,{view:0,detail:0}),Vw=qt(lo),ru,su,si,dl=Le({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Td,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==si&&(si&&e.type==="mousemove"?(ru=e.screenX-si.screenX,su=e.screenY-si.screenY):su=ru=0,si=e),ru)},movementY:function(e){return"movementY"in e?e.movementY:su}}),Bh=qt(dl),Hw=Le({},dl,{dataTransfer:0}),qw=qt(Hw),Bw=Le({},lo,{relatedTarget:0}),iu=qt(Bw),Ww=Le({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Kw=qt(Ww),Gw=Le({},Bs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qw=qt(Gw),Jw=Le({},Bs,{data:0}),Wh=qt(Jw),Yw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=e1[e])?!!t[e]:!1}function Td(){return t1}var n1=Le({},lo,{key:function(e){if(e.key){var t=Yw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ra(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Xw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Td,charCode:function(e){return e.type==="keypress"?ra(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ra(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),r1=qt(n1),s1=Le({},dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kh=qt(s1),i1=Le({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Td}),o1=qt(i1),a1=Le({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),l1=qt(a1),u1=Le({},dl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),c1=qt(u1),d1=[9,13,27,32],bd=Un&&"CompositionEvent"in window,Ei=null;Un&&"documentMode"in document&&(Ei=document.documentMode);var f1=Un&&"TextEvent"in window&&!Ei,uy=Un&&(!bd||Ei&&8<Ei&&11>=Ei),Gh=" ",Qh=!1;function cy(e,t){switch(e){case"keyup":return d1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var us=!1;function h1(e,t){switch(e){case"compositionend":return dy(t);case"keypress":return t.which!==32?null:(Qh=!0,Gh);case"textInput":return e=t.data,e===Gh&&Qh?null:e;default:return null}}function p1(e,t){if(us)return e==="compositionend"||!bd&&cy(e,t)?(e=ly(),na=$d=or=null,us=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return uy&&t.locale!=="ko"?null:t.data;default:return null}}var m1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!m1[e.type]:t==="textarea"}function fy(e,t,n,r){Vg(r),t=Ta(t,"onChange"),0<t.length&&(n=new Ed("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ti=null,Hi=null;function g1(e){$y(e,0)}function fl(e){var t=fs(e);if(Ag(t))return e}function y1(e,t){if(e==="change")return t}var hy=!1;if(Un){var ou;if(Un){var au="oninput"in document;if(!au){var Yh=document.createElement("div");Yh.setAttribute("oninput","return;"),au=typeof Yh.oninput=="function"}ou=au}else ou=!1;hy=ou&&(!document.documentMode||9<document.documentMode)}function Xh(){Ti&&(Ti.detachEvent("onpropertychange",py),Hi=Ti=null)}function py(e){if(e.propertyName==="value"&&fl(Hi)){var t=[];fy(t,Hi,e,vd(e)),Wg(g1,t)}}function v1(e,t,n){e==="focusin"?(Xh(),Ti=t,Hi=n,Ti.attachEvent("onpropertychange",py)):e==="focusout"&&Xh()}function _1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fl(Hi)}function w1(e,t){if(e==="click")return fl(t)}function k1(e,t){if(e==="input"||e==="change")return fl(t)}function S1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wn=typeof Object.is=="function"?Object.is:S1;function qi(e,t){if(wn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Lu.call(t,s)||!wn(e[s],t[s]))return!1}return!0}function ep(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tp(e,t){var n=ep(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ep(n)}}function my(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?my(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gy(){for(var e=window,t=va();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=va(e.document)}return t}function Pd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $1(e){var t=gy(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&my(n.ownerDocument.documentElement,n)){if(r!==null&&Pd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=tp(n,i);var o=tp(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var E1=Un&&"documentMode"in document&&11>=document.documentMode,cs=null,sc=null,bi=null,ic=!1;function np(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ic||cs==null||cs!==va(r)||(r=cs,"selectionStart"in r&&Pd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bi&&qi(bi,r)||(bi=r,r=Ta(sc,"onSelect"),0<r.length&&(t=new Ed("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=cs)))}function xo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ds={animationend:xo("Animation","AnimationEnd"),animationiteration:xo("Animation","AnimationIteration"),animationstart:xo("Animation","AnimationStart"),transitionend:xo("Transition","TransitionEnd")},lu={},yy={};Un&&(yy=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function hl(e){if(lu[e])return lu[e];if(!ds[e])return e;var t=ds[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in yy)return lu[e]=t[n];return e}var vy=hl("animationend"),_y=hl("animationiteration"),wy=hl("animationstart"),ky=hl("transitionend"),Sy=new Map,rp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){Sy.set(e,t),Xr(t,[e])}for(var uu=0;uu<rp.length;uu++){var cu=rp[uu],T1=cu.toLowerCase(),b1=cu[0].toUpperCase()+cu.slice(1);Er(T1,"on"+b1)}Er(vy,"onAnimationEnd");Er(_y,"onAnimationIteration");Er(wy,"onAnimationStart");Er("dblclick","onDoubleClick");Er("focusin","onFocus");Er("focusout","onBlur");Er(ky,"onTransitionEnd");Os("onMouseEnter",["mouseout","mouseover"]);Os("onMouseLeave",["mouseout","mouseover"]);Os("onPointerEnter",["pointerout","pointerover"]);Os("onPointerLeave",["pointerout","pointerover"]);Xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P1=new Set("cancel close invalid load scroll toggle".split(" ").concat(gi));function sp(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Tw(r,t,void 0,e),e.currentTarget=null}function $y(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;sp(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;sp(s,a,u),i=l}}}if(wa)throw e=ec,wa=!1,ec=null,e}function Re(e,t){var n=t[cc];n===void 0&&(n=t[cc]=new Set);var r=e+"__bubble";n.has(r)||(Ey(t,e,2,!1),n.add(r))}function du(e,t,n){var r=0;t&&(r|=4),Ey(n,e,r,t)}var jo="_reactListening"+Math.random().toString(36).slice(2);function Bi(e){if(!e[jo]){e[jo]=!0,Og.forEach(function(n){n!=="selectionchange"&&(P1.has(n)||du(n,!1,e),du(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[jo]||(t[jo]=!0,du("selectionchange",!1,t))}}function Ey(e,t,n,r){switch(ay(t)){case 1:var s=Uw;break;case 4:s=Fw;break;default:s=Sd}n=s.bind(null,t,n,e),s=void 0,!Xu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function fu(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ar(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Wg(function(){var u=i,c=vd(n),f=[];e:{var m=Sy.get(e);if(m!==void 0){var v=Ed,g=e;switch(e){case"keypress":if(ra(n)===0)break e;case"keydown":case"keyup":v=r1;break;case"focusin":g="focus",v=iu;break;case"focusout":g="blur",v=iu;break;case"beforeblur":case"afterblur":v=iu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Bh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=qw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=o1;break;case vy:case _y:case wy:v=Kw;break;case ky:v=l1;break;case"scroll":v=Vw;break;case"wheel":v=c1;break;case"copy":case"cut":case"paste":v=Qw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Kh}var _=(t&4)!==0,w=!_&&e==="scroll",d=_?m!==null?m+"Capture":null:m;_=[];for(var h=u,p;h!==null;){p=h;var k=p.stateNode;if(p.tag===5&&k!==null&&(p=k,d!==null&&(k=Zi(h,d),k!=null&&_.push(Wi(h,k,p)))),w)break;h=h.return}0<_.length&&(m=new v(m,g,null,n,c),f.push({event:m,listeners:_}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",m&&n!==Ju&&(g=n.relatedTarget||n.fromElement)&&(Ar(g)||g[Fn]))break e;if((v||m)&&(m=c.window===c?c:(m=c.ownerDocument)?m.defaultView||m.parentWindow:window,v?(g=n.relatedTarget||n.toElement,v=u,g=g?Ar(g):null,g!==null&&(w=es(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(v=null,g=u),v!==g)){if(_=Bh,k="onMouseLeave",d="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(_=Kh,k="onPointerLeave",d="onPointerEnter",h="pointer"),w=v==null?m:fs(v),p=g==null?m:fs(g),m=new _(k,h+"leave",v,n,c),m.target=w,m.relatedTarget=p,k=null,Ar(c)===u&&(_=new _(d,h+"enter",g,n,c),_.target=p,_.relatedTarget=w,k=_),w=k,v&&g)t:{for(_=v,d=g,h=0,p=_;p;p=ns(p))h++;for(p=0,k=d;k;k=ns(k))p++;for(;0<h-p;)_=ns(_),h--;for(;0<p-h;)d=ns(d),p--;for(;h--;){if(_===d||d!==null&&_===d.alternate)break t;_=ns(_),d=ns(d)}_=null}else _=null;v!==null&&ip(f,m,v,_,!1),g!==null&&w!==null&&ip(f,w,g,_,!0)}}e:{if(m=u?fs(u):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var E=y1;else if(Jh(m))if(hy)E=k1;else{E=_1;var R=v1}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=w1);if(E&&(E=E(e,u))){fy(f,E,n,c);break e}R&&R(e,m,u),e==="focusout"&&(R=m._wrapperState)&&R.controlled&&m.type==="number"&&Bu(m,"number",m.value)}switch(R=u?fs(u):window,e){case"focusin":(Jh(R)||R.contentEditable==="true")&&(cs=R,sc=u,bi=null);break;case"focusout":bi=sc=cs=null;break;case"mousedown":ic=!0;break;case"contextmenu":case"mouseup":case"dragend":ic=!1,np(f,n,c);break;case"selectionchange":if(E1)break;case"keydown":case"keyup":np(f,n,c)}var N;if(bd)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else us?cy(e,n)&&(z="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&(uy&&n.locale!=="ko"&&(us||z!=="onCompositionStart"?z==="onCompositionEnd"&&us&&(N=ly()):(or=c,$d="value"in or?or.value:or.textContent,us=!0)),R=Ta(u,z),0<R.length&&(z=new Wh(z,e,null,n,c),f.push({event:z,listeners:R}),N?z.data=N:(N=dy(n),N!==null&&(z.data=N)))),(N=f1?h1(e,n):p1(e,n))&&(u=Ta(u,"onBeforeInput"),0<u.length&&(c=new Wh("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=N))}$y(f,t)})}function Wi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ta(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Zi(e,n),i!=null&&r.unshift(Wi(e,i,s)),i=Zi(e,t),i!=null&&r.push(Wi(e,i,s))),e=e.return}return r}function ns(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ip(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Zi(n,i),l!=null&&o.unshift(Wi(n,l,a))):s||(l=Zi(n,i),l!=null&&o.push(Wi(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var I1=/\r\n?/g,R1=/\u0000|\uFFFD/g;function op(e){return(typeof e=="string"?e:""+e).replace(I1,`
`).replace(R1,"")}function zo(e,t,n){if(t=op(t),op(e)!==t&&n)throw Error(x(425))}function ba(){}var oc=null,ac=null;function lc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uc=typeof setTimeout=="function"?setTimeout:void 0,N1=typeof clearTimeout=="function"?clearTimeout:void 0,ap=typeof Promise=="function"?Promise:void 0,O1=typeof queueMicrotask=="function"?queueMicrotask:typeof ap<"u"?function(e){return ap.resolve(null).then(e).catch(C1)}:uc;function C1(e){setTimeout(function(){throw e})}function hu(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Vi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Vi(t)}function fr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function lp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ws=Math.random().toString(36).slice(2),En="__reactFiber$"+Ws,Ki="__reactProps$"+Ws,Fn="__reactContainer$"+Ws,cc="__reactEvents$"+Ws,x1="__reactListeners$"+Ws,j1="__reactHandles$"+Ws;function Ar(e){var t=e[En];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Fn]||n[En]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=lp(e);e!==null;){if(n=e[En])return n;e=lp(e)}return t}e=n,n=e.parentNode}return null}function uo(e){return e=e[En]||e[Fn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(x(33))}function pl(e){return e[Ki]||null}var dc=[],hs=-1;function Tr(e){return{current:e}}function Oe(e){0>hs||(e.current=dc[hs],dc[hs]=null,hs--)}function be(e,t){hs++,dc[hs]=e.current,e.current=t}var _r={},yt=Tr(_r),Ot=Tr(!1),qr=_r;function Cs(e,t){var n=e.type.contextTypes;if(!n)return _r;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ct(e){return e=e.childContextTypes,e!=null}function Pa(){Oe(Ot),Oe(yt)}function up(e,t,n){if(yt.current!==_r)throw Error(x(168));be(yt,t),be(Ot,n)}function Ty(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(x(108,vw(e)||"Unknown",s));return Le({},n,r)}function Ia(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_r,qr=yt.current,be(yt,e),be(Ot,Ot.current),!0}function cp(e,t,n){var r=e.stateNode;if(!r)throw Error(x(169));n?(e=Ty(e,t,qr),r.__reactInternalMemoizedMergedChildContext=e,Oe(Ot),Oe(yt),be(yt,e)):Oe(Ot),be(Ot,n)}var xn=null,ml=!1,pu=!1;function by(e){xn===null?xn=[e]:xn.push(e)}function z1(e){ml=!0,by(e)}function br(){if(!pu&&xn!==null){pu=!0;var e=0,t=$e;try{var n=xn;for($e=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}xn=null,ml=!1}catch(s){throw xn!==null&&(xn=xn.slice(e+1)),Jg(_d,br),s}finally{$e=t,pu=!1}}return null}var ps=[],ms=0,Ra=null,Na=0,Gt=[],Qt=0,Br=null,zn=1,An="";function Nr(e,t){ps[ms++]=Na,ps[ms++]=Ra,Ra=e,Na=t}function Py(e,t,n){Gt[Qt++]=zn,Gt[Qt++]=An,Gt[Qt++]=Br,Br=e;var r=zn;e=An;var s=32-gn(r)-1;r&=~(1<<s),n+=1;var i=32-gn(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,zn=1<<32-gn(t)+s|n<<s|r,An=i+e}else zn=1<<i|n<<s|r,An=e}function Id(e){e.return!==null&&(Nr(e,1),Py(e,1,0))}function Rd(e){for(;e===Ra;)Ra=ps[--ms],ps[ms]=null,Na=ps[--ms],ps[ms]=null;for(;e===Br;)Br=Gt[--Qt],Gt[Qt]=null,An=Gt[--Qt],Gt[Qt]=null,zn=Gt[--Qt],Gt[Qt]=null}var Ut=null,Zt=null,xe=!1,hn=null;function Iy(e,t){var n=Jt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function dp(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ut=e,Zt=fr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ut=e,Zt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Br!==null?{id:zn,overflow:An}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Jt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ut=e,Zt=null,!0):!1;default:return!1}}function fc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hc(e){if(xe){var t=Zt;if(t){var n=t;if(!dp(e,t)){if(fc(e))throw Error(x(418));t=fr(n.nextSibling);var r=Ut;t&&dp(e,t)?Iy(r,n):(e.flags=e.flags&-4097|2,xe=!1,Ut=e)}}else{if(fc(e))throw Error(x(418));e.flags=e.flags&-4097|2,xe=!1,Ut=e}}}function fp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ut=e}function Ao(e){if(e!==Ut)return!1;if(!xe)return fp(e),xe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!lc(e.type,e.memoizedProps)),t&&(t=Zt)){if(fc(e))throw Ry(),Error(x(418));for(;t;)Iy(e,t),t=fr(t.nextSibling)}if(fp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(x(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Zt=fr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Zt=null}}else Zt=Ut?fr(e.stateNode.nextSibling):null;return!0}function Ry(){for(var e=Zt;e;)e=fr(e.nextSibling)}function xs(){Zt=Ut=null,xe=!1}function Nd(e){hn===null?hn=[e]:hn.push(e)}var A1=Wn.ReactCurrentBatchConfig;function ii(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(x(309));var r=n.stateNode}if(!r)throw Error(x(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(x(284));if(!n._owner)throw Error(x(290,e))}return e}function Mo(e,t){throw e=Object.prototype.toString.call(t),Error(x(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hp(e){var t=e._init;return t(e._payload)}function Ny(e){function t(d,h){if(e){var p=d.deletions;p===null?(d.deletions=[h],d.flags|=16):p.push(h)}}function n(d,h){if(!e)return null;for(;h!==null;)t(d,h),h=h.sibling;return null}function r(d,h){for(d=new Map;h!==null;)h.key!==null?d.set(h.key,h):d.set(h.index,h),h=h.sibling;return d}function s(d,h){return d=gr(d,h),d.index=0,d.sibling=null,d}function i(d,h,p){return d.index=p,e?(p=d.alternate,p!==null?(p=p.index,p<h?(d.flags|=2,h):p):(d.flags|=2,h)):(d.flags|=1048576,h)}function o(d){return e&&d.alternate===null&&(d.flags|=2),d}function a(d,h,p,k){return h===null||h.tag!==6?(h=ku(p,d.mode,k),h.return=d,h):(h=s(h,p),h.return=d,h)}function l(d,h,p,k){var E=p.type;return E===ls?c(d,h,p.props.children,k,p.key):h!==null&&(h.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Xn&&hp(E)===h.type)?(k=s(h,p.props),k.ref=ii(d,h,p),k.return=d,k):(k=ca(p.type,p.key,p.props,null,d.mode,k),k.ref=ii(d,h,p),k.return=d,k)}function u(d,h,p,k){return h===null||h.tag!==4||h.stateNode.containerInfo!==p.containerInfo||h.stateNode.implementation!==p.implementation?(h=Su(p,d.mode,k),h.return=d,h):(h=s(h,p.children||[]),h.return=d,h)}function c(d,h,p,k,E){return h===null||h.tag!==7?(h=Hr(p,d.mode,k,E),h.return=d,h):(h=s(h,p),h.return=d,h)}function f(d,h,p){if(typeof h=="string"&&h!==""||typeof h=="number")return h=ku(""+h,d.mode,p),h.return=d,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case bo:return p=ca(h.type,h.key,h.props,null,d.mode,p),p.ref=ii(d,null,h),p.return=d,p;case as:return h=Su(h,d.mode,p),h.return=d,h;case Xn:var k=h._init;return f(d,k(h._payload),p)}if(pi(h)||ei(h))return h=Hr(h,d.mode,p,null),h.return=d,h;Mo(d,h)}return null}function m(d,h,p,k){var E=h!==null?h.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return E!==null?null:a(d,h,""+p,k);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case bo:return p.key===E?l(d,h,p,k):null;case as:return p.key===E?u(d,h,p,k):null;case Xn:return E=p._init,m(d,h,E(p._payload),k)}if(pi(p)||ei(p))return E!==null?null:c(d,h,p,k,null);Mo(d,p)}return null}function v(d,h,p,k,E){if(typeof k=="string"&&k!==""||typeof k=="number")return d=d.get(p)||null,a(h,d,""+k,E);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case bo:return d=d.get(k.key===null?p:k.key)||null,l(h,d,k,E);case as:return d=d.get(k.key===null?p:k.key)||null,u(h,d,k,E);case Xn:var R=k._init;return v(d,h,p,R(k._payload),E)}if(pi(k)||ei(k))return d=d.get(p)||null,c(h,d,k,E,null);Mo(h,k)}return null}function g(d,h,p,k){for(var E=null,R=null,N=h,z=h=0,ne=null;N!==null&&z<p.length;z++){N.index>z?(ne=N,N=null):ne=N.sibling;var ee=m(d,N,p[z],k);if(ee===null){N===null&&(N=ne);break}e&&N&&ee.alternate===null&&t(d,N),h=i(ee,h,z),R===null?E=ee:R.sibling=ee,R=ee,N=ne}if(z===p.length)return n(d,N),xe&&Nr(d,z),E;if(N===null){for(;z<p.length;z++)N=f(d,p[z],k),N!==null&&(h=i(N,h,z),R===null?E=N:R.sibling=N,R=N);return xe&&Nr(d,z),E}for(N=r(d,N);z<p.length;z++)ne=v(N,d,z,p[z],k),ne!==null&&(e&&ne.alternate!==null&&N.delete(ne.key===null?z:ne.key),h=i(ne,h,z),R===null?E=ne:R.sibling=ne,R=ne);return e&&N.forEach(function(V){return t(d,V)}),xe&&Nr(d,z),E}function _(d,h,p,k){var E=ei(p);if(typeof E!="function")throw Error(x(150));if(p=E.call(p),p==null)throw Error(x(151));for(var R=E=null,N=h,z=h=0,ne=null,ee=p.next();N!==null&&!ee.done;z++,ee=p.next()){N.index>z?(ne=N,N=null):ne=N.sibling;var V=m(d,N,ee.value,k);if(V===null){N===null&&(N=ne);break}e&&N&&V.alternate===null&&t(d,N),h=i(V,h,z),R===null?E=V:R.sibling=V,R=V,N=ne}if(ee.done)return n(d,N),xe&&Nr(d,z),E;if(N===null){for(;!ee.done;z++,ee=p.next())ee=f(d,ee.value,k),ee!==null&&(h=i(ee,h,z),R===null?E=ee:R.sibling=ee,R=ee);return xe&&Nr(d,z),E}for(N=r(d,N);!ee.done;z++,ee=p.next())ee=v(N,d,z,ee.value,k),ee!==null&&(e&&ee.alternate!==null&&N.delete(ee.key===null?z:ee.key),h=i(ee,h,z),R===null?E=ee:R.sibling=ee,R=ee);return e&&N.forEach(function(X){return t(d,X)}),xe&&Nr(d,z),E}function w(d,h,p,k){if(typeof p=="object"&&p!==null&&p.type===ls&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case bo:e:{for(var E=p.key,R=h;R!==null;){if(R.key===E){if(E=p.type,E===ls){if(R.tag===7){n(d,R.sibling),h=s(R,p.props.children),h.return=d,d=h;break e}}else if(R.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Xn&&hp(E)===R.type){n(d,R.sibling),h=s(R,p.props),h.ref=ii(d,R,p),h.return=d,d=h;break e}n(d,R);break}else t(d,R);R=R.sibling}p.type===ls?(h=Hr(p.props.children,d.mode,k,p.key),h.return=d,d=h):(k=ca(p.type,p.key,p.props,null,d.mode,k),k.ref=ii(d,h,p),k.return=d,d=k)}return o(d);case as:e:{for(R=p.key;h!==null;){if(h.key===R)if(h.tag===4&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){n(d,h.sibling),h=s(h,p.children||[]),h.return=d,d=h;break e}else{n(d,h);break}else t(d,h);h=h.sibling}h=Su(p,d.mode,k),h.return=d,d=h}return o(d);case Xn:return R=p._init,w(d,h,R(p._payload),k)}if(pi(p))return g(d,h,p,k);if(ei(p))return _(d,h,p,k);Mo(d,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,h!==null&&h.tag===6?(n(d,h.sibling),h=s(h,p),h.return=d,d=h):(n(d,h),h=ku(p,d.mode,k),h.return=d,d=h),o(d)):n(d,h)}return w}var js=Ny(!0),Oy=Ny(!1),Oa=Tr(null),Ca=null,gs=null,Od=null;function Cd(){Od=gs=Ca=null}function xd(e){var t=Oa.current;Oe(Oa),e._currentValue=t}function pc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function bs(e,t){Ca=e,Od=gs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Rt=!0),e.firstContext=null)}function Xt(e){var t=e._currentValue;if(Od!==e)if(e={context:e,memoizedValue:t,next:null},gs===null){if(Ca===null)throw Error(x(308));gs=e,Ca.dependencies={lanes:0,firstContext:e}}else gs=gs.next=e;return t}var Mr=null;function jd(e){Mr===null?Mr=[e]:Mr.push(e)}function Cy(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,jd(t)):(n.next=s.next,s.next=n),t.interleaved=n,Vn(e,r)}function Vn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var er=!1;function zd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xy(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Vn(e,n)}return s=r.interleaved,s===null?(t.next=t,jd(r)):(t.next=s.next,s.next=t),r.interleaved=t,Vn(e,n)}function sa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,wd(e,n)}}function pp(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xa(e,t,n,r){var s=e.updateQueue;er=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,c=u=l=null,a=i;do{var m=a.lane,v=a.eventTime;if((r&m)===m){c!==null&&(c=c.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,_=a;switch(m=t,v=n,_.tag){case 1:if(g=_.payload,typeof g=="function"){f=g.call(v,f,m);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=_.payload,m=typeof g=="function"?g.call(v,f,m):g,m==null)break e;f=Le({},f,m);break e;case 2:er=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else v={eventTime:v,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=v,l=f):c=c.next=v,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(c===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Kr|=o,e.lanes=o,e.memoizedState=f}}function mp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(x(191,s));s.call(r)}}}var co={},Rn=Tr(co),Gi=Tr(co),Qi=Tr(co);function Dr(e){if(e===co)throw Error(x(174));return e}function Ad(e,t){switch(be(Qi,t),be(Gi,e),be(Rn,co),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ku(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ku(t,e)}Oe(Rn),be(Rn,t)}function zs(){Oe(Rn),Oe(Gi),Oe(Qi)}function jy(e){Dr(Qi.current);var t=Dr(Rn.current),n=Ku(t,e.type);t!==n&&(be(Gi,e),be(Rn,n))}function Md(e){Gi.current===e&&(Oe(Rn),Oe(Gi))}var ze=Tr(0);function ja(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mu=[];function Dd(){for(var e=0;e<mu.length;e++)mu[e]._workInProgressVersionPrimary=null;mu.length=0}var ia=Wn.ReactCurrentDispatcher,gu=Wn.ReactCurrentBatchConfig,Wr=0,Ae=null,Ge=null,Xe=null,za=!1,Pi=!1,Ji=0,M1=0;function ht(){throw Error(x(321))}function Ld(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wn(e[n],t[n]))return!1;return!0}function Zd(e,t,n,r,s,i){if(Wr=i,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=e===null||e.memoizedState===null?U1:F1,e=n(r,s),Pi){i=0;do{if(Pi=!1,Ji=0,25<=i)throw Error(x(301));i+=1,Xe=Ge=null,t.updateQueue=null,ia.current=V1,e=n(r,s)}while(Pi)}if(ia.current=Aa,t=Ge!==null&&Ge.next!==null,Wr=0,Xe=Ge=Ae=null,za=!1,t)throw Error(x(300));return e}function Ud(){var e=Ji!==0;return Ji=0,e}function $n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Ae.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function en(){if(Ge===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var t=Xe===null?Ae.memoizedState:Xe.next;if(t!==null)Xe=t,Ge=e;else{if(e===null)throw Error(x(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Xe===null?Ae.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function Yi(e,t){return typeof t=="function"?t(e):t}function yu(e){var t=en(),n=t.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=e;var r=Ge,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((Wr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ae.lanes|=c,Kr|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,wn(r,t.memoizedState)||(Rt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Ae.lanes|=i,Kr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function vu(e){var t=en(),n=t.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);wn(i,t.memoizedState)||(Rt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function zy(){}function Ay(e,t){var n=Ae,r=en(),s=t(),i=!wn(r.memoizedState,s);if(i&&(r.memoizedState=s,Rt=!0),r=r.queue,Fd(Ly.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Xi(9,Dy.bind(null,n,r,s,t),void 0,null),et===null)throw Error(x(349));Wr&30||My(n,t,s)}return s}function My(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Dy(e,t,n,r){t.value=n,t.getSnapshot=r,Zy(t)&&Uy(e)}function Ly(e,t,n){return n(function(){Zy(t)&&Uy(e)})}function Zy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wn(e,n)}catch{return!0}}function Uy(e){var t=Vn(e,1);t!==null&&yn(t,e,1,-1)}function gp(e){var t=$n();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:e},t.queue=e,e=e.dispatch=Z1.bind(null,Ae,e),[t.memoizedState,e]}function Xi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Fy(){return en().memoizedState}function oa(e,t,n,r){var s=$n();Ae.flags|=e,s.memoizedState=Xi(1|t,n,void 0,r===void 0?null:r)}function gl(e,t,n,r){var s=en();r=r===void 0?null:r;var i=void 0;if(Ge!==null){var o=Ge.memoizedState;if(i=o.destroy,r!==null&&Ld(r,o.deps)){s.memoizedState=Xi(t,n,i,r);return}}Ae.flags|=e,s.memoizedState=Xi(1|t,n,i,r)}function yp(e,t){return oa(8390656,8,e,t)}function Fd(e,t){return gl(2048,8,e,t)}function Vy(e,t){return gl(4,2,e,t)}function Hy(e,t){return gl(4,4,e,t)}function qy(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function By(e,t,n){return n=n!=null?n.concat([e]):null,gl(4,4,qy.bind(null,t,e),n)}function Vd(){}function Wy(e,t){var n=en();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ld(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ky(e,t){var n=en();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ld(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Gy(e,t,n){return Wr&21?(wn(n,t)||(n=ey(),Ae.lanes|=n,Kr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Rt=!0),e.memoizedState=n)}function D1(e,t){var n=$e;$e=n!==0&&4>n?n:4,e(!0);var r=gu.transition;gu.transition={};try{e(!1),t()}finally{$e=n,gu.transition=r}}function Qy(){return en().memoizedState}function L1(e,t,n){var r=mr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jy(e))Yy(t,n);else if(n=Cy(e,t,n,r),n!==null){var s=$t();yn(n,e,r,s),Xy(n,t,r)}}function Z1(e,t,n){var r=mr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jy(e))Yy(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,wn(a,o)){var l=t.interleaved;l===null?(s.next=s,jd(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=Cy(e,t,s,r),n!==null&&(s=$t(),yn(n,e,r,s),Xy(n,t,r))}}function Jy(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function Yy(e,t){Pi=za=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xy(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,wd(e,n)}}var Aa={readContext:Xt,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},U1={readContext:Xt,useCallback:function(e,t){return $n().memoizedState=[e,t===void 0?null:t],e},useContext:Xt,useEffect:yp,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,oa(4194308,4,qy.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return oa(4,2,e,t)},useMemo:function(e,t){var n=$n();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$n();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=L1.bind(null,Ae,e),[r.memoizedState,e]},useRef:function(e){var t=$n();return e={current:e},t.memoizedState=e},useState:gp,useDebugValue:Vd,useDeferredValue:function(e){return $n().memoizedState=e},useTransition:function(){var e=gp(!1),t=e[0];return e=D1.bind(null,e[1]),$n().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ae,s=$n();if(xe){if(n===void 0)throw Error(x(407));n=n()}else{if(n=t(),et===null)throw Error(x(349));Wr&30||My(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,yp(Ly.bind(null,r,i,e),[e]),r.flags|=2048,Xi(9,Dy.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=$n(),t=et.identifierPrefix;if(xe){var n=An,r=zn;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ji++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=M1++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},F1={readContext:Xt,useCallback:Wy,useContext:Xt,useEffect:Fd,useImperativeHandle:By,useInsertionEffect:Vy,useLayoutEffect:Hy,useMemo:Ky,useReducer:yu,useRef:Fy,useState:function(){return yu(Yi)},useDebugValue:Vd,useDeferredValue:function(e){var t=en();return Gy(t,Ge.memoizedState,e)},useTransition:function(){var e=yu(Yi)[0],t=en().memoizedState;return[e,t]},useMutableSource:zy,useSyncExternalStore:Ay,useId:Qy,unstable_isNewReconciler:!1},V1={readContext:Xt,useCallback:Wy,useContext:Xt,useEffect:Fd,useImperativeHandle:By,useInsertionEffect:Vy,useLayoutEffect:Hy,useMemo:Ky,useReducer:vu,useRef:Fy,useState:function(){return vu(Yi)},useDebugValue:Vd,useDeferredValue:function(e){var t=en();return Ge===null?t.memoizedState=e:Gy(t,Ge.memoizedState,e)},useTransition:function(){var e=vu(Yi)[0],t=en().memoizedState;return[e,t]},useMutableSource:zy,useSyncExternalStore:Ay,useId:Qy,unstable_isNewReconciler:!1};function dn(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function mc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Le({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var yl={isMounted:function(e){return(e=e._reactInternals)?es(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=$t(),s=mr(e),i=Mn(r,s);i.payload=t,n!=null&&(i.callback=n),t=hr(e,i,s),t!==null&&(yn(t,e,s,r),sa(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=$t(),s=mr(e),i=Mn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=hr(e,i,s),t!==null&&(yn(t,e,s,r),sa(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$t(),r=mr(e),s=Mn(n,r);s.tag=2,t!=null&&(s.callback=t),t=hr(e,s,r),t!==null&&(yn(t,e,r,n),sa(t,e,r))}};function vp(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!qi(n,r)||!qi(s,i):!0}function ev(e,t,n){var r=!1,s=_r,i=t.contextType;return typeof i=="object"&&i!==null?i=Xt(i):(s=Ct(t)?qr:yt.current,r=t.contextTypes,i=(r=r!=null)?Cs(e,s):_r),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function _p(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yl.enqueueReplaceState(t,t.state,null)}function gc(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},zd(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Xt(i):(i=Ct(t)?qr:yt.current,s.context=Cs(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(mc(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&yl.enqueueReplaceState(s,s.state,null),xa(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function As(e,t){try{var n="",r=t;do n+=yw(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function _u(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function yc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var H1=typeof WeakMap=="function"?WeakMap:Map;function tv(e,t,n){n=Mn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Da||(Da=!0,Pc=r),yc(e,t)},n}function nv(e,t,n){n=Mn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){yc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){yc(e,t),typeof r!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function wp(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new H1;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=sk.bind(null,e,t,n),t.then(e,e))}function kp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Sp(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Mn(-1,1),t.tag=2,hr(n,t,1))),n.lanes|=1),e)}var q1=Wn.ReactCurrentOwner,Rt=!1;function kt(e,t,n,r){t.child=e===null?Oy(t,null,n,r):js(t,e.child,n,r)}function $p(e,t,n,r,s){n=n.render;var i=t.ref;return bs(t,s),r=Zd(e,t,n,r,i,s),n=Ud(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Hn(e,t,s)):(xe&&n&&Id(t),t.flags|=1,kt(e,t,r,s),t.child)}function Ep(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Jd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,rv(e,t,i,r,s)):(e=ca(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:qi,n(o,r)&&e.ref===t.ref)return Hn(e,t,s)}return t.flags|=1,e=gr(i,r),e.ref=t.ref,e.return=t,t.child=e}function rv(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(qi(i,r)&&e.ref===t.ref)if(Rt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Rt=!0);else return t.lanes=e.lanes,Hn(e,t,s)}return vc(e,t,n,r,s)}function sv(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(vs,Lt),Lt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,be(vs,Lt),Lt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,be(vs,Lt),Lt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,be(vs,Lt),Lt|=r;return kt(e,t,s,n),t.child}function iv(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function vc(e,t,n,r,s){var i=Ct(n)?qr:yt.current;return i=Cs(t,i),bs(t,s),n=Zd(e,t,n,r,i,s),r=Ud(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Hn(e,t,s)):(xe&&r&&Id(t),t.flags|=1,kt(e,t,n,s),t.child)}function Tp(e,t,n,r,s){if(Ct(n)){var i=!0;Ia(t)}else i=!1;if(bs(t,s),t.stateNode===null)aa(e,t),ev(t,n,r),gc(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Xt(u):(u=Ct(n)?qr:yt.current,u=Cs(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&_p(t,o,r,u),er=!1;var m=t.memoizedState;o.state=m,xa(t,r,o,s),l=t.memoizedState,a!==r||m!==l||Ot.current||er?(typeof c=="function"&&(mc(t,n,c,r),l=t.memoizedState),(a=er||vp(t,n,a,r,m,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,xy(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:dn(t.type,a),o.props=u,f=t.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Xt(l):(l=Ct(n)?qr:yt.current,l=Cs(t,l));var v=n.getDerivedStateFromProps;(c=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&_p(t,o,r,l),er=!1,m=t.memoizedState,o.state=m,xa(t,r,o,s);var g=t.memoizedState;a!==f||m!==g||Ot.current||er?(typeof v=="function"&&(mc(t,n,v,r),g=t.memoizedState),(u=er||vp(t,n,u,r,m,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return _c(e,t,n,r,i,s)}function _c(e,t,n,r,s,i){iv(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&cp(t,n,!1),Hn(e,t,i);r=t.stateNode,q1.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=js(t,e.child,null,i),t.child=js(t,null,a,i)):kt(e,t,a,i),t.memoizedState=r.state,s&&cp(t,n,!0),t.child}function ov(e){var t=e.stateNode;t.pendingContext?up(e,t.pendingContext,t.pendingContext!==t.context):t.context&&up(e,t.context,!1),Ad(e,t.containerInfo)}function bp(e,t,n,r,s){return xs(),Nd(s),t.flags|=256,kt(e,t,n,r),t.child}var wc={dehydrated:null,treeContext:null,retryLane:0};function kc(e){return{baseLanes:e,cachePool:null,transitions:null}}function av(e,t,n){var r=t.pendingProps,s=ze.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),be(ze,s&1),e===null)return hc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=wl(o,r,0,null),e=Hr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=kc(n),t.memoizedState=wc,e):Hd(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return B1(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=gr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=gr(a,i):(i=Hr(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?kc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=wc,r}return i=e.child,e=i.sibling,r=gr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Hd(e,t){return t=wl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Do(e,t,n,r){return r!==null&&Nd(r),js(t,e.child,null,n),e=Hd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function B1(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=_u(Error(x(422))),Do(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=wl({mode:"visible",children:r.children},s,0,null),i=Hr(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&js(t,e.child,null,o),t.child.memoizedState=kc(o),t.memoizedState=wc,i);if(!(t.mode&1))return Do(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(x(419)),r=_u(i,r,void 0),Do(e,t,o,r)}if(a=(o&e.childLanes)!==0,Rt||a){if(r=et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Vn(e,s),yn(r,e,s,-1))}return Qd(),r=_u(Error(x(421))),Do(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=ik.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Zt=fr(s.nextSibling),Ut=t,xe=!0,hn=null,e!==null&&(Gt[Qt++]=zn,Gt[Qt++]=An,Gt[Qt++]=Br,zn=e.id,An=e.overflow,Br=t),t=Hd(t,r.children),t.flags|=4096,t)}function Pp(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),pc(e.return,t,n)}function wu(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function lv(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(kt(e,t,r.children,n),r=ze.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pp(e,n,t);else if(e.tag===19)Pp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(be(ze,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ja(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),wu(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ja(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}wu(t,!0,n,null,i);break;case"together":wu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function aa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Kr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(x(153));if(t.child!==null){for(e=t.child,n=gr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function W1(e,t,n){switch(t.tag){case 3:ov(t),xs();break;case 5:jy(t);break;case 1:Ct(t.type)&&Ia(t);break;case 4:Ad(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;be(Oa,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(be(ze,ze.current&1),t.flags|=128,null):n&t.child.childLanes?av(e,t,n):(be(ze,ze.current&1),e=Hn(e,t,n),e!==null?e.sibling:null);be(ze,ze.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return lv(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),be(ze,ze.current),r)break;return null;case 22:case 23:return t.lanes=0,sv(e,t,n)}return Hn(e,t,n)}var uv,Sc,cv,dv;uv=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sc=function(){};cv=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Dr(Rn.current);var i=null;switch(n){case"input":s=Hu(e,s),r=Hu(e,r),i=[];break;case"select":s=Le({},s,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":s=Wu(e,s),r=Wu(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ba)}Gu(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Di.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Di.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Re("scroll",e),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};dv=function(e,t,n,r){n!==r&&(t.flags|=4)};function oi(e,t){if(!xe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function K1(e,t,n){var r=t.pendingProps;switch(Rd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(t),null;case 1:return Ct(t.type)&&Pa(),pt(t),null;case 3:return r=t.stateNode,zs(),Oe(Ot),Oe(yt),Dd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ao(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hn!==null&&(Nc(hn),hn=null))),Sc(e,t),pt(t),null;case 5:Md(t);var s=Dr(Qi.current);if(n=t.type,e!==null&&t.stateNode!=null)cv(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(x(166));return pt(t),null}if(e=Dr(Rn.current),Ao(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[En]=t,r[Ki]=i,e=(t.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<gi.length;s++)Re(gi[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Ah(r,i),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Re("invalid",r);break;case"textarea":Dh(r,i),Re("invalid",r)}Gu(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&zo(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&zo(r.textContent,a,e),s=["children",""+a]):Di.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Re("scroll",r)}switch(n){case"input":Po(r),Mh(r,i,!0);break;case"textarea":Po(r),Lh(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ba)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Lg(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[En]=t,e[Ki]=r,uv(e,t,!1,!1),t.stateNode=e;e:{switch(o=Qu(n,r),n){case"dialog":Re("cancel",e),Re("close",e),s=r;break;case"iframe":case"object":case"embed":Re("load",e),s=r;break;case"video":case"audio":for(s=0;s<gi.length;s++)Re(gi[s],e);s=r;break;case"source":Re("error",e),s=r;break;case"img":case"image":case"link":Re("error",e),Re("load",e),s=r;break;case"details":Re("toggle",e),s=r;break;case"input":Ah(e,r),s=Hu(e,r),Re("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Le({},r,{value:void 0}),Re("invalid",e);break;case"textarea":Dh(e,r),s=Wu(e,r),Re("invalid",e);break;default:s=r}Gu(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Fg(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Zg(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Li(e,l):typeof l=="number"&&Li(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Di.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Re("scroll",e):l!=null&&pd(e,i,l,o))}switch(n){case"input":Po(e),Mh(e,r,!1);break;case"textarea":Po(e),Lh(e);break;case"option":r.value!=null&&e.setAttribute("value",""+vr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Ss(e,!!r.multiple,i,!1):r.defaultValue!=null&&Ss(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ba)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pt(t),null;case 6:if(e&&t.stateNode!=null)dv(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(x(166));if(n=Dr(Qi.current),Dr(Rn.current),Ao(t)){if(r=t.stateNode,n=t.memoizedProps,r[En]=t,(i=r.nodeValue!==n)&&(e=Ut,e!==null))switch(e.tag){case 3:zo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zo(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[En]=t,t.stateNode=r}return pt(t),null;case 13:if(Oe(ze),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xe&&Zt!==null&&t.mode&1&&!(t.flags&128))Ry(),xs(),t.flags|=98560,i=!1;else if(i=Ao(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(x(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(x(317));i[En]=t}else xs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pt(t),i=!1}else hn!==null&&(Nc(hn),hn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ze.current&1?Je===0&&(Je=3):Qd())),t.updateQueue!==null&&(t.flags|=4),pt(t),null);case 4:return zs(),Sc(e,t),e===null&&Bi(t.stateNode.containerInfo),pt(t),null;case 10:return xd(t.type._context),pt(t),null;case 17:return Ct(t.type)&&Pa(),pt(t),null;case 19:if(Oe(ze),i=t.memoizedState,i===null)return pt(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)oi(i,!1);else{if(Je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ja(e),o!==null){for(t.flags|=128,oi(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return be(ze,ze.current&1|2),t.child}e=e.sibling}i.tail!==null&&Be()>Ms&&(t.flags|=128,r=!0,oi(i,!1),t.lanes=4194304)}else{if(!r)if(e=ja(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),oi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xe)return pt(t),null}else 2*Be()-i.renderingStartTime>Ms&&n!==1073741824&&(t.flags|=128,r=!0,oi(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Be(),t.sibling=null,n=ze.current,be(ze,r?n&1|2:n&1),t):(pt(t),null);case 22:case 23:return Gd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Lt&1073741824&&(pt(t),t.subtreeFlags&6&&(t.flags|=8192)):pt(t),null;case 24:return null;case 25:return null}throw Error(x(156,t.tag))}function G1(e,t){switch(Rd(t),t.tag){case 1:return Ct(t.type)&&Pa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zs(),Oe(Ot),Oe(yt),Dd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Md(t),null;case 13:if(Oe(ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(x(340));xs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Oe(ze),null;case 4:return zs(),null;case 10:return xd(t.type._context),null;case 22:case 23:return Gd(),null;case 24:return null;default:return null}}var Lo=!1,gt=!1,Q1=typeof WeakSet=="function"?WeakSet:Set,F=null;function ys(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(e,t,r)}else n.current=null}function $c(e,t,n){try{n()}catch(r){Ve(e,t,r)}}var Ip=!1;function J1(e,t){if(oc=$a,e=gy(),Pd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=e,m=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)m=f,f=v;for(;;){if(f===e)break t;if(m===n&&++u===s&&(a=o),m===i&&++c===r&&(l=o),(v=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ac={focusedElem:e,selectionRange:n},$a=!1,F=t;F!==null;)if(t=F,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,F=e;else for(;F!==null;){t=F;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var _=g.memoizedProps,w=g.memoizedState,d=t.stateNode,h=d.getSnapshotBeforeUpdate(t.elementType===t.type?_:dn(t.type,_),w);d.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(k){Ve(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,F=e;break}F=t.return}return g=Ip,Ip=!1,g}function Ii(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&$c(t,n,i)}s=s.next}while(s!==r)}}function vl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ec(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function fv(e){var t=e.alternate;t!==null&&(e.alternate=null,fv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[En],delete t[Ki],delete t[cc],delete t[x1],delete t[j1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hv(e){return e.tag===5||e.tag===3||e.tag===4}function Rp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ba));else if(r!==4&&(e=e.child,e!==null))for(Tc(e,t,n),e=e.sibling;e!==null;)Tc(e,t,n),e=e.sibling}function bc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(bc(e,t,n),e=e.sibling;e!==null;)bc(e,t,n),e=e.sibling}var st=null,fn=!1;function Gn(e,t,n){for(n=n.child;n!==null;)pv(e,t,n),n=n.sibling}function pv(e,t,n){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(cl,n)}catch{}switch(n.tag){case 5:gt||ys(n,t);case 6:var r=st,s=fn;st=null,Gn(e,t,n),st=r,fn=s,st!==null&&(fn?(e=st,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(fn?(e=st,n=n.stateNode,e.nodeType===8?hu(e.parentNode,n):e.nodeType===1&&hu(e,n),Vi(e)):hu(st,n.stateNode));break;case 4:r=st,s=fn,st=n.stateNode.containerInfo,fn=!0,Gn(e,t,n),st=r,fn=s;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&$c(n,t,o),s=s.next}while(s!==r)}Gn(e,t,n);break;case 1:if(!gt&&(ys(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ve(n,t,a)}Gn(e,t,n);break;case 21:Gn(e,t,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,Gn(e,t,n),gt=r):Gn(e,t,n);break;default:Gn(e,t,n)}}function Np(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Q1),t.forEach(function(r){var s=ok.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function sn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:st=a.stateNode,fn=!1;break e;case 3:st=a.stateNode.containerInfo,fn=!0;break e;case 4:st=a.stateNode.containerInfo,fn=!0;break e}a=a.return}if(st===null)throw Error(x(160));pv(i,o,s),st=null,fn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Ve(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mv(t,e),t=t.sibling}function mv(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(sn(t,e),Sn(e),r&4){try{Ii(3,e,e.return),vl(3,e)}catch(_){Ve(e,e.return,_)}try{Ii(5,e,e.return)}catch(_){Ve(e,e.return,_)}}break;case 1:sn(t,e),Sn(e),r&512&&n!==null&&ys(n,n.return);break;case 5:if(sn(t,e),Sn(e),r&512&&n!==null&&ys(n,n.return),e.flags&32){var s=e.stateNode;try{Li(s,"")}catch(_){Ve(e,e.return,_)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Mg(s,i),Qu(a,o);var u=Qu(a,i);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?Fg(s,f):c==="dangerouslySetInnerHTML"?Zg(s,f):c==="children"?Li(s,f):pd(s,c,f,u)}switch(a){case"input":qu(s,i);break;case"textarea":Dg(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?Ss(s,!!i.multiple,v,!1):m!==!!i.multiple&&(i.defaultValue!=null?Ss(s,!!i.multiple,i.defaultValue,!0):Ss(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ki]=i}catch(_){Ve(e,e.return,_)}}break;case 6:if(sn(t,e),Sn(e),r&4){if(e.stateNode===null)throw Error(x(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(_){Ve(e,e.return,_)}}break;case 3:if(sn(t,e),Sn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vi(t.containerInfo)}catch(_){Ve(e,e.return,_)}break;case 4:sn(t,e),Sn(e);break;case 13:sn(t,e),Sn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Wd=Be())),r&4&&Np(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(gt=(u=gt)||c,sn(t,e),gt=u):sn(t,e),Sn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(F=e,c=e.child;c!==null;){for(f=F=c;F!==null;){switch(m=F,v=m.child,m.tag){case 0:case 11:case 14:case 15:Ii(4,m,m.return);break;case 1:ys(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(_){Ve(r,n,_)}}break;case 5:ys(m,m.return);break;case 22:if(m.memoizedState!==null){Cp(f);continue}}v!==null?(v.return=m,F=v):Cp(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ug("display",o))}catch(_){Ve(e,e.return,_)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(_){Ve(e,e.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:sn(t,e),Sn(e),r&4&&Np(e);break;case 21:break;default:sn(t,e),Sn(e)}}function Sn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(hv(n)){var r=n;break e}n=n.return}throw Error(x(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Li(s,""),r.flags&=-33);var i=Rp(e);bc(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Rp(e);Tc(e,a,o);break;default:throw Error(x(161))}}catch(l){Ve(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Y1(e,t,n){F=e,gv(e)}function gv(e,t,n){for(var r=(e.mode&1)!==0;F!==null;){var s=F,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Lo;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||gt;a=Lo;var u=gt;if(Lo=o,(gt=l)&&!u)for(F=s;F!==null;)o=F,l=o.child,o.tag===22&&o.memoizedState!==null?xp(s):l!==null?(l.return=o,F=l):xp(s);for(;i!==null;)F=i,gv(i),i=i.sibling;F=s,Lo=a,gt=u}Op(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,F=i):Op(e)}}function Op(e){for(;F!==null;){var t=F;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gt||vl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!gt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:dn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&mp(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}mp(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Vi(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}gt||t.flags&512&&Ec(t)}catch(m){Ve(t,t.return,m)}}if(t===e){F=null;break}if(n=t.sibling,n!==null){n.return=t.return,F=n;break}F=t.return}}function Cp(e){for(;F!==null;){var t=F;if(t===e){F=null;break}var n=t.sibling;if(n!==null){n.return=t.return,F=n;break}F=t.return}}function xp(e){for(;F!==null;){var t=F;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vl(4,t)}catch(l){Ve(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){Ve(t,s,l)}}var i=t.return;try{Ec(t)}catch(l){Ve(t,i,l)}break;case 5:var o=t.return;try{Ec(t)}catch(l){Ve(t,o,l)}}}catch(l){Ve(t,t.return,l)}if(t===e){F=null;break}var a=t.sibling;if(a!==null){a.return=t.return,F=a;break}F=t.return}}var X1=Math.ceil,Ma=Wn.ReactCurrentDispatcher,qd=Wn.ReactCurrentOwner,Yt=Wn.ReactCurrentBatchConfig,pe=0,et=null,We=null,lt=0,Lt=0,vs=Tr(0),Je=0,eo=null,Kr=0,_l=0,Bd=0,Ri=null,Pt=null,Wd=0,Ms=1/0,Cn=null,Da=!1,Pc=null,pr=null,Zo=!1,ar=null,La=0,Ni=0,Ic=null,la=-1,ua=0;function $t(){return pe&6?Be():la!==-1?la:la=Be()}function mr(e){return e.mode&1?pe&2&&lt!==0?lt&-lt:A1.transition!==null?(ua===0&&(ua=ey()),ua):(e=$e,e!==0||(e=window.event,e=e===void 0?16:ay(e.type)),e):1}function yn(e,t,n,r){if(50<Ni)throw Ni=0,Ic=null,Error(x(185));ao(e,n,r),(!(pe&2)||e!==et)&&(e===et&&(!(pe&2)&&(_l|=n),Je===4&&rr(e,lt)),xt(e,r),n===1&&pe===0&&!(t.mode&1)&&(Ms=Be()+500,ml&&br()))}function xt(e,t){var n=e.callbackNode;Aw(e,t);var r=Sa(e,e===et?lt:0);if(r===0)n!==null&&Fh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Fh(n),t===1)e.tag===0?z1(jp.bind(null,e)):by(jp.bind(null,e)),O1(function(){!(pe&6)&&br()}),n=null;else{switch(ty(r)){case 1:n=_d;break;case 4:n=Yg;break;case 16:n=ka;break;case 536870912:n=Xg;break;default:n=ka}n=Ev(n,yv.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function yv(e,t){if(la=-1,ua=0,pe&6)throw Error(x(327));var n=e.callbackNode;if(Ps()&&e.callbackNode!==n)return null;var r=Sa(e,e===et?lt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Za(e,r);else{t=r;var s=pe;pe|=2;var i=_v();(et!==e||lt!==t)&&(Cn=null,Ms=Be()+500,Vr(e,t));do try{nk();break}catch(a){vv(e,a)}while(!0);Cd(),Ma.current=i,pe=s,We!==null?t=0:(et=null,lt=0,t=Je)}if(t!==0){if(t===2&&(s=tc(e),s!==0&&(r=s,t=Rc(e,s))),t===1)throw n=eo,Vr(e,0),rr(e,r),xt(e,Be()),n;if(t===6)rr(e,r);else{if(s=e.current.alternate,!(r&30)&&!ek(s)&&(t=Za(e,r),t===2&&(i=tc(e),i!==0&&(r=i,t=Rc(e,i))),t===1))throw n=eo,Vr(e,0),rr(e,r),xt(e,Be()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(x(345));case 2:Or(e,Pt,Cn);break;case 3:if(rr(e,r),(r&130023424)===r&&(t=Wd+500-Be(),10<t)){if(Sa(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){$t(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=uc(Or.bind(null,e,Pt,Cn),t);break}Or(e,Pt,Cn);break;case 4:if(rr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-gn(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*X1(r/1960))-r,10<r){e.timeoutHandle=uc(Or.bind(null,e,Pt,Cn),r);break}Or(e,Pt,Cn);break;case 5:Or(e,Pt,Cn);break;default:throw Error(x(329))}}}return xt(e,Be()),e.callbackNode===n?yv.bind(null,e):null}function Rc(e,t){var n=Ri;return e.current.memoizedState.isDehydrated&&(Vr(e,t).flags|=256),e=Za(e,t),e!==2&&(t=Pt,Pt=n,t!==null&&Nc(t)),e}function Nc(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function ek(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!wn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rr(e,t){for(t&=~Bd,t&=~_l,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-gn(t),r=1<<n;e[n]=-1,t&=~r}}function jp(e){if(pe&6)throw Error(x(327));Ps();var t=Sa(e,0);if(!(t&1))return xt(e,Be()),null;var n=Za(e,t);if(e.tag!==0&&n===2){var r=tc(e);r!==0&&(t=r,n=Rc(e,r))}if(n===1)throw n=eo,Vr(e,0),rr(e,t),xt(e,Be()),n;if(n===6)throw Error(x(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Or(e,Pt,Cn),xt(e,Be()),null}function Kd(e,t){var n=pe;pe|=1;try{return e(t)}finally{pe=n,pe===0&&(Ms=Be()+500,ml&&br())}}function Gr(e){ar!==null&&ar.tag===0&&!(pe&6)&&Ps();var t=pe;pe|=1;var n=Yt.transition,r=$e;try{if(Yt.transition=null,$e=1,e)return e()}finally{$e=r,Yt.transition=n,pe=t,!(pe&6)&&br()}}function Gd(){Lt=vs.current,Oe(vs)}function Vr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,N1(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Rd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pa();break;case 3:zs(),Oe(Ot),Oe(yt),Dd();break;case 5:Md(r);break;case 4:zs();break;case 13:Oe(ze);break;case 19:Oe(ze);break;case 10:xd(r.type._context);break;case 22:case 23:Gd()}n=n.return}if(et=e,We=e=gr(e.current,null),lt=Lt=t,Je=0,eo=null,Bd=_l=Kr=0,Pt=Ri=null,Mr!==null){for(t=0;t<Mr.length;t++)if(n=Mr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Mr=null}return e}function vv(e,t){do{var n=We;try{if(Cd(),ia.current=Aa,za){for(var r=Ae.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}za=!1}if(Wr=0,Xe=Ge=Ae=null,Pi=!1,Ji=0,qd.current=null,n===null||n.return===null){Je=1,eo=t,We=null;break}e:{var i=e,o=n.return,a=n,l=t;if(t=lt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var m=c.alternate;m?(c.updateQueue=m.updateQueue,c.memoizedState=m.memoizedState,c.lanes=m.lanes):(c.updateQueue=null,c.memoizedState=null)}var v=kp(o);if(v!==null){v.flags&=-257,Sp(v,o,a,i,t),v.mode&1&&wp(i,u,t),t=v,l=u;var g=t.updateQueue;if(g===null){var _=new Set;_.add(l),t.updateQueue=_}else g.add(l);break e}else{if(!(t&1)){wp(i,u,t),Qd();break e}l=Error(x(426))}}else if(xe&&a.mode&1){var w=kp(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Sp(w,o,a,i,t),Nd(As(l,a));break e}}i=l=As(l,a),Je!==4&&(Je=2),Ri===null?Ri=[i]:Ri.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var d=tv(i,l,t);pp(i,d);break e;case 1:a=l;var h=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof h.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(pr===null||!pr.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=nv(i,a,t);pp(i,k);break e}}i=i.return}while(i!==null)}kv(n)}catch(E){t=E,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function _v(){var e=Ma.current;return Ma.current=Aa,e===null?Aa:e}function Qd(){(Je===0||Je===3||Je===2)&&(Je=4),et===null||!(Kr&268435455)&&!(_l&268435455)||rr(et,lt)}function Za(e,t){var n=pe;pe|=2;var r=_v();(et!==e||lt!==t)&&(Cn=null,Vr(e,t));do try{tk();break}catch(s){vv(e,s)}while(!0);if(Cd(),pe=n,Ma.current=r,We!==null)throw Error(x(261));return et=null,lt=0,Je}function tk(){for(;We!==null;)wv(We)}function nk(){for(;We!==null&&!Pw();)wv(We)}function wv(e){var t=$v(e.alternate,e,Lt);e.memoizedProps=e.pendingProps,t===null?kv(e):We=t,qd.current=null}function kv(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=G1(n,t),n!==null){n.flags&=32767,We=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,We=null;return}}else if(n=K1(n,t,Lt),n!==null){We=n;return}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Je===0&&(Je=5)}function Or(e,t,n){var r=$e,s=Yt.transition;try{Yt.transition=null,$e=1,rk(e,t,n,r)}finally{Yt.transition=s,$e=r}return null}function rk(e,t,n,r){do Ps();while(ar!==null);if(pe&6)throw Error(x(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(x(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Mw(e,i),e===et&&(We=et=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zo||(Zo=!0,Ev(ka,function(){return Ps(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Yt.transition,Yt.transition=null;var o=$e;$e=1;var a=pe;pe|=4,qd.current=null,J1(e,n),mv(n,e),$1(ac),$a=!!oc,ac=oc=null,e.current=n,Y1(n),Iw(),pe=a,$e=o,Yt.transition=i}else e.current=n;if(Zo&&(Zo=!1,ar=e,La=s),i=e.pendingLanes,i===0&&(pr=null),Ow(n.stateNode),xt(e,Be()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Da)throw Da=!1,e=Pc,Pc=null,e;return La&1&&e.tag!==0&&Ps(),i=e.pendingLanes,i&1?e===Ic?Ni++:(Ni=0,Ic=e):Ni=0,br(),null}function Ps(){if(ar!==null){var e=ty(La),t=Yt.transition,n=$e;try{if(Yt.transition=null,$e=16>e?16:e,ar===null)var r=!1;else{if(e=ar,ar=null,La=0,pe&6)throw Error(x(331));var s=pe;for(pe|=4,F=e.current;F!==null;){var i=F,o=i.child;if(F.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(F=u;F!==null;){var c=F;switch(c.tag){case 0:case 11:case 15:Ii(8,c,i)}var f=c.child;if(f!==null)f.return=c,F=f;else for(;F!==null;){c=F;var m=c.sibling,v=c.return;if(fv(c),c===u){F=null;break}if(m!==null){m.return=v,F=m;break}F=v}}}var g=i.alternate;if(g!==null){var _=g.child;if(_!==null){g.child=null;do{var w=_.sibling;_.sibling=null,_=w}while(_!==null)}}F=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,F=o;else e:for(;F!==null;){if(i=F,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ii(9,i,i.return)}var d=i.sibling;if(d!==null){d.return=i.return,F=d;break e}F=i.return}}var h=e.current;for(F=h;F!==null;){o=F;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,F=p;else e:for(o=h;F!==null;){if(a=F,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vl(9,a)}}catch(E){Ve(a,a.return,E)}if(a===o){F=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,F=k;break e}F=a.return}}if(pe=s,br(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(cl,e)}catch{}r=!0}return r}finally{$e=n,Yt.transition=t}}return!1}function zp(e,t,n){t=As(n,t),t=tv(e,t,1),e=hr(e,t,1),t=$t(),e!==null&&(ao(e,1,t),xt(e,t))}function Ve(e,t,n){if(e.tag===3)zp(e,e,n);else for(;t!==null;){if(t.tag===3){zp(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pr===null||!pr.has(r))){e=As(n,e),e=nv(t,e,1),t=hr(t,e,1),e=$t(),t!==null&&(ao(t,1,e),xt(t,e));break}}t=t.return}}function sk(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=$t(),e.pingedLanes|=e.suspendedLanes&n,et===e&&(lt&n)===n&&(Je===4||Je===3&&(lt&130023424)===lt&&500>Be()-Wd?Vr(e,0):Bd|=n),xt(e,t)}function Sv(e,t){t===0&&(e.mode&1?(t=No,No<<=1,!(No&130023424)&&(No=4194304)):t=1);var n=$t();e=Vn(e,t),e!==null&&(ao(e,t,n),xt(e,n))}function ik(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Sv(e,n)}function ok(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(x(314))}r!==null&&r.delete(t),Sv(e,n)}var $v;$v=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ot.current)Rt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Rt=!1,W1(e,t,n);Rt=!!(e.flags&131072)}else Rt=!1,xe&&t.flags&1048576&&Py(t,Na,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;aa(e,t),e=t.pendingProps;var s=Cs(t,yt.current);bs(t,n),s=Zd(null,t,r,e,s,n);var i=Ud();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ct(r)?(i=!0,Ia(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zd(t),s.updater=yl,t.stateNode=s,s._reactInternals=t,gc(t,r,e,n),t=_c(null,t,r,!0,i,n)):(t.tag=0,xe&&i&&Id(t),kt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(aa(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=lk(r),e=dn(r,e),s){case 0:t=vc(null,t,r,e,n);break e;case 1:t=Tp(null,t,r,e,n);break e;case 11:t=$p(null,t,r,e,n);break e;case 14:t=Ep(null,t,r,dn(r.type,e),n);break e}throw Error(x(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:dn(r,s),vc(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:dn(r,s),Tp(e,t,r,s,n);case 3:e:{if(ov(t),e===null)throw Error(x(387));r=t.pendingProps,i=t.memoizedState,s=i.element,xy(e,t),xa(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=As(Error(x(423)),t),t=bp(e,t,r,n,s);break e}else if(r!==s){s=As(Error(x(424)),t),t=bp(e,t,r,n,s);break e}else for(Zt=fr(t.stateNode.containerInfo.firstChild),Ut=t,xe=!0,hn=null,n=Oy(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xs(),r===s){t=Hn(e,t,n);break e}kt(e,t,r,n)}t=t.child}return t;case 5:return jy(t),e===null&&hc(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,lc(r,s)?o=null:i!==null&&lc(r,i)&&(t.flags|=32),iv(e,t),kt(e,t,o,n),t.child;case 6:return e===null&&hc(t),null;case 13:return av(e,t,n);case 4:return Ad(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=js(t,null,r,n):kt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:dn(r,s),$p(e,t,r,s,n);case 7:return kt(e,t,t.pendingProps,n),t.child;case 8:return kt(e,t,t.pendingProps.children,n),t.child;case 12:return kt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,be(Oa,r._currentValue),r._currentValue=o,i!==null)if(wn(i.value,o)){if(i.children===s.children&&!Ot.current){t=Hn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Mn(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),pc(i.return,n,t),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(x(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),pc(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}kt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,bs(t,n),s=Xt(s),r=r(s),t.flags|=1,kt(e,t,r,n),t.child;case 14:return r=t.type,s=dn(r,t.pendingProps),s=dn(r.type,s),Ep(e,t,r,s,n);case 15:return rv(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:dn(r,s),aa(e,t),t.tag=1,Ct(r)?(e=!0,Ia(t)):e=!1,bs(t,n),ev(t,r,s),gc(t,r,s,n),_c(null,t,r,!0,e,n);case 19:return lv(e,t,n);case 22:return sv(e,t,n)}throw Error(x(156,t.tag))};function Ev(e,t){return Jg(e,t)}function ak(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(e,t,n,r){return new ak(e,t,n,r)}function Jd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function lk(e){if(typeof e=="function")return Jd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gd)return 11;if(e===yd)return 14}return 2}function gr(e,t){var n=e.alternate;return n===null?(n=Jt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ca(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")Jd(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ls:return Hr(n.children,s,i,t);case md:o=8,s|=8;break;case Zu:return e=Jt(12,n,t,s|2),e.elementType=Zu,e.lanes=i,e;case Uu:return e=Jt(13,n,t,s),e.elementType=Uu,e.lanes=i,e;case Fu:return e=Jt(19,n,t,s),e.elementType=Fu,e.lanes=i,e;case jg:return wl(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Cg:o=10;break e;case xg:o=9;break e;case gd:o=11;break e;case yd:o=14;break e;case Xn:o=16,r=null;break e}throw Error(x(130,e==null?e:typeof e,""))}return t=Jt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Hr(e,t,n,r){return e=Jt(7,e,r,t),e.lanes=n,e}function wl(e,t,n,r){return e=Jt(22,e,r,t),e.elementType=jg,e.lanes=n,e.stateNode={isHidden:!1},e}function ku(e,t,n){return e=Jt(6,e,null,t),e.lanes=n,e}function Su(e,t,n){return t=Jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function uk(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nu(0),this.expirationTimes=nu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yd(e,t,n,r,s,i,o,a,l){return e=new uk(e,t,n,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Jt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zd(i),e}function ck(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:as,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Tv(e){if(!e)return _r;e=e._reactInternals;e:{if(es(e)!==e||e.tag!==1)throw Error(x(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(x(171))}if(e.tag===1){var n=e.type;if(Ct(n))return Ty(e,n,t)}return t}function bv(e,t,n,r,s,i,o,a,l){return e=Yd(n,r,!0,e,s,i,o,a,l),e.context=Tv(null),n=e.current,r=$t(),s=mr(n),i=Mn(r,s),i.callback=t??null,hr(n,i,s),e.current.lanes=s,ao(e,s,r),xt(e,r),e}function kl(e,t,n,r){var s=t.current,i=$t(),o=mr(s);return n=Tv(n),t.context===null?t.context=n:t.pendingContext=n,t=Mn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=hr(s,t,o),e!==null&&(yn(e,s,o,i),sa(e,s,o)),o}function Ua(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ap(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xd(e,t){Ap(e,t),(e=e.alternate)&&Ap(e,t)}function dk(){return null}var Pv=typeof reportError=="function"?reportError:function(e){console.error(e)};function ef(e){this._internalRoot=e}Sl.prototype.render=ef.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(x(409));kl(e,t,null,null)};Sl.prototype.unmount=ef.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gr(function(){kl(null,e,null,null)}),t[Fn]=null}};function Sl(e){this._internalRoot=e}Sl.prototype.unstable_scheduleHydration=function(e){if(e){var t=sy();e={blockedOn:null,target:e,priority:t};for(var n=0;n<nr.length&&t!==0&&t<nr[n].priority;n++);nr.splice(n,0,e),n===0&&oy(e)}};function tf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Mp(){}function fk(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Ua(o);i.call(u)}}var o=bv(t,r,e,0,null,!1,!1,"",Mp);return e._reactRootContainer=o,e[Fn]=o.current,Bi(e.nodeType===8?e.parentNode:e),Gr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Ua(l);a.call(u)}}var l=Yd(e,0,!1,null,null,!1,!1,"",Mp);return e._reactRootContainer=l,e[Fn]=l.current,Bi(e.nodeType===8?e.parentNode:e),Gr(function(){kl(t,l,n,r)}),l}function El(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Ua(o);a.call(l)}}kl(t,o,e,s)}else o=fk(n,t,e,s,r);return Ua(o)}ny=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=mi(t.pendingLanes);n!==0&&(wd(t,n|1),xt(t,Be()),!(pe&6)&&(Ms=Be()+500,br()))}break;case 13:Gr(function(){var r=Vn(e,1);if(r!==null){var s=$t();yn(r,e,1,s)}}),Xd(e,1)}};kd=function(e){if(e.tag===13){var t=Vn(e,134217728);if(t!==null){var n=$t();yn(t,e,134217728,n)}Xd(e,134217728)}};ry=function(e){if(e.tag===13){var t=mr(e),n=Vn(e,t);if(n!==null){var r=$t();yn(n,e,t,r)}Xd(e,t)}};sy=function(){return $e};iy=function(e,t){var n=$e;try{return $e=e,t()}finally{$e=n}};Yu=function(e,t,n){switch(t){case"input":if(qu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=pl(r);if(!s)throw Error(x(90));Ag(r),qu(r,s)}}}break;case"textarea":Dg(e,n);break;case"select":t=n.value,t!=null&&Ss(e,!!n.multiple,t,!1)}};qg=Kd;Bg=Gr;var hk={usingClientEntryPoint:!1,Events:[uo,fs,pl,Vg,Hg,Kd]},ai={findFiberByHostInstance:Ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pk={bundleType:ai.bundleType,version:ai.version,rendererPackageName:ai.rendererPackageName,rendererConfig:ai.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Gg(e),e===null?null:e.stateNode},findFiberByHostInstance:ai.findFiberByHostInstance||dk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uo.isDisabled&&Uo.supportsFiber)try{cl=Uo.inject(pk),In=Uo}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hk;Ht.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tf(t))throw Error(x(200));return ck(e,t,null,n)};Ht.createRoot=function(e,t){if(!tf(e))throw Error(x(299));var n=!1,r="",s=Pv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Yd(e,1,!1,null,null,n,!1,r,s),e[Fn]=t.current,Bi(e.nodeType===8?e.parentNode:e),new ef(t)};Ht.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(x(188)):(e=Object.keys(e).join(","),Error(x(268,e)));return e=Gg(t),e=e===null?null:e.stateNode,e};Ht.flushSync=function(e){return Gr(e)};Ht.hydrate=function(e,t,n){if(!$l(t))throw Error(x(200));return El(null,e,t,!0,n)};Ht.hydrateRoot=function(e,t,n){if(!tf(e))throw Error(x(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Pv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=bv(t,null,e,1,n??null,s,!1,i,o),e[Fn]=t.current,Bi(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Sl(t)};Ht.render=function(e,t,n){if(!$l(t))throw Error(x(200));return El(null,e,t,!1,n)};Ht.unmountComponentAtNode=function(e){if(!$l(e))throw Error(x(40));return e._reactRootContainer?(Gr(function(){El(null,null,e,!1,function(){e._reactRootContainer=null,e[Fn]=null})}),!0):!1};Ht.unstable_batchedUpdates=Kd;Ht.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$l(n))throw Error(x(200));if(e==null||e._reactInternals===void 0)throw Error(x(38));return El(e,t,n,!1,r)};Ht.version="18.3.1-next-f1338f8080-20240426";function Iv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Iv)}catch(e){console.error(e)}}Iv(),Ig.exports=Ht;var Rv=Ig.exports,Dp=Rv;Du.createRoot=Dp.createRoot,Du.hydrateRoot=Dp.hydrateRoot;var At;(function(e){e.TEXT2IMAGE="TEXT2IMAGE",e.IMAGE2IMAGE="IMAGE2IMAGE",e.ANIMATE="ANIMATE",e.INPAINT="INPAINT",e.REMOVE_BG="REMOVE_BG",e.TEXT2VIDEO="TEXT2VIDEO",e.TEXT2MUSIC="TEXT2MUSIC",e.FOLEY="FOLEY",e.TEXT2SPEECH="TEXT2SPEECH",e.TEXT2TEXT="TEXT2TEXT",e.MODEL="MODEL"})(At||(At={}));const Lr="https://avatars.charhub.io/avatars/uploads/images/gallery/file/1b9649dd-69f7-4231-802f-22be084ad0f9/c5a93b6a-7c28-45c0-bbdd-62b45d73bfdc.png",nt=[];for(let e=0;e<256;++e)nt.push((e+256).toString(16).slice(1));function mk(e,t=0){return(nt[e[t+0]]+nt[e[t+1]]+nt[e[t+2]]+nt[e[t+3]]+"-"+nt[e[t+4]]+nt[e[t+5]]+"-"+nt[e[t+6]]+nt[e[t+7]]+"-"+nt[e[t+8]]+nt[e[t+9]]+"-"+nt[e[t+10]]+nt[e[t+11]]+nt[e[t+12]]+nt[e[t+13]]+nt[e[t+14]]+nt[e[t+15]]).toLowerCase()}let $u;const gk=new Uint8Array(16);function yk(){if(!$u){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");$u=crypto.getRandomValues.bind(crypto)}return $u(gk)}const vk=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Lp={randomUUID:vk};function _k(e,t,n){var s;if(Lp.randomUUID&&!t&&!e)return Lp.randomUUID();e=e||{};const r=e.random??((s=e.rng)==null?void 0:s.call(e))??yk();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){if(n=n||0,n<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let i=0;i<16;++i)t[n+i]=r[i];return t}return mk(r)}const nf=new Set(["https://venus.chub.ai","https://chat.chub.ai","https://chub.ai","https://www.chub.ai","https://preview.chub.ai","capacitor://localhost","http://localhost","https://lvh.me:5173","file://127.0.0.1","https://localhost.localdomain:5173","https://vite.lvh.me:5173","https://192.168.50.239:5173","https://vite.lvh.me","https://192.168.50.239","file://localhost","https://127.0.0.1","https://localhost","http://127.0.0.1","capacitor://127.0.0.1","https://localhost:5173","http://localhost:5173","file://","capacitor://"]);function wt(e,t,n=6e3){return new Promise((r,s)=>{const i=_k();t.uuid=i;let o=!1;const a=l=>{if(l.source===window.parent&&(nf.has(l.origin)||l.origin.endsWith("chub.ai")||l.origin.endsWith("chub-ui.pages.dev"))){const{messageType:u,data:c}=l.data;u!=null&&u==i&&(window.removeEventListener("message",a),o=!0,c!=null&&c.hasOwnProperty("error")&&c.error!=null&&(console.error(`Error for ${e}, error: ${c.error}`),r(null)),r(c))}};window.addEventListener("message",a),window.parent.postMessage({messageType:e,data:t},"*"),setTimeout(()=>{window.removeEventListener("message",a),o||(console.error(`Response timeout for ${e}`),r(null))},n*1e3)})}var ke;(function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.FFPROBE="FFPROBE",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT"})(ke||(ke={}));const wk=(()=>{let e=0;return()=>e++})(),kk=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),Sk=new Error("called FFmpeg.terminate()");var Dt,sr,jn,Ur,Fr,ll,_t;class $k{constructor(){Kn(this,Dt,null);Kn(this,sr,{});Kn(this,jn,{});Kn(this,Ur,[]);Kn(this,Fr,[]);tt(this,"loaded",!1);Kn(this,ll,()=>{le(this,Dt)&&(le(this,Dt).onmessage=({data:{id:t,type:n,data:r}})=>{switch(n){case ke.LOAD:this.loaded=!0,le(this,sr)[t](r);break;case ke.MOUNT:case ke.UNMOUNT:case ke.EXEC:case ke.FFPROBE:case ke.WRITE_FILE:case ke.READ_FILE:case ke.DELETE_FILE:case ke.RENAME:case ke.CREATE_DIR:case ke.LIST_DIR:case ke.DELETE_DIR:le(this,sr)[t](r);break;case ke.LOG:le(this,Ur).forEach(s=>s(r));break;case ke.PROGRESS:le(this,Fr).forEach(s=>s(r));break;case ke.ERROR:le(this,jn)[t](r);break}delete le(this,sr)[t],delete le(this,jn)[t]})});Kn(this,_t,({type:t,data:n},r=[],s)=>le(this,Dt)?new Promise((i,o)=>{const a=wk();le(this,Dt)&&le(this,Dt).postMessage({id:a,type:t,data:n},r),le(this,sr)[a]=i,le(this,jn)[a]=o,s==null||s.addEventListener("abort",()=>{o(new DOMException(`Message # ${a} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(kk));tt(this,"load",({classWorkerURL:t,...n}={},{signal:r}={})=>(le(this,Dt)||(Xs(this,Dt,t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL(""+new URL("worker-BAOIWoxA.js",import.meta.url).href,import.meta.url),{type:"module"})),le(this,ll).call(this)),le(this,_t).call(this,{type:ke.LOAD,data:n},void 0,r)));tt(this,"exec",(t,n=-1,{signal:r}={})=>le(this,_t).call(this,{type:ke.EXEC,data:{args:t,timeout:n}},void 0,r));tt(this,"ffprobe",(t,n=-1,{signal:r}={})=>le(this,_t).call(this,{type:ke.FFPROBE,data:{args:t,timeout:n}},void 0,r));tt(this,"terminate",()=>{const t=Object.keys(le(this,jn));for(const n of t)le(this,jn)[n](Sk),delete le(this,jn)[n],delete le(this,sr)[n];le(this,Dt)&&(le(this,Dt).terminate(),Xs(this,Dt,null),this.loaded=!1)});tt(this,"writeFile",(t,n,{signal:r}={})=>{const s=[];return n instanceof Uint8Array&&s.push(n.buffer),le(this,_t).call(this,{type:ke.WRITE_FILE,data:{path:t,data:n}},s,r)});tt(this,"mount",(t,n,r)=>{const s=[];return le(this,_t).call(this,{type:ke.MOUNT,data:{fsType:t,options:n,mountPoint:r}},s)});tt(this,"unmount",t=>{const n=[];return le(this,_t).call(this,{type:ke.UNMOUNT,data:{mountPoint:t}},n)});tt(this,"readFile",(t,n="binary",{signal:r}={})=>le(this,_t).call(this,{type:ke.READ_FILE,data:{path:t,encoding:n}},void 0,r));tt(this,"deleteFile",(t,{signal:n}={})=>le(this,_t).call(this,{type:ke.DELETE_FILE,data:{path:t}},void 0,n));tt(this,"rename",(t,n,{signal:r}={})=>le(this,_t).call(this,{type:ke.RENAME,data:{oldPath:t,newPath:n}},void 0,r));tt(this,"createDir",(t,{signal:n}={})=>le(this,_t).call(this,{type:ke.CREATE_DIR,data:{path:t}},void 0,n));tt(this,"listDir",(t,{signal:n}={})=>le(this,_t).call(this,{type:ke.LIST_DIR,data:{path:t}},void 0,n));tt(this,"deleteDir",(t,{signal:n}={})=>le(this,_t).call(this,{type:ke.DELETE_DIR,data:{path:t}},void 0,n))}on(t,n){t==="log"?le(this,Ur).push(n):t==="progress"&&le(this,Fr).push(n)}off(t,n){t==="log"?Xs(this,Ur,le(this,Ur).filter(r=>r!==n)):t==="progress"&&Xs(this,Fr,le(this,Fr).filter(r=>r!==n))}}Dt=new WeakMap,sr=new WeakMap,jn=new WeakMap,Ur=new WeakMap,Fr=new WeakMap,ll=new WeakMap,_t=new WeakMap;var Zp;(function(e){e.MEMFS="MEMFS",e.NODEFS="NODEFS",e.NODERAWFS="NODERAWFS",e.IDBFS="IDBFS",e.WORKERFS="WORKERFS",e.PROXYFS="PROXYFS"})(Zp||(Zp={}));var Oc;(function(e){e.SQUARE="1:1",e.WIDESCREEN_HORIZONTAL="16:9",e.CINEMATIC_HORIZONTAL="21:9",e.PHOTO_VERTICAL="2:3",e.PHOTO_HORIZONTAL="3:2",e.POST_VERTICAL="4:5",e.POST_HORIZONTAL="5:4",e.WIDESCREEN_VERTICAL="9:16",e.CINEMATIC_VERTICAL="9:21"})(Oc||(Oc={}));const rf={seed:null,item_id:null},Nv={negative_prompt:null,prompt:"Super cute chubby kitten, high res perfect, will make you believe in the afterlife, 8K"},Ek=Object.assign(Object.assign({aspect_ratio:Oc.SQUARE,remove_background:!1},Nv),rf),Ov=Object.assign(Object.assign({},Ek),{image:Lr,strength:.7,transfer_type:"default"}),Tk=Object.assign(Object.assign({},rf),{image:Lr,cfg_scale:1.8,motion_bucket_id:127}),bk=Object.assign(Object.assign({},Ov),{search_prompt:"Anything with a face",mask:null}),Pk={image:Lr},Cv={seconds:5};Object.assign(Object.assign({},Nv),Cv);Object.assign(Object.assign(Object.assign({},Cv),rf),{prompt:"Thunderstorm"});var Fo=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class Ik{makeImage(t){return wt(At.TEXT2IMAGE,t)}imageToImage(t){return wt(At.IMAGE2IMAGE,t)}animateImage(t){return wt(At.ANIMATE,t,600)}inpaintImage(t){return wt(At.INPAINT,t)}removeBackground(t){return wt(At.REMOVE_BG,t)}makeVideo(t){return wt(At.TEXT2VIDEO,t)}makeMusic(t){return wt(At.TEXT2MUSIC,t)}makeSound(t){return wt(At.FOLEY,t)}speak(t){return wt(At.TEXT2SPEECH,t)}textGen(t){return wt(At.TEXT2TEXT,t)}makeVoice(){return Promise.resolve(void 0)}modelGen(t){return wt(At.MODEL,t)}transcribe(){return Promise.resolve(void 0)}}class Rk{makeImage(t){return new Promise(n=>{n({url:Lr,seed:0,cost:null})})}imageToImage(t){return new Promise((n,r)=>{t=Object.assign(Object.assign({},Ov),t);const s=document.createElement("canvas"),i=s.getContext("2d");if(!i){n(null);return}s.style.display="none";const o=new Image,a=new Image;o.onload=()=>{s.width=o.width,s.height=o.height,i.drawImage(o,0,0),a.onload=()=>{i.globalAlpha=t.strength,i.drawImage(a,0,0,s.width,s.height),i.globalAlpha=1;const l=s.toDataURL();n({url:l,seed:0,cost:null}),s.width=0,s.height=0,s.remove()},a.onerror=l=>{n(null)},a.src=Lr},o.onerror=l=>{n(null)},o.src=t.image})}convertFileToBase64(t){return Fo(this,void 0,void 0,function*(){const n=yield t.arrayBuffer();let r="";const s=new Uint8Array(n),i=s.byteLength;for(let o=0;o<i;o++)r+=String.fromCharCode(s[o]);return window.btoa(r)})}animateImage(t){return Fo(this,void 0,void 0,function*(){try{t=Object.assign(Object.assign({},Tk),t);const n=new $k;yield n.load();let r="image.png";if(t.image.includes("https:")){const l=t.image.split("/");r=l[l.length-1]}const s="output.mp4",i=yield fetch(t.image).then(l=>l.arrayBuffer());yield n.writeFile(r,new Uint8Array(i)),yield n.exec(["-i",r,"-vf","rotate=angle=45*sin(t/2):fillcolor=none,scale=w=iw/2:h=ih/2","-t","3","-c:v","libx264","-pix_fmt","yuv420p",s]);const o=yield n.readFile(s),a=yield this.convertFileToBase64(o);return yield n.unmount(r),yield n.unmount(s),{url:`data:video/mp4;base64,${a}`,seed:0,cost:0}}catch(n){return console.error(`Unexpected error making mock video. Are you on an older browser? Error: ${n}`),null}})}inpaintImage(t){return Fo(this,void 0,void 0,function*(){if(t=Object.assign(Object.assign({},bk),t),t.mask==null)return Promise.resolve({url:Lr,seed:0,cost:0});const n=document.createElement("canvas"),r=n.getContext("2d"),s=new Image;s.src=t.image,yield new Promise(l=>s.onload=l),n.width=s.width,n.height=s.height,r.drawImage(s,0,0);const i=new Image;i.src=t.mask,yield new Promise(l=>i.onload=l),r.globalCompositeOperation="destination-in",r.drawImage(i,0,0,n.width,n.height);const o=new Image;return o.src=Lr,yield new Promise(l=>o.onload=l),r.globalCompositeOperation="source-over",r.drawImage(o,0,0,n.width,n.height),{url:n.toDataURL(),seed:0,cost:0}})}removeBackground(t){return Fo(this,void 0,void 0,function*(){t=Object.assign(Object.assign({},Pk),t);const n=t.image,r=document.createElement("canvas"),s=r.getContext("2d"),i=new Image;i.src=n,yield new Promise(c=>i.onload=c),r.width=i.width,r.height=i.height,s.drawImage(i,0,0);const o=s.getImageData(0,0,r.width,r.height),a=o.data,l=50;for(let c=0;c<l;c++)for(let f=0;f<r.width;f++){const m=(c*r.width+f)*4;a[m+3]=0}for(let c=r.height-l;c<r.height;c++)for(let f=0;f<r.width;f++){const m=(c*r.width+f)*4;a[m+3]=0}for(let c=0;c<l;c++)for(let f=0;f<r.height;f++){const m=(f*r.width+c)*4;a[m+3]=0}for(let c=r.width-l;c<r.width;c++)for(let f=0;f<r.height;f++){const m=(f*r.width+c)*4;a[m+3]=0}return s.putImageData(o,0,0),{url:r.toDataURL(),seed:0,cost:0}})}makeVideo(t){return Promise.resolve({seed:0,url:"https://avatars.charhub.io/79b2188d-293d-42cb-ab50-fddbce4b28b9.gif",cost:0})}makeMusic(t){return Promise.resolve({seed:0,url:"https://media.chub.ai/FadingMemories.mp3",cost:0})}makeSound(t){return Promise.resolve({seed:0,url:"https://media.chub.ai/rain-and-thunder-16705.mp3",cost:0})}speak(t){return Promise.resolve({seed:0,url:"https://media.chub.ai/ElevenLabs_2024-04-27T03%2023%2053_D_ivc_s50_sb79_se26_b_m2.mp3",cost:0})}textGen(t){return Promise.resolve({result:"A default text response.",cost:0})}makeVoice(){return Promise.resolve(void 0)}modelGen(t){return t.output_type!=null||t.output_type=="vrm"?Promise.resolve({seed:0,url:"https://media.chub.ai/meshes/fox.vrm",cost:0}):Promise.resolve({seed:0,url:"https://media.chub.ai/meshes/fox.glb",cost:0})}transcribe(){return Promise.resolve(void 0)}}var _s;(function(e){e.IMPERSONATE="IMPERSONATE",e.CHAT_STATE="CHAT_STATE",e.ENVIRONMENT="ENVIRONMENT",e.NUDGE="NUDGE"})(_s||(_s={}));class Nk{impersonate(t){return wt(_s.IMPERSONATE,t)}updateChatState(t){return wt(_s.CHAT_STATE,t)}updateEnvironment(t){return wt(_s.ENVIRONMENT,t)}nudge(t){return wt(_s.NUDGE,t)}}class Ok{impersonate(t){return Promise.resolve({success:!0,error:null,identity:"fakeid"})}updateChatState(t){return Promise.resolve({success:!0,error:null})}updateEnvironment(t){return Promise.resolve({success:!0,error:null})}nudge(t){return Promise.resolve({success:!0,error:null,identity:"fakeid"})}}var _e;(function(e){e.world="world",e.user="user",e.persona="persona",e.character="character",e.character_sensitive="character_sensitive",e.user_character="user_character",e.persona_character="persona_character"})(_e||(_e={}));var vn;(function(e){e.UPSERT="UPSERT",e.DELETE="DELETE"})(vn||(vn={}));class ws extends Error{constructor(t){super(t),this.name="StorageError",Object.setPrototypeOf(this,ws.prototype)}}var Ck=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function xk(e){return Ck(this,void 0,void 0,function*(){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result.split(",")[1];t(i)},r.onerror=n,r.readAsDataURL(e)})})}var jk=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class Is{constructor(t,n,r,s=null,i=null,o){var a;this.changes={changes:[]},this.change=null,this.token=t,this.urlBase=n,this.change={key:r,scope_type:_e.world,type:o??vn.UPSERT,chat_local:!1,value:i,character_id:(a=s==null?void 0:s.character)!==null&&a!==void 0?a:null}}forCharacterSensitive(t){if(this.change.character_id=t,this.change.scope_type!=_e.world&&this.change.scope_type!=_e.character_sensitive)throw new ws(`Character sensitive scope cannot be combined with other scopes. This change already has scope ${this.change.scope_type}.`);return this.change.scope_type=_e.character_sensitive,this}forCharacter(t){if(this.change.character_id=t,this.change.scope_type==_e.world||this.change.scope_type==_e.character)this.change.scope_type=_e.character;else if(this.change.scope_type==_e.user||this.change.scope_type==_e.user_character)this.change.scope_type=_e.user_character;else if(this.change.scope_type==_e.persona||this.change.scope_type==_e.persona_character)this.change.scope_type=_e.persona_character;else throw new ws(`Character scope cannot be combined with scope ${this.change.scope_type}.`);return this}forUser(){if(this.change.scope_type==_e.world||this.change.scope_type==_e.user)this.change.scope_type=_e.user;else if(this.change.scope_type==_e.character||this.change.scope_type==_e.user_character)this.change.scope_type=_e.user_character;else throw new ws(`User scope cannot be combined with scope ${this.change.scope_type}.`);return this}forPersona(){if(this.change.scope_type==_e.world||this.change.scope_type==_e.user||this.change.scope_type==_e.persona)this.change.scope_type=_e.persona;else if(this.change.scope_type==_e.character||this.change.scope_type==_e.persona_character)this.change.scope_type=_e.persona_character;else throw new ws(`Persona scope cannot be combined with scope ${this.change.scope_type}.`);return this}forChat(){return this.change.chat_local=!0,this}set(t,n){return this.change!=null&&(this.changes.changes.push(this.change),this.change=null),this.change={key:t,scope_type:_e.world,type:vn.UPSERT,chat_local:!1,value:n,character_id:null},this}clear(t){return this.change!=null&&(this.changes.changes.push(this.change),this.change=null),this.change={key:t,scope_type:_e.world,type:vn.DELETE,chat_local:!1,value:null,character_id:null},this}execute(){return jk(this,void 0,void 0,function*(){this.change!=null&&(this.changes.changes.push(this.change),this.change=null);for(const t of this.changes.changes)t.value instanceof File&&(t.file_extension=t.value.name.split(".")[1],t.value=yield xk(t.value));try{const t=yield fetch(this.urlBase,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token},body:JSON.stringify(this.changes)});return t.ok?yield t.json():{data:[],error:`HTTP error! status: ${t.status}`,status:t.status}}catch(t){return console.error("Error updating:",t),{data:[],status:500,error:"Failed to update."}}})}then(t,n){return Promise.resolve(this.execute()).then(t,n)}}var zk=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class Fa{constructor(t,n,r){this.fetch={chat_local:!1,keys:null,character_ids:[],user_ids:[],persona_ids:[]},r!=null&&(Array.isArray(r)?this.fetch.keys=r:this.fetch.keys=[r]),this.token=t,this.urlBase=n}forCharacter(t){return this.fetch.character_ids==null&&(this.fetch.character_ids=[]),this.fetch.character_ids.push(t),this}forCharacters(t=null){return this.fetch.character_ids!=null&&this.fetch.character_ids.length!=0?this.fetch.character_ids.push(...t):this.fetch.character_ids=t,this}forUser(t){return this.fetch.user_ids==null&&(this.fetch.user_ids=[]),this.fetch.user_ids.push(t),this}forUsers(t=null){return this.fetch.user_ids==null&&(this.fetch.user_ids=[]),this.fetch.user_ids.push(...t),this}forPersona(t){return this.fetch.persona_ids==null&&(this.fetch.persona_ids=[]),this.fetch.persona_ids.push(t),this}forPersonas(t=null){return this.fetch.persona_ids==null&&(this.fetch.persona_ids=[]),this.fetch.persona_ids.push(...t),this}execute(){return zk(this,void 0,void 0,function*(){try{const t=yield fetch(this.urlBase,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token},body:JSON.stringify(this.fetch)});return t.ok?yield t.json():{data:[],error:`HTTP error! status: ${t.status}`,status:t.status}}catch(t){return console.error("Error fetching:",t),{data:[],status:500,error:"Failed to fetch."}}})}then(t,n){return Promise.resolve(this.execute()).then(t,n)}}var Up=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class Ak{constructor(t,n=null){this.BASE_URL="https://gateway.chub.ai/api/storage/stage/",this.token=n,this.stageId=t,this.url=this.BASE_URL+String(this.stageId)}get(t){return new Fa(this.token,this.url+"/fetch",t)}set(t,n){return new Is(this.token,this.url,t,null,n,vn.UPSERT)}clear(t){return new Is(this.token,this.url,t,null,null,vn.DELETE)}update(t){return Up(this,void 0,void 0,function*(){const n=new Is(this.token,this.url,"irrelevant-key",null,null,vn.DELETE);return n.changes={changes:t},n.change=null,yield n})}query(t){return Up(this,void 0,void 0,function*(){const n=new Fa(this.token,this.url+"/fetch",null);return n.fetch=t,yield n})}}var Fp=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class Mk{constructor(t,n=null){this.BASE_URL="https://gateway.chub.ai/api/storage/stage/",this.token=n,this.stageId=t,this.url=this.BASE_URL+String(this.stageId)}get(t){return new Fa(this.token,this.url+"/fetch",t)}set(t,n){return new Is(this.token,this.url,t,null,n,vn.UPSERT)}clear(t){return new Is(this.token,this.url,t,null,null,vn.DELETE)}update(t){return Fp(this,void 0,void 0,function*(){const n=new Is(this.token,this.url,"irrelevant-key",null,null,vn.DELETE);return n.changes={changes:t},n.change=null,yield n})}query(t){return Fp(this,void 0,void 0,function*(){const n=new Fa(this.token,this.url+"/fetch",null);return n.fetch=t,yield n})}}var ge;(function(e){e.assertEqual=s=>{};function t(s){}e.assertIs=t;function n(s){throw new Error}e.assertNever=n,e.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},e.getValidEnumValues=s=>{const i=e.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return e.objectValues(o)},e.objectValues=s=>e.objectKeys(s).map(function(i){return s[i]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},e.find=(s,i)=>{for(const o of s)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ge||(ge={}));var Vp;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(Vp||(Vp={}));const q=ge.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),tr=e=>{switch(typeof e){case"undefined":return q.undefined;case"string":return q.string;case"number":return Number.isNaN(e)?q.nan:q.number;case"boolean":return q.boolean;case"function":return q.function;case"bigint":return q.bigint;case"symbol":return q.symbol;case"object":return Array.isArray(e)?q.array:e===null?q.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?q.promise:typeof Map<"u"&&e instanceof Map?q.map:typeof Set<"u"&&e instanceof Set?q.set:typeof Date<"u"&&e instanceof Date?q.date:q.object;default:return q.unknown}},j=ge.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class qn extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return s(this),r}static assert(t){if(!(t instanceof qn))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ge.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(t(s))}else r.push(t(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}qn.create=e=>new qn(e);const Cc=(e,t)=>{let n;switch(e.code){case j.invalid_type:e.received===q.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case j.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,ge.jsonStringifyReplacer)}`;break;case j.unrecognized_keys:n=`Unrecognized key(s) in object: ${ge.joinValues(e.keys,", ")}`;break;case j.invalid_union:n="Invalid input";break;case j.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ge.joinValues(e.options)}`;break;case j.invalid_enum_value:n=`Invalid enum value. Expected ${ge.joinValues(e.options)}, received '${e.received}'`;break;case j.invalid_arguments:n="Invalid function arguments";break;case j.invalid_return_type:n="Invalid function return type";break;case j.invalid_date:n="Invalid date";break;case j.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:ge.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case j.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case j.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case j.custom:n="Invalid input";break;case j.invalid_intersection_types:n="Intersection results could not be merged";break;case j.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case j.not_finite:n="Number must be finite";break;default:n=t.defaultError,ge.assertNever(e)}return{message:n}};let Dk=Cc;function Lk(){return Dk}const Zk=e=>{const{data:t,path:n,errorMaps:r,issueData:s}=e,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:t,defaultError:a}).message;return{...s,path:i,message:a}};function L(e,t){const n=Lk(),r=Zk({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Cc?void 0:Cc].filter(s=>!!s)});e.common.issues.push(r)}class Vt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const s of n){if(s.status==="aborted")return ie;s.status==="dirty"&&t.dirty(),r.push(s.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return Vt.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return ie;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const ie=Object.freeze({status:"aborted"}),yi=e=>({status:"dirty",value:e}),tn=e=>({status:"valid",value:e}),Hp=e=>e.status==="aborted",qp=e=>e.status==="dirty",Ds=e=>e.status==="valid",Va=e=>typeof Promise<"u"&&e instanceof Promise;var B;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(B||(B={}));class wr{constructor(t,n,r,s){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Bp=(e,t)=>{if(Ds(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new qn(e.common.issues);return this._error=n,this._error}}};function ce(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:s}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(o,a)=>{const{message:l}=e;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:s}}let me=class{get description(){return this._def.description}_getType(t){return tr(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:tr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Vt,ctx:{common:t.parent.common,data:t.data,parsedType:tr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Va(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:tr(t)},s=this._parseSync({data:t,path:r.path,parent:r});return Bp(r,s)}"~validate"(t){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:tr(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:n});return Ds(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(i=>Ds(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:tr(t)},s=this._parse({data:t,path:r.path,parent:r}),i=await(Va(s)?s:Promise.resolve(s));return Bp(r,i)}refine(t,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=t(s),a=()=>i.addIssue({code:j.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(t,n){return this._refinement((r,s)=>t(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(t){return new Zs({schema:this,typeName:A.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Dn.create(this,this._def)}nullable(){return Us.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ls.create(this)}promise(){return Wa.create(this,this._def)}or(t){return qa.create([this,t],this._def)}and(t){return Ba.create(this,t,this._def)}transform(t){return new Zs({...ce(this._def),schema:this,typeName:A.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Ac({...ce(this._def),innerType:this,defaultValue:n,typeName:A.ZodDefault})}brand(){return new uS({typeName:A.ZodBranded,type:this,...ce(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Mc({...ce(this._def),innerType:this,catchValue:n,typeName:A.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return of.create(this,t)}readonly(){return Dc.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};const Uk=/^c[^\s-]{8,}$/i,Fk=/^[0-9a-z]+$/,Vk=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Hk=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,qk=/^[a-z0-9_-]{21}$/i,Bk=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Wk=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Kk=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Gk="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Eu;const Qk=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Jk=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Yk=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Xk=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eS=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,tS=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,xv="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",nS=new RegExp(`^${xv}$`);function jv(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function rS(e){return new RegExp(`^${jv(e)}$`)}function sS(e){let t=`${xv}T${jv(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function iS(e,t){return!!((t==="v4"||!t)&&Qk.test(e)||(t==="v6"||!t)&&Yk.test(e))}function oS(e,t){if(!Bk.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&s.alg!==t)}catch{return!1}}function aS(e,t){return!!((t==="v4"||!t)&&Jk.test(e)||(t==="v6"||!t)&&Xk.test(e))}let Wp=class vi extends me{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==q.string){const i=this._getOrReturnCtx(t);return L(i,{code:j.invalid_type,expected:q.string,received:i.parsedType}),ie}const r=new Vt;let s;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(s=this._getOrReturnCtx(t,s),L(s,{code:j.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(s=this._getOrReturnCtx(t,s),L(s,{code:j.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,a=t.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(t,s),o?L(s,{code:j.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&L(s,{code:j.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Kk.test(t.data)||(s=this._getOrReturnCtx(t,s),L(s,{validation:"email",code:j.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Eu||(Eu=new RegExp(Gk,"u")),Eu.test(t.data)||(s=this._getOrReturnCtx(t,s),L(s,{validation:"emoji",code:j.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Hk.test(t.data)||(s=this._getOrReturnCtx(t,s),L(s,{validation:"uuid",code:j.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")qk.test(t.data)||(s=this._getOrReturnCtx(t,s),L(s,{validation:"nanoid",code:j.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Uk.test(t.data)||(s=this._getOrReturnCtx(t,s),L(s,{validation:"cuid",code:j.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Fk.test(t.data)||(s=this._getOrReturnCtx(t,s),L(s,{validation:"cuid2",code:j.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Vk.test(t.data)||(s=this._getOrReturnCtx(t,s),L(s,{validation:"ulid",code:j.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),L(s,{validation:"url",code:j.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),L(s,{validation:"regex",code:j.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(t,s),L(s,{code:j.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(s=this._getOrReturnCtx(t,s),L(s,{code:j.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(s=this._getOrReturnCtx(t,s),L(s,{code:j.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?sS(i).test(t.data)||(s=this._getOrReturnCtx(t,s),L(s,{code:j.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?nS.test(t.data)||(s=this._getOrReturnCtx(t,s),L(s,{code:j.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?rS(i).test(t.data)||(s=this._getOrReturnCtx(t,s),L(s,{code:j.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?Wk.test(t.data)||(s=this._getOrReturnCtx(t,s),L(s,{validation:"duration",code:j.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?iS(t.data,i.version)||(s=this._getOrReturnCtx(t,s),L(s,{validation:"ip",code:j.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?oS(t.data,i.alg)||(s=this._getOrReturnCtx(t,s),L(s,{validation:"jwt",code:j.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?aS(t.data,i.version)||(s=this._getOrReturnCtx(t,s),L(s,{validation:"cidr",code:j.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?eS.test(t.data)||(s=this._getOrReturnCtx(t,s),L(s,{validation:"base64",code:j.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?tS.test(t.data)||(s=this._getOrReturnCtx(t,s),L(s,{validation:"base64url",code:j.invalid_string,message:i.message}),r.dirty()):ge.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(s=>t.test(s),{validation:n,code:j.invalid_string,...B.errToObj(r)})}_addCheck(t){return new vi({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...B.errToObj(t)})}url(t){return this._addCheck({kind:"url",...B.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...B.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...B.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...B.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...B.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...B.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...B.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...B.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...B.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...B.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...B.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...B.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...B.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...B.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...B.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...B.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...B.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...B.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...B.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...B.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...B.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...B.errToObj(n)})}nonempty(t){return this.min(1,B.errToObj(t))}trim(){return new vi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new vi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new vi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}};Wp.create=e=>new Wp({checks:[],typeName:A.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...ce(e)});function lS(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(e.toFixed(s).replace(".","")),o=Number.parseInt(t.toFixed(s).replace(".",""));return i%o/10**s}let Kp=class xc extends me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==q.number){const i=this._getOrReturnCtx(t);return L(i,{code:j.invalid_type,expected:q.number,received:i.parsedType}),ie}let r;const s=new Vt;for(const i of this._def.checks)i.kind==="int"?ge.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),L(r,{code:j.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),L(r,{code:j.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),L(r,{code:j.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?lS(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),L(r,{code:j.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),L(r,{code:j.not_finite,message:i.message}),s.dirty()):ge.assertNever(i);return{status:s.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,B.toString(n))}gt(t,n){return this.setLimit("min",t,!1,B.toString(n))}lte(t,n){return this.setLimit("max",t,!0,B.toString(n))}lt(t,n){return this.setLimit("max",t,!1,B.toString(n))}setLimit(t,n,r,s){return new xc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:B.toString(s)}]})}_addCheck(t){return new xc({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:B.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:B.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:B.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:B.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:B.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:B.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:B.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:B.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:B.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ge.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}};Kp.create=e=>new Kp({checks:[],typeName:A.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...ce(e)});class to extends me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==q.bigint)return this._getInvalidInput(t);let r;const s=new Vt;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),L(r,{code:j.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),L(r,{code:j.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),L(r,{code:j.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ge.assertNever(i);return{status:s.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return L(n,{code:j.invalid_type,expected:q.bigint,received:n.parsedType}),ie}gte(t,n){return this.setLimit("min",t,!0,B.toString(n))}gt(t,n){return this.setLimit("min",t,!1,B.toString(n))}lte(t,n){return this.setLimit("max",t,!0,B.toString(n))}lt(t,n){return this.setLimit("max",t,!1,B.toString(n))}setLimit(t,n,r,s){return new to({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:B.toString(s)}]})}_addCheck(t){return new to({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:B.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:B.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:B.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:B.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:B.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}to.create=e=>new to({checks:[],typeName:A.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...ce(e)});let Gp=class extends me{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==q.boolean){const r=this._getOrReturnCtx(t);return L(r,{code:j.invalid_type,expected:q.boolean,received:r.parsedType}),ie}return tn(t.data)}};Gp.create=e=>new Gp({typeName:A.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...ce(e)});class Ha extends me{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==q.date){const i=this._getOrReturnCtx(t);return L(i,{code:j.invalid_type,expected:q.date,received:i.parsedType}),ie}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return L(i,{code:j.invalid_date}),ie}const r=new Vt;let s;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(s=this._getOrReturnCtx(t,s),L(s,{code:j.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(s=this._getOrReturnCtx(t,s),L(s,{code:j.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ge.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Ha({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:B.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:B.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Ha.create=e=>new Ha({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:A.ZodDate,...ce(e)});class Qp extends me{_parse(t){if(this._getType(t)!==q.symbol){const r=this._getOrReturnCtx(t);return L(r,{code:j.invalid_type,expected:q.symbol,received:r.parsedType}),ie}return tn(t.data)}}Qp.create=e=>new Qp({typeName:A.ZodSymbol,...ce(e)});class Jp extends me{_parse(t){if(this._getType(t)!==q.undefined){const r=this._getOrReturnCtx(t);return L(r,{code:j.invalid_type,expected:q.undefined,received:r.parsedType}),ie}return tn(t.data)}}Jp.create=e=>new Jp({typeName:A.ZodUndefined,...ce(e)});let Yp=class extends me{_parse(t){if(this._getType(t)!==q.null){const r=this._getOrReturnCtx(t);return L(r,{code:j.invalid_type,expected:q.null,received:r.parsedType}),ie}return tn(t.data)}};Yp.create=e=>new Yp({typeName:A.ZodNull,...ce(e)});class Xp extends me{constructor(){super(...arguments),this._any=!0}_parse(t){return tn(t.data)}}Xp.create=e=>new Xp({typeName:A.ZodAny,...ce(e)});let em=class extends me{constructor(){super(...arguments),this._unknown=!0}_parse(t){return tn(t.data)}};em.create=e=>new em({typeName:A.ZodUnknown,...ce(e)});let kr=class extends me{_parse(t){const n=this._getOrReturnCtx(t);return L(n,{code:j.invalid_type,expected:q.never,received:n.parsedType}),ie}};kr.create=e=>new kr({typeName:A.ZodNever,...ce(e)});class tm extends me{_parse(t){if(this._getType(t)!==q.undefined){const r=this._getOrReturnCtx(t);return L(r,{code:j.invalid_type,expected:q.void,received:r.parsedType}),ie}return tn(t.data)}}tm.create=e=>new tm({typeName:A.ZodVoid,...ce(e)});let Ls=class da extends me{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),s=this._def;if(n.parsedType!==q.array)return L(n,{code:j.invalid_type,expected:q.array,received:n.parsedType}),ie;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(L(n,{code:o?j.too_big:j.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(L(n,{code:j.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(L(n,{code:j.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new wr(n,o,n.path,a)))).then(o=>Vt.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new wr(n,o,n.path,a)));return Vt.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new da({...this._def,minLength:{value:t,message:B.toString(n)}})}max(t,n){return new da({...this._def,maxLength:{value:t,message:B.toString(n)}})}length(t,n){return new da({...this._def,exactLength:{value:t,message:B.toString(n)}})}nonempty(t){return this.min(1,t)}};Ls.create=(e,t)=>new Ls({type:e,minLength:null,maxLength:null,exactLength:null,typeName:A.ZodArray,...ce(t)});function is(e){if(e instanceof kn){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Dn.create(is(r))}return new kn({...e._def,shape:()=>t})}else return e instanceof Ls?new Ls({...e._def,type:is(e.element)}):e instanceof Dn?Dn.create(is(e.unwrap())):e instanceof Us?Us.create(is(e.unwrap())):e instanceof Qr?Qr.create(e.items.map(t=>is(t))):e}let kn=class un extends me{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=ge.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==q.object){const u=this._getOrReturnCtx(t);return L(u,{code:j.invalid_type,expected:q.object,received:u.parsedType}),ie}const{status:r,ctx:s}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof kr&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const c=i[u],f=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new wr(s,f,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof kr){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:s.data[c]}});else if(u==="strict")a.length>0&&(L(s,{code:j.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const f=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new wr(s,f,s.path,c)),alwaysSet:c in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const f=await c.key,m=await c.value;u.push({key:f,value:m,alwaysSet:c.alwaysSet})}return u}).then(u=>Vt.mergeObjectSync(r,u)):Vt.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return B.errToObj,new un({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:B.errToObj(t).message??s}:{message:s}}}:{}})}strip(){return new un({...this._def,unknownKeys:"strip"})}passthrough(){return new un({...this._def,unknownKeys:"passthrough"})}extend(t){return new un({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new un({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:A.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new un({...this._def,catchall:t})}pick(t){const n={};for(const r of ge.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new un({...this._def,shape:()=>n})}omit(t){const n={};for(const r of ge.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new un({...this._def,shape:()=>n})}deepPartial(){return is(this)}partial(t){const n={};for(const r of ge.objectKeys(this.shape)){const s=this.shape[r];t&&!t[r]?n[r]=s:n[r]=s.optional()}return new un({...this._def,shape:()=>n})}required(t){const n={};for(const r of ge.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Dn;)i=i._def.innerType;n[r]=i}return new un({...this._def,shape:()=>n})}keyof(){return zv(ge.objectKeys(this.shape))}};kn.create=(e,t)=>new kn({shape:()=>e,unknownKeys:"strip",catchall:kr.create(),typeName:A.ZodObject,...ce(t)});kn.strictCreate=(e,t)=>new kn({shape:()=>e,unknownKeys:"strict",catchall:kr.create(),typeName:A.ZodObject,...ce(t)});kn.lazycreate=(e,t)=>new kn({shape:e,unknownKeys:"strip",catchall:kr.create(),typeName:A.ZodObject,...ce(t)});let qa=class extends me{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new qn(a.ctx.common.issues));return L(n,{code:j.invalid_union,unionErrors:o}),ie}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!i&&(i={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new qn(l));return L(n,{code:j.invalid_union,unionErrors:a}),ie}}get options(){return this._def.options}};qa.create=(e,t)=>new qa({options:e,typeName:A.ZodUnion,...ce(t)});function jc(e,t){const n=tr(e),r=tr(t);if(e===t)return{valid:!0,data:e};if(n===q.object&&r===q.object){const s=ge.objectKeys(t),i=ge.objectKeys(e).filter(a=>s.indexOf(a)!==-1),o={...e,...t};for(const a of i){const l=jc(e[a],t[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===q.array&&r===q.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let i=0;i<e.length;i++){const o=e[i],a=t[i],l=jc(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===q.date&&r===q.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}let Ba=class extends me{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=(i,o)=>{if(Hp(i)||Hp(o))return ie;const a=jc(i.value,o.value);return a.valid?((qp(i)||qp(o))&&n.dirty(),{status:n.value,value:a.data}):(L(r,{code:j.invalid_intersection_types}),ie)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};Ba.create=(e,t,n)=>new Ba({left:e,right:t,typeName:A.ZodIntersection,...ce(n)});class Qr extends me{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==q.array)return L(r,{code:j.invalid_type,expected:q.array,received:r.parsedType}),ie;if(r.data.length<this._def.items.length)return L(r,{code:j.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ie;!this._def.rest&&r.data.length>this._def.items.length&&(L(r,{code:j.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new wr(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Vt.mergeArray(n,o)):Vt.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new Qr({...this._def,rest:t})}}Qr.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Qr({items:e,typeName:A.ZodTuple,rest:null,...ce(t)})};class nm extends me{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==q.map)return L(r,{code:j.invalid_type,expected:q.map,received:r.parsedType}),ie;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],u)=>({key:s._parse(new wr(r,a,r.path,[u,"key"])),value:i._parse(new wr(r,l,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return ie;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return ie;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}nm.create=(e,t,n)=>new nm({valueType:t,keyType:e,typeName:A.ZodMap,...ce(n)});class no extends me{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==q.set)return L(r,{code:j.invalid_type,expected:q.set,received:r.parsedType}),ie;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(L(r,{code:j.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(L(r,{code:j.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return ie;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((l,u)=>i._parse(new wr(r,l,r.path,u)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(t,n){return new no({...this._def,minSize:{value:t,message:B.toString(n)}})}max(t,n){return new no({...this._def,maxSize:{value:t,message:B.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}no.create=(e,t)=>new no({valueType:e,minSize:null,maxSize:null,typeName:A.ZodSet,...ce(t)});class rm extends me{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}rm.create=(e,t)=>new rm({getter:e,typeName:A.ZodLazy,...ce(t)});let sm=class extends me{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return L(n,{received:n.data,code:j.invalid_literal,expected:this._def.value}),ie}return{status:"valid",value:t.data}}get value(){return this._def.value}};sm.create=(e,t)=>new sm({value:e,typeName:A.ZodLiteral,...ce(t)});function zv(e,t){return new sf({values:e,typeName:A.ZodEnum,...ce(t)})}let sf=class zc extends me{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return L(n,{expected:ge.joinValues(r),received:n.parsedType,code:j.invalid_type}),ie}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return L(n,{received:n.data,code:j.invalid_enum_value,options:r}),ie}return tn(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return zc.create(t,{...this._def,...n})}exclude(t,n=this._def){return zc.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}};sf.create=zv;class im extends me{_parse(t){const n=ge.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==q.string&&r.parsedType!==q.number){const s=ge.objectValues(n);return L(r,{expected:ge.joinValues(s),received:r.parsedType,code:j.invalid_type}),ie}if(this._cache||(this._cache=new Set(ge.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const s=ge.objectValues(n);return L(r,{received:r.data,code:j.invalid_enum_value,options:s}),ie}return tn(t.data)}get enum(){return this._def.values}}im.create=(e,t)=>new im({values:e,typeName:A.ZodNativeEnum,...ce(t)});class Wa extends me{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==q.promise&&n.common.async===!1)return L(n,{code:j.invalid_type,expected:q.promise,received:n.parsedType}),ie;const r=n.parsedType===q.promise?n.data:Promise.resolve(n.data);return tn(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Wa.create=(e,t)=>new Wa({type:e,typeName:A.ZodPromise,...ce(t)});class Zs extends me{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===A.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=this._def.effect||null,i={addIssue:o=>{L(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return ie;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?ie:l.status==="dirty"||n.value==="dirty"?yi(l.value):l});{if(n.value==="aborted")return ie;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?ie:a.status==="dirty"||n.value==="dirty"?yi(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ie:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?ie:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ds(o))return ie;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Ds(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):ie);ge.assertNever(s)}}Zs.create=(e,t,n)=>new Zs({schema:e,typeName:A.ZodEffects,effect:t,...ce(n)});Zs.createWithPreprocess=(e,t,n)=>new Zs({schema:t,effect:{type:"preprocess",transform:e},typeName:A.ZodEffects,...ce(n)});let Dn=class extends me{_parse(t){return this._getType(t)===q.undefined?tn(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Dn.create=(e,t)=>new Dn({innerType:e,typeName:A.ZodOptional,...ce(t)});let Us=class extends me{_parse(t){return this._getType(t)===q.null?tn(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Us.create=(e,t)=>new Us({innerType:e,typeName:A.ZodNullable,...ce(t)});let Ac=class extends me{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===q.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};Ac.create=(e,t)=>new Ac({innerType:e,typeName:A.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...ce(t)});let Mc=class extends me{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Va(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new qn(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new qn(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};Mc.create=(e,t)=>new Mc({innerType:e,typeName:A.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...ce(t)});class om extends me{_parse(t){if(this._getType(t)!==q.nan){const r=this._getOrReturnCtx(t);return L(r,{code:j.invalid_type,expected:q.nan,received:r.parsedType}),ie}return{status:"valid",value:t.data}}}om.create=e=>new om({typeName:A.ZodNaN,...ce(e)});class uS extends me{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class of extends me{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ie:i.status==="dirty"?(n.dirty(),yi(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ie:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(t,n){return new of({in:t,out:n,typeName:A.ZodPipeline})}}let Dc=class extends me{_parse(t){const n=this._def.innerType._parse(t),r=s=>(Ds(s)&&(s.value=Object.freeze(s.value)),s);return Va(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}};Dc.create=(e,t)=>new Dc({innerType:e,typeName:A.ZodReadonly,...ce(t)});kn.lazycreate;var A;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(A||(A={}));kr.create;Ls.create;const cS=kn.create;kn.strictCreate;qa.create;Ba.create;Qr.create;sf.create;Wa.create;Dn.create;Us.create;function I(e,t,n){function r(a,l){var u;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(u=a._zod).traits??(u.traits=new Set),a._zod.traits.add(e),t(a,l);for(const c in o.prototype)c in a||Object.defineProperty(a,c,{value:o.prototype[c].bind(a)});a._zod.constr=o,a._zod.def=l}const s=(n==null?void 0:n.Parent)??Object;class i extends s{}Object.defineProperty(i,"name",{value:e});function o(a){var l;const u=n!=null&&n.Parent?new i:this;r(u,a),(l=u._zod).deferred??(l.deferred=[]);for(const c of u._zod.deferred)c();return u}return Object.defineProperty(o,"init",{value:r}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>{var l,u;return n!=null&&n.Parent&&a instanceof n.Parent?!0:(u=(l=a==null?void 0:a._zod)==null?void 0:l.traits)==null?void 0:u.has(e)}}),Object.defineProperty(o,"name",{value:e}),o}class ro extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Lc={};function Sr(e){return e&&Object.assign(Lc,e),Lc}function Av(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,s])=>t.indexOf(+r)===-1).map(([r,s])=>s)}function dS(e,t){return typeof t=="bigint"?t.toString():t}function af(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function lf(e){return e==null}function uf(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function fS(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(e.toFixed(s).replace(".","")),o=Number.parseInt(t.toFixed(s).replace(".",""));return i%o/10**s}function Pe(e,t,n){Object.defineProperty(e,t,{get(){{const r=n();return e[t]=r,r}},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function fo(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function li(e){return JSON.stringify(e)}const Mv=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function Ka(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const hS=af(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Ga(e){if(Ka(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(Ka(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}const pS=new Set(["string","number","symbol"]);function ho(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Pr(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(r._zod.parent=e),r}function W(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function mS(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const gS={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function yS(e,t){const n={},r=e._zod.def;for(const s in t){if(!(s in r.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(n[s]=r.shape[s])}return Pr(e,{...e._zod.def,shape:n,checks:[]})}function vS(e,t){const n={...e._zod.def.shape},r=e._zod.def;for(const s in t){if(!(s in r.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&delete n[s]}return Pr(e,{...e._zod.def,shape:n,checks:[]})}function _S(e,t){if(!Ga(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const r={...e._zod.def.shape,...t};return fo(this,"shape",r),r},checks:[]};return Pr(e,n)}function wS(e,t){return Pr(e,{...e._zod.def,get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return fo(this,"shape",n),n},catchall:t._zod.def.catchall,checks:[]})}function kS(e,t,n){const r=t._zod.def.shape,s={...r};if(n)for(const i in n){if(!(i in r))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(s[i]=e?new e({type:"optional",innerType:r[i]}):r[i])}else for(const i in r)s[i]=e?new e({type:"optional",innerType:r[i]}):r[i];return Pr(t,{...t._zod.def,shape:s,checks:[]})}function SS(e,t,n){const r=t._zod.def.shape,s={...r};if(n)for(const i in n){if(!(i in s))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(s[i]=new e({type:"nonoptional",innerType:r[i]}))}else for(const i in r)s[i]=new e({type:"nonoptional",innerType:r[i]});return Pr(t,{...t._zod.def,shape:s,checks:[]})}function Oi(e,t=0){var n;for(let r=t;r<e.issues.length;r++)if(((n=e.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function Zr(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function Vo(e){return typeof e=="string"?e:e==null?void 0:e.message}function $r(e,t,n){var s,i,o,a,l,u;const r={...e,path:e.path??[]};if(!e.message){const c=Vo((o=(i=(s=e.inst)==null?void 0:s._zod.def)==null?void 0:i.error)==null?void 0:o.call(i,e))??Vo((a=t==null?void 0:t.error)==null?void 0:a.call(t,e))??Vo((l=n.customError)==null?void 0:l.call(n,e))??Vo((u=n.localeError)==null?void 0:u.call(n,e))??"Invalid input";r.message=c}return delete r.inst,delete r.continue,t!=null&&t.reportInput||delete r.input,r}function cf(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function so(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const Dv=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,dS,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Lv=I("$ZodError",Dv),Tl=I("$ZodError",Dv,{Parent:Error});function $S(e,t=n=>n.message){const n={},r=[];for(const s of e.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(t(s))):r.push(t(s));return{formErrors:r,fieldErrors:n}}function ES(e,t){const n=t||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>s({issues:a}));else if(o.code==="invalid_key")s({issues:o.issues});else if(o.code==="invalid_element")s({issues:o.issues});else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return s(e),r}const Zv=e=>(t,n,r,s)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},o=t._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new ro;if(o.issues.length){const a=new((s==null?void 0:s.Err)??e)(o.issues.map(l=>$r(l,i,Sr())));throw Mv(a,s==null?void 0:s.callee),a}return o.value},TS=Zv(Tl),Uv=e=>async(t,n,r,s)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new((s==null?void 0:s.Err)??e)(o.issues.map(l=>$r(l,i,Sr())));throw Mv(a,s==null?void 0:s.callee),a}return o.value},bS=Uv(Tl),Fv=e=>(t,n,r)=>{const s=r?{...r,async:!1}:{async:!1},i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new ro;return i.issues.length?{success:!1,error:new(e??Lv)(i.issues.map(o=>$r(o,s,Sr())))}:{success:!0,data:i.value}},df=Fv(Tl),Vv=e=>async(t,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>$r(o,s,Sr())))}:{success:!0,data:i.value}},ff=Vv(Tl),PS=/^[cC][^\s-]{8,}$/,IS=/^[0-9a-z]+$/,RS=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,NS=/^[0-9a-vA-V]{20}$/,OS=/^[A-Za-z0-9]{27}$/,CS=/^[a-zA-Z0-9_-]{21}$/,xS=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,jS=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,am=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,zS=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,AS="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function MS(){return new RegExp(AS,"u")}const DS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,LS=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,ZS=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,US=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,FS=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Hv=/^[A-Za-z0-9_-]*$/,VS=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,HS=/^\+(?:[0-9]){6,14}[0-9]$/,qv="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",qS=new RegExp(`^${qv}$`);function Bv(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function BS(e){return new RegExp(`^${Bv(e)}$`)}function WS(e){const t=Bv({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${qv}T(?:${r})$`)}const KS=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},GS=/^\d+$/,QS=/^-?\d+(?:\.\d+)?/i,JS=/true|false/i,YS=/null/i,XS=/^[^A-Z]*$/,e$=/^[^a-z]*$/,zt=I("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),Wv={number:"number",bigint:"bigint",object:"date"},Kv=I("$ZodCheckLessThan",(e,t)=>{zt.init(e,t);const n=Wv[typeof t.value];e._zod.onattach.push(r=>{const s=r._zod.bag,i=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Gv=I("$ZodCheckGreaterThan",(e,t)=>{zt.init(e,t);const n=Wv[typeof t.value];e._zod.onattach.push(r=>{const s=r._zod.bag,i=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),t$=I("$ZodCheckMultipleOf",(e,t)=>{zt.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):fS(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),n$=I("$ZodCheckNumberFormat",(e,t)=>{var o;zt.init(e,t),t.format=t.format||"float64";const n=(o=t.format)==null?void 0:o.includes("int"),r=n?"int":"number",[s,i]=gS[t.format];e._zod.onattach.push(a=>{const l=a._zod.bag;l.format=t.format,l.minimum=s,l.maximum=i,n&&(l.pattern=GS)}),e._zod.check=a=>{const l=a.value;if(n){if(!Number.isInteger(l)){a.issues.push({expected:r,format:t.format,code:"invalid_type",input:l,inst:e});return}if(!Number.isSafeInteger(l)){l>0?a.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):a.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort});return}}l<s&&a.issues.push({origin:"number",input:l,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),l>i&&a.issues.push({origin:"number",input:l,code:"too_big",maximum:i,inst:e})}}),r$=I("$ZodCheckMaxLength",(e,t)=>{var n;zt.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!lf(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const s=r.value;if(s.length<=t.maximum)return;const o=cf(s);r.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),s$=I("$ZodCheckMinLength",(e,t)=>{var n;zt.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!lf(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const s=r.value;if(s.length>=t.minimum)return;const o=cf(s);r.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),i$=I("$ZodCheckLengthEquals",(e,t)=>{var n;zt.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!lf(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=r=>{const s=r.value,i=s.length;if(i===t.length)return;const o=cf(s),a=i>t.length;r.issues.push({origin:o,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),bl=I("$ZodCheckStringFormat",(e,t)=>{var n,r;zt.init(e,t),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),o$=I("$ZodCheckRegex",(e,t)=>{bl.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),a$=I("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=XS),bl.init(e,t)}),l$=I("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=e$),bl.init(e,t)}),u$=I("$ZodCheckIncludes",(e,t)=>{zt.init(e,t);const n=ho(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),c$=I("$ZodCheckStartsWith",(e,t)=>{zt.init(e,t);const n=new RegExp(`^${ho(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),d$=I("$ZodCheckEndsWith",(e,t)=>{zt.init(e,t);const n=new RegExp(`.*${ho(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),f$=I("$ZodCheckOverwrite",(e,t)=>{zt.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class h${constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(o=>o),s=Math.min(...r.map(o=>o.length-o.trimStart().length)),i=r.map(o=>o.slice(s)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const t=Function,n=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new t(...n,s.join(`
`))}}const p$={major:4,minor:0,patch:0},Ie=I("$ZodType",(e,t)=>{var s;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=p$;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const i of r)for(const o of i._zod.onattach)o(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),(s=e._zod.deferred)==null||s.push(()=>{e._zod.run=e._zod.parse});else{const i=(o,a,l)=>{let u=Oi(o),c;for(const f of a){if(f._zod.def.when){if(!f._zod.def.when(o))continue}else if(u)continue;const m=o.issues.length,v=f._zod.check(o);if(v instanceof Promise&&(l==null?void 0:l.async)===!1)throw new ro;if(c||v instanceof Promise)c=(c??Promise.resolve()).then(async()=>{await v,o.issues.length!==m&&(u||(u=Oi(o,m)))});else{if(o.issues.length===m)continue;u||(u=Oi(o,m))}}return c?c.then(()=>o):o};e._zod.run=(o,a)=>{const l=e._zod.parse(o,a);if(l instanceof Promise){if(a.async===!1)throw new ro;return l.then(u=>i(u,r,a))}return i(l,r,a)}}e["~standard"]={validate:i=>{var o;try{const a=df(e,i);return a.success?{value:a.data}:{issues:(o=a.error)==null?void 0:o.issues}}catch{return ff(e,i).then(l=>{var u;return l.success?{value:l.data}:{issues:(u=l.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}}),hf=I("$ZodString",(e,t)=>{var n;Ie.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??KS(e._zod.bag),e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),je=I("$ZodStringFormat",(e,t)=>{bl.init(e,t),hf.init(e,t)}),m$=I("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=jS),je.init(e,t)}),g$=I("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=am(r))}else t.pattern??(t.pattern=am());je.init(e,t)}),y$=I("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=zS),je.init(e,t)}),v$=I("$ZodURL",(e,t)=>{je.init(e,t),e._zod.check=n=>{try{const r=n.value,s=new URL(r),i=s.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:VS.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),!r.endsWith("/")&&i.endsWith("/")?n.value=i.slice(0,-1):n.value=i;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),_$=I("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=MS()),je.init(e,t)}),w$=I("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=CS),je.init(e,t)}),k$=I("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=PS),je.init(e,t)}),S$=I("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=IS),je.init(e,t)}),$$=I("$ZodULID",(e,t)=>{t.pattern??(t.pattern=RS),je.init(e,t)}),E$=I("$ZodXID",(e,t)=>{t.pattern??(t.pattern=NS),je.init(e,t)}),T$=I("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=OS),je.init(e,t)}),b$=I("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=WS(t)),je.init(e,t)}),P$=I("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=qS),je.init(e,t)}),I$=I("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=BS(t)),je.init(e,t)}),R$=I("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=xS),je.init(e,t)}),N$=I("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=DS),je.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv4"})}),O$=I("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=LS),je.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),C$=I("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=ZS),je.init(e,t)}),x$=I("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=US),je.init(e,t),e._zod.check=n=>{const[r,s]=n.value.split("/");try{if(!s)throw new Error;const i=Number(s);if(`${i}`!==s)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function Qv(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const j$=I("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=FS),je.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{Qv(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function z$(e){if(!Hv.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return Qv(n)}const A$=I("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Hv),je.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{z$(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),M$=I("$ZodE164",(e,t)=>{t.pattern??(t.pattern=HS),je.init(e,t)});function D$(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const L$=I("$ZodJWT",(e,t)=>{je.init(e,t),e._zod.check=n=>{D$(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),Jv=I("$ZodNumber",(e,t)=>{Ie.init(e,t),e._zod.pattern=e._zod.bag.pattern??QS,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const i=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...i?{received:i}:{}}),n}}),Z$=I("$ZodNumber",(e,t)=>{n$.init(e,t),Jv.init(e,t)}),U$=I("$ZodBoolean",(e,t)=>{Ie.init(e,t),e._zod.pattern=JS,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}const s=n.value;return typeof s=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),n}}),F$=I("$ZodNull",(e,t)=>{Ie.init(e,t),e._zod.pattern=YS,e._zod.values=new Set([null]),e._zod.parse=(n,r)=>{const s=n.value;return s===null||n.issues.push({expected:"null",code:"invalid_type",input:s,inst:e}),n}}),V$=I("$ZodUnknown",(e,t)=>{Ie.init(e,t),e._zod.parse=n=>n}),H$=I("$ZodNever",(e,t)=>{Ie.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function lm(e,t,n){e.issues.length&&t.issues.push(...Zr(n,e.issues)),t.value[n]=e.value}const q$=I("$ZodArray",(e,t)=>{Ie.init(e,t),e._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),n;n.value=Array(s.length);const i=[];for(let o=0;o<s.length;o++){const a=s[o],l=t.element._zod.run({value:a,issues:[]},r);l instanceof Promise?i.push(l.then(u=>lm(u,n,o))):lm(l,n,o)}return i.length?Promise.all(i).then(()=>n):n}});function Ho(e,t,n){e.issues.length&&t.issues.push(...Zr(n,e.issues)),t.value[n]=e.value}function um(e,t,n,r){e.issues.length?r[n]===void 0?n in r?t.value[n]=void 0:t.value[n]=e.value:t.issues.push(...Zr(n,e.issues)):e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}const Yv=I("$ZodObject",(e,t)=>{Ie.init(e,t);const n=af(()=>{const f=Object.keys(t.shape);for(const v of f)if(!(t.shape[v]instanceof Ie))throw new Error(`Invalid element at key "${v}": expected a Zod schema`);const m=mS(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(m)}});Pe(e._zod,"propValues",()=>{const f=t.shape,m={};for(const v in f){const g=f[v]._zod;if(g.values){m[v]??(m[v]=new Set);for(const _ of g.values)m[v].add(_)}}return m});const r=f=>{const m=new h$(["shape","payload","ctx"]),v=n.value,g=h=>{const p=li(h);return`shape[${p}]._zod.run({ value: input[${p}], issues: [] }, ctx)`};m.write("const input = payload.value;");const _=Object.create(null);let w=0;for(const h of v.keys)_[h]=`key_${w++}`;m.write("const newResult = {}");for(const h of v.keys)if(v.optionalKeys.has(h)){const p=_[h];m.write(`const ${p} = ${g(h)};`);const k=li(h);m.write(`
        if (${p}.issues.length) {
          if (input[${k}] === undefined) {
            if (${k} in input) {
              newResult[${k}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${p}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${k}, ...iss.path] : [${k}],
              }))
            );
          }
        } else if (${p}.value === undefined) {
          if (${k} in input) newResult[${k}] = undefined;
        } else {
          newResult[${k}] = ${p}.value;
        }
        `)}else{const p=_[h];m.write(`const ${p} = ${g(h)};`),m.write(`
          if (${p}.issues.length) payload.issues = payload.issues.concat(${p}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${li(h)}, ...iss.path] : [${li(h)}]
          })));`),m.write(`newResult[${li(h)}] = ${p}.value`)}m.write("payload.value = newResult;"),m.write("return payload;");const d=m.compile();return(h,p)=>d(f,h,p)};let s;const i=Ka,o=!Lc.jitless,l=o&&hS.value,u=t.catchall;let c;e._zod.parse=(f,m)=>{c??(c=n.value);const v=f.value;if(!i(v))return f.issues.push({expected:"object",code:"invalid_type",input:v,inst:e}),f;const g=[];if(o&&l&&(m==null?void 0:m.async)===!1&&m.jitless!==!0)s||(s=r(t.shape)),f=s(f,m);else{f.value={};const p=c.shape;for(const k of c.keys){const E=p[k],R=E._zod.run({value:v[k],issues:[]},m),N=E._zod.optin==="optional"&&E._zod.optout==="optional";R instanceof Promise?g.push(R.then(z=>N?um(z,f,k,v):Ho(z,f,k))):N?um(R,f,k,v):Ho(R,f,k)}}if(!u)return g.length?Promise.all(g).then(()=>f):f;const _=[],w=c.keySet,d=u._zod,h=d.def.type;for(const p of Object.keys(v)){if(w.has(p))continue;if(h==="never"){_.push(p);continue}const k=d.run({value:v[p],issues:[]},m);k instanceof Promise?g.push(k.then(E=>Ho(E,f,p))):Ho(k,f,p)}return _.length&&f.issues.push({code:"unrecognized_keys",keys:_,input:v,inst:e}),g.length?Promise.all(g).then(()=>f):f}});function cm(e,t,n,r){for(const s of e)if(s.issues.length===0)return t.value=s.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(s=>s.issues.map(i=>$r(i,r,Sr())))}),t}const Xv=I("$ZodUnion",(e,t)=>{Ie.init(e,t),Pe(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),Pe(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),Pe(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),Pe(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){const n=t.options.map(r=>r._zod.pattern);return new RegExp(`^(${n.map(r=>uf(r.source)).join("|")})$`)}}),e._zod.parse=(n,r)=>{let s=!1;const i=[];for(const o of t.options){const a=o._zod.run({value:n.value,issues:[]},r);if(a instanceof Promise)i.push(a),s=!0;else{if(a.issues.length===0)return a;i.push(a)}}return s?Promise.all(i).then(o=>cm(o,n,e,r)):cm(i,n,e,r)}}),B$=I("$ZodDiscriminatedUnion",(e,t)=>{Xv.init(e,t);const n=e._zod.parse;Pe(e._zod,"propValues",()=>{const s={};for(const i of t.options){const o=i._zod.propValues;if(!o||Object.keys(o).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(const[a,l]of Object.entries(o)){s[a]||(s[a]=new Set);for(const u of l)s[a].add(u)}}return s});const r=af(()=>{const s=t.options,i=new Map;for(const o of s){const a=o._zod.propValues[t.discriminator];if(!a||a.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(o)}"`);for(const l of a){if(i.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);i.set(l,o)}}return i});e._zod.parse=(s,i)=>{const o=s.value;if(!Ka(o))return s.issues.push({code:"invalid_type",expected:"object",input:o,inst:e}),s;const a=r.value.get(o==null?void 0:o[t.discriminator]);return a?a._zod.run(s,i):t.unionFallback?n(s,i):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:o,path:[t.discriminator],inst:e}),s)}}),W$=I("$ZodIntersection",(e,t)=>{Ie.init(e,t),e._zod.parse=(n,r)=>{const s=n.value,i=t.left._zod.run({value:s,issues:[]},r),o=t.right._zod.run({value:s,issues:[]},r);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([l,u])=>dm(n,l,u)):dm(n,i,o)}});function Zc(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Ga(e)&&Ga(t)){const n=Object.keys(t),r=Object.keys(e).filter(i=>n.indexOf(i)!==-1),s={...e,...t};for(const i of r){const o=Zc(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};s[i]=o.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const s=e[r],i=t[r],o=Zc(s,i);if(!o.valid)return{valid:!1,mergeErrorPath:[r,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function dm(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Oi(e))return e;const r=Zc(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const K$=I("$ZodRecord",(e,t)=>{Ie.init(e,t),e._zod.parse=(n,r)=>{const s=n.value;if(!Ga(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:e}),n;const i=[];if(t.keyType._zod.values){const o=t.keyType._zod.values;n.value={};for(const l of o)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){const u=t.valueType._zod.run({value:s[l],issues:[]},r);u instanceof Promise?i.push(u.then(c=>{c.issues.length&&n.issues.push(...Zr(l,c.issues)),n.value[l]=c.value})):(u.issues.length&&n.issues.push(...Zr(l,u.issues)),n.value[l]=u.value)}let a;for(const l in s)o.has(l)||(a=a??[],a.push(l));a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:e,keys:a})}else{n.value={};for(const o of Reflect.ownKeys(s)){if(o==="__proto__")continue;const a=t.keyType._zod.run({value:o,issues:[]},r);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){n.issues.push({origin:"record",code:"invalid_key",issues:a.issues.map(u=>$r(u,r,Sr())),input:o,path:[o],inst:e}),n.value[a.value]=a.value;continue}const l=t.valueType._zod.run({value:s[o],issues:[]},r);l instanceof Promise?i.push(l.then(u=>{u.issues.length&&n.issues.push(...Zr(o,u.issues)),n.value[a.value]=u.value})):(l.issues.length&&n.issues.push(...Zr(o,l.issues)),n.value[a.value]=l.value)}}return i.length?Promise.all(i).then(()=>n):n}}),G$=I("$ZodEnum",(e,t)=>{Ie.init(e,t);const n=Av(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(r=>pS.has(typeof r)).map(r=>typeof r=="string"?ho(r):r.toString()).join("|")})$`),e._zod.parse=(r,s)=>{const i=r.value;return e._zod.values.has(i)||r.issues.push({code:"invalid_value",values:n,input:i,inst:e}),r}}),Q$=I("$ZodLiteral",(e,t)=>{Ie.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(n=>typeof n=="string"?ho(n):n?n.toString():String(n)).join("|")})$`),e._zod.parse=(n,r)=>{const s=n.value;return e._zod.values.has(s)||n.issues.push({code:"invalid_value",values:t.values,input:s,inst:e}),n}}),J$=I("$ZodTransform",(e,t)=>{Ie.init(e,t),e._zod.parse=(n,r)=>{const s=t.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(o=>(n.value=o,n));if(s instanceof Promise)throw new ro;return n.value=s,n}}),Y$=I("$ZodOptional",(e,t)=>{Ie.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Pe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Pe(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${uf(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(n,r):n.value===void 0?n:t.innerType._zod.run(n,r)}),X$=I("$ZodNullable",(e,t)=>{Ie.init(e,t),Pe(e._zod,"optin",()=>t.innerType._zod.optin),Pe(e._zod,"optout",()=>t.innerType._zod.optout),Pe(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${uf(n.source)}|null)$`):void 0}),Pe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),eE=I("$ZodDefault",(e,t)=>{Ie.init(e,t),e._zod.optin="optional",Pe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>fm(i,t)):fm(s,t)}});function fm(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const tE=I("$ZodPrefault",(e,t)=>{Ie.init(e,t),e._zod.optin="optional",Pe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),nE=I("$ZodNonOptional",(e,t)=>{Ie.init(e,t),Pe(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>hm(i,e)):hm(s,e)}});function hm(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const rE=I("$ZodCatch",(e,t)=>{Ie.init(e,t),e._zod.optin="optional",Pe(e._zod,"optout",()=>t.innerType._zod.optout),Pe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(o=>$r(o,r,Sr()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(i=>$r(i,r,Sr()))},input:n.value}),n.issues=[]),n)}}),sE=I("$ZodPipe",(e,t)=>{Ie.init(e,t),Pe(e._zod,"values",()=>t.in._zod.values),Pe(e._zod,"optin",()=>t.in._zod.optin),Pe(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(n,r)=>{const s=t.in._zod.run(n,r);return s instanceof Promise?s.then(i=>pm(i,t,r)):pm(s,t,r)}});function pm(e,t,n){return Oi(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const iE=I("$ZodReadonly",(e,t)=>{Ie.init(e,t),Pe(e._zod,"propValues",()=>t.innerType._zod.propValues),Pe(e._zod,"values",()=>t.innerType._zod.values),Pe(e._zod,"optin",()=>t.innerType._zod.optin),Pe(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,r)=>{const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(mm):mm(s)}});function mm(e){return e.value=Object.freeze(e.value),e}const oE=I("$ZodCustom",(e,t)=>{zt.init(e,t),Ie.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,s=t.fn(r);if(s instanceof Promise)return s.then(i=>gm(i,n,r,e));gm(s,n,r,e)}});function gm(e,t,n,r){if(!e){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),t.issues.push(so(s))}}class e_{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};return delete r.id,{...r,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function aE(){return new e_}const _i=aE();function lE(e,t){return new e({type:"string",...W(t)})}function uE(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...W(t)})}function ym(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...W(t)})}function cE(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...W(t)})}function dE(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...W(t)})}function fE(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...W(t)})}function hE(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...W(t)})}function pE(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...W(t)})}function mE(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...W(t)})}function gE(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...W(t)})}function yE(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...W(t)})}function vE(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...W(t)})}function _E(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...W(t)})}function wE(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...W(t)})}function kE(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...W(t)})}function SE(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...W(t)})}function $E(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...W(t)})}function EE(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...W(t)})}function TE(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...W(t)})}function bE(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...W(t)})}function PE(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...W(t)})}function IE(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...W(t)})}function RE(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...W(t)})}function NE(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...W(t)})}function OE(e,t){return new e({type:"string",format:"date",check:"string_format",...W(t)})}function CE(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...W(t)})}function xE(e,t){return new e({type:"string",format:"duration",check:"string_format",...W(t)})}function jE(e,t){return new e({type:"number",checks:[],...W(t)})}function zE(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...W(t)})}function AE(e,t){return new e({type:"boolean",...W(t)})}function ME(e,t){return new e({type:"null",...W(t)})}function DE(e){return new e({type:"unknown"})}function LE(e,t){return new e({type:"never",...W(t)})}function vm(e,t){return new Kv({check:"less_than",...W(t),value:e,inclusive:!1})}function Tu(e,t){return new Kv({check:"less_than",...W(t),value:e,inclusive:!0})}function _m(e,t){return new Gv({check:"greater_than",...W(t),value:e,inclusive:!1})}function bu(e,t){return new Gv({check:"greater_than",...W(t),value:e,inclusive:!0})}function wm(e,t){return new t$({check:"multiple_of",...W(t),value:e})}function t_(e,t){return new r$({check:"max_length",...W(t),maximum:e})}function Qa(e,t){return new s$({check:"min_length",...W(t),minimum:e})}function n_(e,t){return new i$({check:"length_equals",...W(t),length:e})}function ZE(e,t){return new o$({check:"string_format",format:"regex",...W(t),pattern:e})}function UE(e){return new a$({check:"string_format",format:"lowercase",...W(e)})}function FE(e){return new l$({check:"string_format",format:"uppercase",...W(e)})}function VE(e,t){return new u$({check:"string_format",format:"includes",...W(t),includes:e})}function HE(e,t){return new c$({check:"string_format",format:"starts_with",...W(t),prefix:e})}function qE(e,t){return new d$({check:"string_format",format:"ends_with",...W(t),suffix:e})}function po(e){return new f$({check:"overwrite",tx:e})}function BE(e){return po(t=>t.normalize(e))}function WE(){return po(e=>e.trim())}function KE(){return po(e=>e.toLowerCase())}function GE(){return po(e=>e.toUpperCase())}function QE(e,t,n){return new e({type:"array",element:t,...W(n)})}function JE(e,t,n){const r=W(n);return r.abort??(r.abort=!0),new e({type:"custom",check:"custom",fn:t,...r})}function YE(e,t,n){return new e({type:"custom",check:"custom",fn:t,...W(n)})}class km{constructor(t){this.counter=0,this.metadataRegistry=(t==null?void 0:t.metadata)??_i,this.target=(t==null?void 0:t.target)??"draft-2020-12",this.unrepresentable=(t==null?void 0:t.unrepresentable)??"throw",this.override=(t==null?void 0:t.override)??(()=>{}),this.io=(t==null?void 0:t.io)??"output",this.seen=new Map}process(t,n={path:[],schemaPath:[]}){var f,m,v;var r;const s=t._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},o=this.seen.get(t);if(o)return o.count++,n.schemaPath.includes(t)&&(o.cycle=n.path),o.schema;const a={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(t,a);const l=(m=(f=t._zod).toJSONSchema)==null?void 0:m.call(f);if(l)a.schema=l;else{const g={...n,schemaPath:[...n.schemaPath,t],path:n.path},_=t._zod.parent;if(_)a.ref=_,this.process(_,g),this.seen.get(_).isParent=!0;else{const w=a.schema;switch(s.type){case"string":{const d=w;d.type="string";const{minimum:h,maximum:p,format:k,patterns:E,contentEncoding:R}=t._zod.bag;if(typeof h=="number"&&(d.minLength=h),typeof p=="number"&&(d.maxLength=p),k&&(d.format=i[k]??k,d.format===""&&delete d.format),R&&(d.contentEncoding=R),E&&E.size>0){const N=[...E];N.length===1?d.pattern=N[0].source:N.length>1&&(a.schema.allOf=[...N.map(z=>({...this.target==="draft-7"?{type:"string"}:{},pattern:z.source}))])}break}case"number":{const d=w,{minimum:h,maximum:p,format:k,multipleOf:E,exclusiveMaximum:R,exclusiveMinimum:N}=t._zod.bag;typeof k=="string"&&k.includes("int")?d.type="integer":d.type="number",typeof N=="number"&&(d.exclusiveMinimum=N),typeof h=="number"&&(d.minimum=h,typeof N=="number"&&(N>=h?delete d.minimum:delete d.exclusiveMinimum)),typeof R=="number"&&(d.exclusiveMaximum=R),typeof p=="number"&&(d.maximum=p,typeof R=="number"&&(R<=p?delete d.maximum:delete d.exclusiveMaximum)),typeof E=="number"&&(d.multipleOf=E);break}case"boolean":{const d=w;d.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{w.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{w.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const d=w,{minimum:h,maximum:p}=t._zod.bag;typeof h=="number"&&(d.minItems=h),typeof p=="number"&&(d.maxItems=p),d.type="array",d.items=this.process(s.element,{...g,path:[...g.path,"items"]});break}case"object":{const d=w;d.type="object",d.properties={};const h=s.shape;for(const E in h)d.properties[E]=this.process(h[E],{...g,path:[...g.path,"properties",E]});const p=new Set(Object.keys(h)),k=new Set([...p].filter(E=>{const R=s.shape[E]._zod;return this.io==="input"?R.optin===void 0:R.optout===void 0}));k.size>0&&(d.required=Array.from(k)),((v=s.catchall)==null?void 0:v._zod.def.type)==="never"?d.additionalProperties=!1:s.catchall?s.catchall&&(d.additionalProperties=this.process(s.catchall,{...g,path:[...g.path,"additionalProperties"]})):this.io==="output"&&(d.additionalProperties=!1);break}case"union":{const d=w;d.anyOf=s.options.map((h,p)=>this.process(h,{...g,path:[...g.path,"anyOf",p]}));break}case"intersection":{const d=w,h=this.process(s.left,{...g,path:[...g.path,"allOf",0]}),p=this.process(s.right,{...g,path:[...g.path,"allOf",1]}),k=R=>"allOf"in R&&Object.keys(R).length===1,E=[...k(h)?h.allOf:[h],...k(p)?p.allOf:[p]];d.allOf=E;break}case"tuple":{const d=w;d.type="array";const h=s.items.map((E,R)=>this.process(E,{...g,path:[...g.path,"prefixItems",R]}));if(this.target==="draft-2020-12"?d.prefixItems=h:d.items=h,s.rest){const E=this.process(s.rest,{...g,path:[...g.path,"items"]});this.target==="draft-2020-12"?d.items=E:d.additionalItems=E}s.rest&&(d.items=this.process(s.rest,{...g,path:[...g.path,"items"]}));const{minimum:p,maximum:k}=t._zod.bag;typeof p=="number"&&(d.minItems=p),typeof k=="number"&&(d.maxItems=k);break}case"record":{const d=w;d.type="object",d.propertyNames=this.process(s.keyType,{...g,path:[...g.path,"propertyNames"]}),d.additionalProperties=this.process(s.valueType,{...g,path:[...g.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const d=w,h=Av(s.entries);h.every(p=>typeof p=="number")&&(d.type="number"),h.every(p=>typeof p=="string")&&(d.type="string"),d.enum=h;break}case"literal":{const d=w,h=[];for(const p of s.values)if(p===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof p=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");h.push(Number(p))}else h.push(p);if(h.length!==0)if(h.length===1){const p=h[0];d.type=p===null?"null":typeof p,d.const=p}else h.every(p=>typeof p=="number")&&(d.type="number"),h.every(p=>typeof p=="string")&&(d.type="string"),h.every(p=>typeof p=="boolean")&&(d.type="string"),h.every(p=>p===null)&&(d.type="null"),d.enum=h;break}case"file":{const d=w,h={type:"string",format:"binary",contentEncoding:"binary"},{minimum:p,maximum:k,mime:E}=t._zod.bag;p!==void 0&&(h.minLength=p),k!==void 0&&(h.maxLength=k),E?E.length===1?(h.contentMediaType=E[0],Object.assign(d,h)):d.anyOf=E.map(R=>({...h,contentMediaType:R})):Object.assign(d,h);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const d=this.process(s.innerType,g);w.anyOf=[d,{type:"null"}];break}case"nonoptional":{this.process(s.innerType,g),a.ref=s.innerType;break}case"success":{const d=w;d.type="boolean";break}case"default":{this.process(s.innerType,g),a.ref=s.innerType,w.default=JSON.parse(JSON.stringify(s.defaultValue));break}case"prefault":{this.process(s.innerType,g),a.ref=s.innerType,this.io==="input"&&(w._prefault=JSON.parse(JSON.stringify(s.defaultValue)));break}case"catch":{this.process(s.innerType,g),a.ref=s.innerType;let d;try{d=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}w.default=d;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const d=w,h=t._zod.pattern;if(!h)throw new Error("Pattern not found in template literal");d.type="string",d.pattern=h.source;break}case"pipe":{const d=this.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;this.process(d,g),a.ref=d;break}case"readonly":{this.process(s.innerType,g),a.ref=s.innerType,w.readOnly=!0;break}case"promise":{this.process(s.innerType,g),a.ref=s.innerType;break}case"optional":{this.process(s.innerType,g),a.ref=s.innerType;break}case"lazy":{const d=t._zod.innerType;this.process(d,g),a.ref=d;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const u=this.metadataRegistry.get(t);return u&&Object.assign(a.schema,u),this.io==="input"&&Ke(t)&&(delete a.schema.examples,delete a.schema.default),this.io==="input"&&a.schema._prefault&&((r=a.schema).default??(r.default=a.schema._prefault)),delete a.schema._prefault,this.seen.get(t).schema}emit(t,n){var c,f,m,v,g,_;const r={cycles:(n==null?void 0:n.cycles)??"ref",reused:(n==null?void 0:n.reused)??"inline",external:(n==null?void 0:n.external)??void 0},s=this.seen.get(t);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=w=>{var E;const d=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const R=(E=r.external.registry.get(w[0]))==null?void 0:E.id,N=r.external.uri??(ne=>ne);if(R)return{ref:N(R)};const z=w[1].defId??w[1].schema.id??`schema${this.counter++}`;return w[1].defId=z,{defId:z,ref:`${N("__shared")}#/${d}/${z}`}}if(w[1]===s)return{ref:"#"};const p=`#/${d}/`,k=w[1].schema.id??`__schema${this.counter++}`;return{defId:k,ref:p+k}},o=w=>{if(w[1].schema.$ref)return;const d=w[1],{ref:h,defId:p}=i(w);d.def={...d.schema},p&&(d.defId=p);const k=d.schema;for(const E in k)delete k[E];k.$ref=h};if(r.cycles==="throw")for(const w of this.seen.entries()){const d=w[1];if(d.cycle)throw new Error(`Cycle detected: #/${(c=d.cycle)==null?void 0:c.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const w of this.seen.entries()){const d=w[1];if(t===w[0]){o(w);continue}if(r.external){const p=(f=r.external.registry.get(w[0]))==null?void 0:f.id;if(t!==w[0]&&p){o(w);continue}}if((m=this.metadataRegistry.get(w[0]))==null?void 0:m.id){o(w);continue}if(d.cycle){o(w);continue}if(d.count>1&&r.reused==="ref"){o(w);continue}}const a=(w,d)=>{const h=this.seen.get(w),p=h.def??h.schema,k={...p};if(h.ref===null)return;const E=h.ref;if(h.ref=null,E){a(E,d);const R=this.seen.get(E).schema;R.$ref&&d.target==="draft-7"?(p.allOf=p.allOf??[],p.allOf.push(R)):(Object.assign(p,R),Object.assign(p,k))}h.isParent||this.override({zodSchema:w,jsonSchema:p,path:h.path??[]})};for(const w of[...this.seen.entries()].reverse())a(w[0],{target:this.target});const l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),(v=r.external)!=null&&v.uri){const w=(g=r.external.registry.get(t))==null?void 0:g.id;if(!w)throw new Error("Schema is missing an `id` property");l.$id=r.external.uri(w)}Object.assign(l,s.def);const u=((_=r.external)==null?void 0:_.defs)??{};for(const w of this.seen.entries()){const d=w[1];d.def&&d.defId&&(u[d.defId]=d.def)}r.external||Object.keys(u).length>0&&(this.target==="draft-2020-12"?l.$defs=u:l.definitions=u);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}}function XE(e,t){if(e instanceof e_){const r=new km(t),s={};for(const a of e._idmap.entries()){const[l,u]=a;r.process(u)}const i={},o={registry:e,uri:t==null?void 0:t.uri,defs:s};for(const a of e._idmap.entries()){const[l,u]=a;i[l]=r.emit(u,{...t,external:o})}if(Object.keys(s).length>0){const a=r.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[a]:s}}return{schemas:i}}const n=new km(t);return n.process(e),n.emit(e,t)}function Ke(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const s=e._zod.def;switch(s.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return Ke(s.element,n);case"object":{for(const i in s.shape)if(Ke(s.shape[i],n))return!0;return!1}case"union":{for(const i of s.options)if(Ke(i,n))return!0;return!1}case"intersection":return Ke(s.left,n)||Ke(s.right,n);case"tuple":{for(const i of s.items)if(Ke(i,n))return!0;return!!(s.rest&&Ke(s.rest,n))}case"record":return Ke(s.keyType,n)||Ke(s.valueType,n);case"map":return Ke(s.keyType,n)||Ke(s.valueType,n);case"set":return Ke(s.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return Ke(s.innerType,n);case"lazy":return Ke(s.getter(),n);case"default":return Ke(s.innerType,n);case"prefault":return Ke(s.innerType,n);case"custom":return!1;case"transform":return!0;case"pipe":return Ke(s.in,n)||Ke(s.out,n);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${s.type}`)}const eT=I("ZodMiniType",(e,t)=>{if(!e._zod)throw new Error("Uninitialized schema in ZodMiniType.");Ie.init(e,t),e.def=t,e.parse=(n,r)=>TS(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>df(e,n,r),e.parseAsync=async(n,r)=>bS(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>ff(e,n,r),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(n,r)=>Pr(e,n,r),e.brand=()=>e,e.register=(n,r)=>(n.add(e,r),e)}),tT=I("ZodMiniObject",(e,t)=>{Yv.init(e,t),eT.init(e,t),Pe(e,"shape",()=>t.shape)});function Sm(e,t){const n={type:"object",get shape(){return fo(this,"shape",{...e}),this.shape},...W(t)};return new tT(n)}function Nn(e){return!!e._zod}function ks(e){const t=Object.values(e);if(t.length===0)return Sm({});const n=t.every(Nn),r=t.every(s=>!Nn(s));if(n)return Sm(e);if(r)return cS(e);throw new Error("Mixed Zod versions detected in object shape.")}function Ci(e,t){return Nn(e)?df(e,t):e.safeParse(t)}async function Pu(e,t){return Nn(e)?await ff(e,t):await e.safeParseAsync(t)}function mo(e){var n,r;if(!e)return;let t;if(Nn(e)?t=(r=(n=e._zod)==null?void 0:n.def)==null?void 0:r.shape:t=e.shape,!!t){if(typeof t=="function")try{return t()}catch{return}return t}}function ui(e){var t;if(e){if(typeof e=="object"){const n=e,r=e;if(!n._def&&!r._zod){const s=Object.values(e);if(s.length>0&&s.every(i=>typeof i=="object"&&i!==null&&(i._def!==void 0||i._zod!==void 0||typeof i.parse=="function")))return ks(e)}}if(Nn(e)){const r=(t=e._zod)==null?void 0:t.def;if(r&&(r.type==="object"||r.shape!==void 0))return e}else if(e.shape!==void 0)return e}}function Iu(e){if(e&&typeof e=="object"){if("message"in e&&typeof e.message=="string")return e.message;if("issues"in e&&Array.isArray(e.issues)&&e.issues.length>0){const t=e.issues[0];if(t&&typeof t=="object"&&"message"in t)return String(t.message)}try{return JSON.stringify(e)}catch{return String(e)}}return String(e)}function nT(e){return e.description}function rT(e){var n,r,s;if(Nn(e))return((r=(n=e._zod)==null?void 0:n.def)==null?void 0:r.type)==="optional";const t=e;return typeof e.isOptional=="function"?e.isOptional():((s=t._def)==null?void 0:s.typeName)==="ZodOptional"}function r_(e){var s;if(Nn(e)){const o=(s=e._zod)==null?void 0:s.def;if(o){if(o.value!==void 0)return o.value;if(Array.isArray(o.values)&&o.values.length>0)return o.values[0]}}const n=e._def;if(n){if(n.value!==void 0)return n.value;if(Array.isArray(n.values)&&n.values.length>0)return n.values[0]}const r=e.value;if(r!==void 0)return r}const sT=I("ZodISODateTime",(e,t)=>{b$.init(e,t),Ue.init(e,t)});function s_(e){return NE(sT,e)}const iT=I("ZodISODate",(e,t)=>{P$.init(e,t),Ue.init(e,t)});function oT(e){return OE(iT,e)}const aT=I("ZodISOTime",(e,t)=>{I$.init(e,t),Ue.init(e,t)});function lT(e){return CE(aT,e)}const uT=I("ZodISODuration",(e,t)=>{R$.init(e,t),Ue.init(e,t)});function cT(e){return xE(uT,e)}const dT=(e,t)=>{Lv.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>ES(e,n)},flatten:{value:n=>$S(e,n)},addIssue:{value:n=>e.issues.push(n)},addIssues:{value:n=>e.issues.push(...n)},isEmpty:{get(){return e.issues.length===0}}})},Pl=I("ZodError",dT,{Parent:Error}),fT=Zv(Pl),hT=Uv(Pl),pT=Fv(Pl),mT=Vv(Pl),Ze=I("ZodType",(e,t)=>(Ie.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(n,r)=>Pr(e,n,r),e.brand=()=>e,e.register=(n,r)=>(n.add(e,r),e),e.parse=(n,r)=>fT(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>pT(e,n,r),e.parseAsync=async(n,r)=>hT(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>mT(e,n,r),e.spa=e.safeParseAsync,e.refine=(n,r)=>e.check(ib(n,r)),e.superRefine=n=>e.check(ob(n)),e.overwrite=n=>e.check(po(n)),e.optional=()=>He(e),e.nullable=()=>Tm(e),e.nullish=()=>He(Tm(e)),e.nonoptional=n=>JT(e,n),e.array=()=>he(e),e.or=n=>Ce([e,n]),e.and=n=>pf(e,n),e.transform=n=>Fc(e,d_(n)),e.default=n=>KT(e,n),e.prefault=n=>QT(e,n),e.catch=n=>XT(e,n),e.pipe=n=>Fc(e,n),e.readonly=()=>nb(e),e.describe=n=>{const r=e.clone();return _i.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){var n;return(n=_i.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return _i.get(e);const r=e.clone();return _i.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),i_=I("_ZodString",(e,t)=>{hf.init(e,t),Ze.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(ZE(...r)),e.includes=(...r)=>e.check(VE(...r)),e.startsWith=(...r)=>e.check(HE(...r)),e.endsWith=(...r)=>e.check(qE(...r)),e.min=(...r)=>e.check(Qa(...r)),e.max=(...r)=>e.check(t_(...r)),e.length=(...r)=>e.check(n_(...r)),e.nonempty=(...r)=>e.check(Qa(1,...r)),e.lowercase=r=>e.check(UE(r)),e.uppercase=r=>e.check(FE(r)),e.trim=()=>e.check(WE()),e.normalize=(...r)=>e.check(BE(...r)),e.toLowerCase=()=>e.check(KE()),e.toUpperCase=()=>e.check(GE())}),gT=I("ZodString",(e,t)=>{hf.init(e,t),i_.init(e,t),e.email=n=>e.check(uE(yT,n)),e.url=n=>e.check(pE(vT,n)),e.jwt=n=>e.check(RE(xT,n)),e.emoji=n=>e.check(mE(_T,n)),e.guid=n=>e.check(ym($m,n)),e.uuid=n=>e.check(cE(qo,n)),e.uuidv4=n=>e.check(dE(qo,n)),e.uuidv6=n=>e.check(fE(qo,n)),e.uuidv7=n=>e.check(hE(qo,n)),e.nanoid=n=>e.check(gE(wT,n)),e.guid=n=>e.check(ym($m,n)),e.cuid=n=>e.check(yE(kT,n)),e.cuid2=n=>e.check(vE(ST,n)),e.ulid=n=>e.check(_E($T,n)),e.base64=n=>e.check(bE(NT,n)),e.base64url=n=>e.check(PE(OT,n)),e.xid=n=>e.check(wE(ET,n)),e.ksuid=n=>e.check(kE(TT,n)),e.ipv4=n=>e.check(SE(bT,n)),e.ipv6=n=>e.check($E(PT,n)),e.cidrv4=n=>e.check(EE(IT,n)),e.cidrv6=n=>e.check(TE(RT,n)),e.e164=n=>e.check(IE(CT,n)),e.datetime=n=>e.check(s_(n)),e.date=n=>e.check(oT(n)),e.time=n=>e.check(lT(n)),e.duration=n=>e.check(cT(n))});function b(e){return lE(gT,e)}const Ue=I("ZodStringFormat",(e,t)=>{je.init(e,t),i_.init(e,t)}),yT=I("ZodEmail",(e,t)=>{y$.init(e,t),Ue.init(e,t)}),$m=I("ZodGUID",(e,t)=>{m$.init(e,t),Ue.init(e,t)}),qo=I("ZodUUID",(e,t)=>{g$.init(e,t),Ue.init(e,t)}),vT=I("ZodURL",(e,t)=>{v$.init(e,t),Ue.init(e,t)}),_T=I("ZodEmoji",(e,t)=>{_$.init(e,t),Ue.init(e,t)}),wT=I("ZodNanoID",(e,t)=>{w$.init(e,t),Ue.init(e,t)}),kT=I("ZodCUID",(e,t)=>{k$.init(e,t),Ue.init(e,t)}),ST=I("ZodCUID2",(e,t)=>{S$.init(e,t),Ue.init(e,t)}),$T=I("ZodULID",(e,t)=>{$$.init(e,t),Ue.init(e,t)}),ET=I("ZodXID",(e,t)=>{E$.init(e,t),Ue.init(e,t)}),TT=I("ZodKSUID",(e,t)=>{T$.init(e,t),Ue.init(e,t)}),bT=I("ZodIPv4",(e,t)=>{N$.init(e,t),Ue.init(e,t)}),PT=I("ZodIPv6",(e,t)=>{O$.init(e,t),Ue.init(e,t)}),IT=I("ZodCIDRv4",(e,t)=>{C$.init(e,t),Ue.init(e,t)}),RT=I("ZodCIDRv6",(e,t)=>{x$.init(e,t),Ue.init(e,t)}),NT=I("ZodBase64",(e,t)=>{j$.init(e,t),Ue.init(e,t)}),OT=I("ZodBase64URL",(e,t)=>{A$.init(e,t),Ue.init(e,t)}),CT=I("ZodE164",(e,t)=>{M$.init(e,t),Ue.init(e,t)}),xT=I("ZodJWT",(e,t)=>{L$.init(e,t),Ue.init(e,t)}),o_=I("ZodNumber",(e,t)=>{Jv.init(e,t),Ze.init(e,t),e.gt=(r,s)=>e.check(_m(r,s)),e.gte=(r,s)=>e.check(bu(r,s)),e.min=(r,s)=>e.check(bu(r,s)),e.lt=(r,s)=>e.check(vm(r,s)),e.lte=(r,s)=>e.check(Tu(r,s)),e.max=(r,s)=>e.check(Tu(r,s)),e.int=r=>e.check(Em(r)),e.safe=r=>e.check(Em(r)),e.positive=r=>e.check(_m(0,r)),e.nonnegative=r=>e.check(bu(0,r)),e.negative=r=>e.check(vm(0,r)),e.nonpositive=r=>e.check(Tu(0,r)),e.multipleOf=(r,s)=>e.check(wm(r,s)),e.step=(r,s)=>e.check(wm(r,s)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Ee(e){return jE(o_,e)}const jT=I("ZodNumberFormat",(e,t)=>{Z$.init(e,t),o_.init(e,t)});function Em(e){return zE(jT,e)}const zT=I("ZodBoolean",(e,t)=>{U$.init(e,t),Ze.init(e,t)});function ot(e){return AE(zT,e)}const AT=I("ZodNull",(e,t)=>{F$.init(e,t),Ze.init(e,t)});function a_(e){return ME(AT,e)}const MT=I("ZodUnknown",(e,t)=>{V$.init(e,t),Ze.init(e,t)});function Me(){return DE(MT)}const DT=I("ZodNever",(e,t)=>{H$.init(e,t),Ze.init(e,t)});function LT(e){return LE(DT,e)}const ZT=I("ZodArray",(e,t)=>{q$.init(e,t),Ze.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(Qa(n,r)),e.nonempty=n=>e.check(Qa(1,n)),e.max=(n,r)=>e.check(t_(n,r)),e.length=(n,r)=>e.check(n_(n,r)),e.unwrap=()=>e.element});function he(e,t){return QE(ZT,e,t)}const l_=I("ZodObject",(e,t)=>{Yv.init(e,t),Ze.init(e,t),Pe(e,"shape",()=>t.shape),e.keyof=()=>Bt(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Me()}),e.loose=()=>e.clone({...e._zod.def,catchall:Me()}),e.strict=()=>e.clone({...e._zod.def,catchall:LT()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>_S(e,n),e.merge=n=>wS(e,n),e.pick=n=>yS(e,n),e.omit=n=>vS(e,n),e.partial=(...n)=>kS(f_,e,n[0]),e.required=(...n)=>SS(h_,e,n[0])});function U(e,t){const n={type:"object",get shape(){return fo(this,"shape",{...e}),this.shape},...W(t)};return new l_(n)}function Nt(e,t){return new l_({type:"object",get shape(){return fo(this,"shape",{...e}),this.shape},catchall:Me(),...W(t)})}const u_=I("ZodUnion",(e,t)=>{Xv.init(e,t),Ze.init(e,t),e.options=t.options});function Ce(e,t){return new u_({type:"union",options:e,...W(t)})}const UT=I("ZodDiscriminatedUnion",(e,t)=>{u_.init(e,t),B$.init(e,t)});function c_(e,t,n){return new UT({type:"union",options:t,discriminator:e,...W(n)})}const FT=I("ZodIntersection",(e,t)=>{W$.init(e,t),Ze.init(e,t)});function pf(e,t){return new FT({type:"intersection",left:e,right:t})}const VT=I("ZodRecord",(e,t)=>{K$.init(e,t),Ze.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function De(e,t,n){return new VT({type:"record",keyType:e,valueType:t,...W(n)})}const Uc=I("ZodEnum",(e,t)=>{G$.init(e,t),Ze.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,s)=>{const i={};for(const o of r)if(n.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new Uc({...t,checks:[],...W(s),entries:i})},e.exclude=(r,s)=>{const i={...t.entries};for(const o of r)if(n.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new Uc({...t,checks:[],...W(s),entries:i})}});function Bt(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new Uc({type:"enum",entries:n,...W(t)})}const HT=I("ZodLiteral",(e,t)=>{Q$.init(e,t),Ze.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function G(e,t){return new HT({type:"literal",values:Array.isArray(e)?e:[e],...W(t)})}const qT=I("ZodTransform",(e,t)=>{J$.init(e,t),Ze.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=i=>{if(typeof i=="string")n.issues.push(so(i,n.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=e),o.continue??(o.continue=!0),n.issues.push(so(o))}};const s=t.transform(n.value,n);return s instanceof Promise?s.then(i=>(n.value=i,n)):(n.value=s,n)}});function d_(e){return new qT({type:"transform",transform:e})}const f_=I("ZodOptional",(e,t)=>{Y$.init(e,t),Ze.init(e,t),e.unwrap=()=>e._zod.def.innerType});function He(e){return new f_({type:"optional",innerType:e})}const BT=I("ZodNullable",(e,t)=>{X$.init(e,t),Ze.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Tm(e){return new BT({type:"nullable",innerType:e})}const WT=I("ZodDefault",(e,t)=>{eE.init(e,t),Ze.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function KT(e,t){return new WT({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const GT=I("ZodPrefault",(e,t)=>{tE.init(e,t),Ze.init(e,t),e.unwrap=()=>e._zod.def.innerType});function QT(e,t){return new GT({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const h_=I("ZodNonOptional",(e,t)=>{nE.init(e,t),Ze.init(e,t),e.unwrap=()=>e._zod.def.innerType});function JT(e,t){return new h_({type:"nonoptional",innerType:e,...W(t)})}const YT=I("ZodCatch",(e,t)=>{rE.init(e,t),Ze.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function XT(e,t){return new YT({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const eb=I("ZodPipe",(e,t)=>{sE.init(e,t),Ze.init(e,t),e.in=t.in,e.out=t.out});function Fc(e,t){return new eb({type:"pipe",in:e,out:t})}const tb=I("ZodReadonly",(e,t)=>{iE.init(e,t),Ze.init(e,t)});function nb(e){return new tb({type:"readonly",innerType:e})}const p_=I("ZodCustom",(e,t)=>{oE.init(e,t),Ze.init(e,t)});function rb(e){const t=new zt({check:"custom"});return t._zod.check=e,t}function sb(e,t){return JE(p_,e??(()=>!0),t)}function ib(e,t={}){return YE(p_,e,t)}function ob(e){const t=rb(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(so(r,n.value,t._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),n.issues.push(so(s))}},e(n.value,n)));return t}function m_(e,t){return Fc(d_(e),t)}const g_="2025-11-25",ab=[g_,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],Cr="io.modelcontextprotocol/related-task",Il="2.0",at=sb(e=>e!==null&&(typeof e=="object"||typeof e=="function")),y_=Ce([b(),Ee().int()]),v_=b();Nt({ttl:Ce([Ee(),a_()]).optional(),pollInterval:Ee().optional()});const lb=U({ttl:Ee().optional()}),ub=U({taskId:b()}),mf=Nt({progressToken:y_.optional(),[Cr]:ub.optional()}),Wt=U({_meta:mf.optional()}),go=Wt.extend({task:lb.optional()}),cb=e=>go.safeParse(e).success,ct=U({method:b(),params:Wt.loose().optional()}),nn=U({_meta:mf.optional()}),rn=U({method:b(),params:nn.loose().optional()}),dt=Nt({_meta:mf.optional()}),Rl=Ce([b(),Ee().int()]),__=U({jsonrpc:G(Il),id:Rl,...ct.shape}).strict(),bm=e=>__.safeParse(e).success,w_=U({jsonrpc:G(Il),...rn.shape}).strict(),db=e=>w_.safeParse(e).success,gf=U({jsonrpc:G(Il),id:Rl,result:dt}).strict(),Bo=e=>gf.safeParse(e).success;var te;(function(e){e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.UrlElicitationRequired=-32042]="UrlElicitationRequired"})(te||(te={}));const yf=U({jsonrpc:G(Il),id:Rl.optional(),error:U({code:Ee().int(),message:b(),data:Me().optional()})}).strict(),fb=e=>yf.safeParse(e).success,hb=Ce([__,w_,gf,yf]);Ce([gf,yf]);const vf=dt.strict(),pb=nn.extend({requestId:Rl.optional(),reason:b().optional()}),_f=rn.extend({method:G("notifications/cancelled"),params:pb}),mb=U({src:b(),mimeType:b().optional(),sizes:he(b()).optional(),theme:Bt(["light","dark"]).optional()}),yo=U({icons:he(mb).optional()}),Fs=U({name:b(),title:b().optional()}),k_=Fs.extend({...Fs.shape,...yo.shape,version:b(),websiteUrl:b().optional(),description:b().optional()}),gb=pf(U({applyDefaults:ot().optional()}),De(b(),Me())),yb=m_(e=>e&&typeof e=="object"&&!Array.isArray(e)&&Object.keys(e).length===0?{form:{}}:e,pf(U({form:gb.optional(),url:at.optional()}),De(b(),Me()).optional())),vb=Nt({list:at.optional(),cancel:at.optional(),requests:Nt({sampling:Nt({createMessage:at.optional()}).optional(),elicitation:Nt({create:at.optional()}).optional()}).optional()}),_b=Nt({list:at.optional(),cancel:at.optional(),requests:Nt({tools:Nt({call:at.optional()}).optional()}).optional()}),wb=U({experimental:De(b(),at).optional(),sampling:U({context:at.optional(),tools:at.optional()}).optional(),elicitation:yb.optional(),roots:U({listChanged:ot().optional()}).optional(),tasks:vb.optional()}),kb=Wt.extend({protocolVersion:b(),capabilities:wb,clientInfo:k_}),S_=ct.extend({method:G("initialize"),params:kb}),Sb=U({experimental:De(b(),at).optional(),logging:at.optional(),completions:at.optional(),prompts:U({listChanged:ot().optional()}).optional(),resources:U({subscribe:ot().optional(),listChanged:ot().optional()}).optional(),tools:U({listChanged:ot().optional()}).optional(),tasks:_b.optional()}),$b=dt.extend({protocolVersion:b(),capabilities:Sb,serverInfo:k_,instructions:b().optional()}),$_=rn.extend({method:G("notifications/initialized"),params:nn.optional()}),wf=ct.extend({method:G("ping"),params:Wt.optional()}),Eb=U({progress:Ee(),total:He(Ee()),message:He(b())}),Tb=U({...nn.shape,...Eb.shape,progressToken:y_}),kf=rn.extend({method:G("notifications/progress"),params:Tb}),bb=Wt.extend({cursor:v_.optional()}),vo=ct.extend({params:bb.optional()}),_o=dt.extend({nextCursor:v_.optional()}),Pb=Bt(["working","input_required","completed","failed","cancelled"]),wo=U({taskId:b(),status:Pb,ttl:Ce([Ee(),a_()]),createdAt:b(),lastUpdatedAt:b(),pollInterval:He(Ee()),statusMessage:He(b())}),Nl=dt.extend({task:wo}),Ib=nn.merge(wo),Ja=rn.extend({method:G("notifications/tasks/status"),params:Ib}),Sf=ct.extend({method:G("tasks/get"),params:Wt.extend({taskId:b()})}),$f=dt.merge(wo),Ef=ct.extend({method:G("tasks/result"),params:Wt.extend({taskId:b()})});dt.loose();const Tf=vo.extend({method:G("tasks/list")}),bf=_o.extend({tasks:he(wo)}),Pf=ct.extend({method:G("tasks/cancel"),params:Wt.extend({taskId:b()})}),Rb=dt.merge(wo),E_=U({uri:b(),mimeType:He(b()),_meta:De(b(),Me()).optional()}),T_=E_.extend({text:b()}),If=b().refine(e=>{try{return atob(e),!0}catch{return!1}},{message:"Invalid Base64 string"}),b_=E_.extend({blob:If}),ko=Bt(["user","assistant"]),Ks=U({audience:he(ko).optional(),priority:Ee().min(0).max(1).optional(),lastModified:s_({offset:!0}).optional()}),P_=U({...Fs.shape,...yo.shape,uri:b(),description:He(b()),mimeType:He(b()),annotations:Ks.optional(),_meta:He(Nt({}))}),Nb=U({...Fs.shape,...yo.shape,uriTemplate:b(),description:He(b()),mimeType:He(b()),annotations:Ks.optional(),_meta:He(Nt({}))}),Vc=vo.extend({method:G("resources/list")}),Ob=_o.extend({resources:he(P_)}),Hc=vo.extend({method:G("resources/templates/list")}),Cb=_o.extend({resourceTemplates:he(Nb)}),Rf=Wt.extend({uri:b()}),xb=Rf,qc=ct.extend({method:G("resources/read"),params:xb}),jb=dt.extend({contents:he(Ce([T_,b_]))}),zb=rn.extend({method:G("notifications/resources/list_changed"),params:nn.optional()}),Ab=Rf,Mb=ct.extend({method:G("resources/subscribe"),params:Ab}),Db=Rf,Lb=ct.extend({method:G("resources/unsubscribe"),params:Db}),Zb=nn.extend({uri:b()}),Ub=rn.extend({method:G("notifications/resources/updated"),params:Zb}),Fb=U({name:b(),description:He(b()),required:He(ot())}),Vb=U({...Fs.shape,...yo.shape,description:He(b()),arguments:He(he(Fb)),_meta:He(Nt({}))}),Bc=vo.extend({method:G("prompts/list")}),Hb=_o.extend({prompts:he(Vb)}),qb=Wt.extend({name:b(),arguments:De(b(),b()).optional()}),Wc=ct.extend({method:G("prompts/get"),params:qb}),Nf=U({type:G("text"),text:b(),annotations:Ks.optional(),_meta:De(b(),Me()).optional()}),Of=U({type:G("image"),data:If,mimeType:b(),annotations:Ks.optional(),_meta:De(b(),Me()).optional()}),Cf=U({type:G("audio"),data:If,mimeType:b(),annotations:Ks.optional(),_meta:De(b(),Me()).optional()}),Bb=U({type:G("tool_use"),name:b(),id:b(),input:De(b(),Me()),_meta:De(b(),Me()).optional()}),Wb=U({type:G("resource"),resource:Ce([T_,b_]),annotations:Ks.optional(),_meta:De(b(),Me()).optional()}),Kb=P_.extend({type:G("resource_link")}),xf=Ce([Nf,Of,Cf,Kb,Wb]),Gb=U({role:ko,content:xf}),Qb=dt.extend({description:b().optional(),messages:he(Gb)}),Jb=rn.extend({method:G("notifications/prompts/list_changed"),params:nn.optional()}),Yb=U({title:b().optional(),readOnlyHint:ot().optional(),destructiveHint:ot().optional(),idempotentHint:ot().optional(),openWorldHint:ot().optional()}),Xb=U({taskSupport:Bt(["required","optional","forbidden"]).optional()}),I_=U({...Fs.shape,...yo.shape,description:b().optional(),inputSchema:U({type:G("object"),properties:De(b(),at).optional(),required:he(b()).optional()}).catchall(Me()),outputSchema:U({type:G("object"),properties:De(b(),at).optional(),required:he(b()).optional()}).catchall(Me()).optional(),annotations:Yb.optional(),execution:Xb.optional(),_meta:De(b(),Me()).optional()}),Kc=vo.extend({method:G("tools/list")}),eP=_o.extend({tools:he(I_)}),jf=dt.extend({content:he(xf).default([]),structuredContent:De(b(),Me()).optional(),isError:ot().optional()});jf.or(dt.extend({toolResult:Me()}));const tP=go.extend({name:b(),arguments:De(b(),Me()).optional()}),Ya=ct.extend({method:G("tools/call"),params:tP}),nP=rn.extend({method:G("notifications/tools/list_changed"),params:nn.optional()});U({autoRefresh:ot().default(!0),debounceMs:Ee().int().nonnegative().default(300)});const Xa=Bt(["debug","info","notice","warning","error","critical","alert","emergency"]),rP=Wt.extend({level:Xa}),R_=ct.extend({method:G("logging/setLevel"),params:rP}),sP=nn.extend({level:Xa,logger:b().optional(),data:Me()}),iP=rn.extend({method:G("notifications/message"),params:sP}),oP=U({name:b().optional()}),aP=U({hints:he(oP).optional(),costPriority:Ee().min(0).max(1).optional(),speedPriority:Ee().min(0).max(1).optional(),intelligencePriority:Ee().min(0).max(1).optional()}),lP=U({mode:Bt(["auto","required","none"]).optional()}),uP=U({type:G("tool_result"),toolUseId:b().describe("The unique identifier for the corresponding tool call."),content:he(xf).default([]),structuredContent:U({}).loose().optional(),isError:ot().optional(),_meta:De(b(),Me()).optional()}),cP=c_("type",[Nf,Of,Cf]),el=c_("type",[Nf,Of,Cf,Bb,uP]),dP=U({role:ko,content:Ce([el,he(el)]),_meta:De(b(),Me()).optional()}),fP=go.extend({messages:he(dP),modelPreferences:aP.optional(),systemPrompt:b().optional(),includeContext:Bt(["none","thisServer","allServers"]).optional(),temperature:Ee().optional(),maxTokens:Ee().int(),stopSequences:he(b()).optional(),metadata:at.optional(),tools:he(I_).optional(),toolChoice:lP.optional()}),hP=ct.extend({method:G("sampling/createMessage"),params:fP}),N_=dt.extend({model:b(),stopReason:He(Bt(["endTurn","stopSequence","maxTokens"]).or(b())),role:ko,content:cP}),O_=dt.extend({model:b(),stopReason:He(Bt(["endTurn","stopSequence","maxTokens","toolUse"]).or(b())),role:ko,content:Ce([el,he(el)])}),pP=U({type:G("boolean"),title:b().optional(),description:b().optional(),default:ot().optional()}),mP=U({type:G("string"),title:b().optional(),description:b().optional(),minLength:Ee().optional(),maxLength:Ee().optional(),format:Bt(["email","uri","date","date-time"]).optional(),default:b().optional()}),gP=U({type:Bt(["number","integer"]),title:b().optional(),description:b().optional(),minimum:Ee().optional(),maximum:Ee().optional(),default:Ee().optional()}),yP=U({type:G("string"),title:b().optional(),description:b().optional(),enum:he(b()),default:b().optional()}),vP=U({type:G("string"),title:b().optional(),description:b().optional(),oneOf:he(U({const:b(),title:b()})),default:b().optional()}),_P=U({type:G("string"),title:b().optional(),description:b().optional(),enum:he(b()),enumNames:he(b()).optional(),default:b().optional()}),wP=Ce([yP,vP]),kP=U({type:G("array"),title:b().optional(),description:b().optional(),minItems:Ee().optional(),maxItems:Ee().optional(),items:U({type:G("string"),enum:he(b())}),default:he(b()).optional()}),SP=U({type:G("array"),title:b().optional(),description:b().optional(),minItems:Ee().optional(),maxItems:Ee().optional(),items:U({anyOf:he(U({const:b(),title:b()}))}),default:he(b()).optional()}),$P=Ce([kP,SP]),EP=Ce([_P,wP,$P]),TP=Ce([EP,pP,mP,gP]),bP=go.extend({mode:G("form").optional(),message:b(),requestedSchema:U({type:G("object"),properties:De(b(),TP),required:he(b()).optional()})}),PP=go.extend({mode:G("url"),message:b(),elicitationId:b(),url:b().url()}),IP=Ce([bP,PP]),RP=ct.extend({method:G("elicitation/create"),params:IP}),NP=nn.extend({elicitationId:b()}),OP=rn.extend({method:G("notifications/elicitation/complete"),params:NP}),Gc=dt.extend({action:Bt(["accept","decline","cancel"]),content:m_(e=>e===null?void 0:e,De(b(),Ce([b(),Ee(),ot(),he(b())])).optional())}),CP=U({type:G("ref/resource"),uri:b()}),xP=U({type:G("ref/prompt"),name:b()}),jP=Wt.extend({ref:Ce([xP,CP]),argument:U({name:b(),value:b()}),context:U({arguments:De(b(),b()).optional()}).optional()}),Qc=ct.extend({method:G("completion/complete"),params:jP});function zP(e){if(e.params.ref.type!=="ref/prompt")throw new TypeError(`Expected CompleteRequestPrompt, but got ${e.params.ref.type}`)}function AP(e){if(e.params.ref.type!=="ref/resource")throw new TypeError(`Expected CompleteRequestResourceTemplate, but got ${e.params.ref.type}`)}const MP=dt.extend({completion:Nt({values:he(b()).max(100),total:He(Ee().int()),hasMore:He(ot())})}),DP=U({uri:b().startsWith("file://"),name:b().optional(),_meta:De(b(),Me()).optional()}),LP=ct.extend({method:G("roots/list"),params:Wt.optional()}),C_=dt.extend({roots:he(DP)}),ZP=rn.extend({method:G("notifications/roots/list_changed"),params:nn.optional()});Ce([wf,S_,Qc,R_,Wc,Bc,Vc,Hc,qc,Mb,Lb,Ya,Kc,Sf,Ef,Tf,Pf]);Ce([_f,kf,$_,ZP,Ja]);Ce([vf,N_,O_,Gc,C_,$f,bf,Nl]);Ce([wf,hP,RP,LP,Sf,Ef,Tf,Pf]);Ce([_f,kf,iP,Ub,zb,nP,Jb,Ja,OP]);Ce([vf,$b,MP,Qb,Hb,Ob,Cb,jb,jf,eP,$f,bf,Nl]);class Q extends Error{constructor(t,n,r){super(`MCP error ${t}: ${n}`),this.code=t,this.data=r,this.name="McpError"}static fromError(t,n,r){if(t===te.UrlElicitationRequired&&r){const s=r;if(s.elicitations)return new UP(s.elicitations,n)}return new Q(t,n,r)}}class UP extends Q{constructor(t,n=`URL elicitation${t.length>1?"s":""} required`){super(te.UrlElicitationRequired,n,{elicitations:t})}get elicitations(){var t;return((t=this.data)==null?void 0:t.elicitations)??[]}}function Ir(e){return e==="completed"||e==="failed"||e==="cancelled"}const FP=Symbol("Let zodToJsonSchema decide on which parser to use"),Pm={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},VP=e=>typeof e=="string"?{...Pm,name:e}:{...Pm,...e},HP=e=>{const t=VP(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,s])=>[s._def,{def:s._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function x_(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function Se(e,t,n,r,s){e[t]=n,x_(e,t,r,s)}const j_=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")};function jt(e){if(e.target!=="openAi")return{};const t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:e.$refStrategy==="relative"?j_(t,e.currentPath):t.join("/")}}function qP(e,t){var r,s,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(s=e.type)==null?void 0:s._def)==null?void 0:i.typeName)!==A.ZodAny&&(n.items=ve(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&Se(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&Se(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(Se(n,"minItems",e.exactLength.value,e.exactLength.message,t),Se(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function BP(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?Se(n,"minimum",r.value,r.message,t):Se(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),Se(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?Se(n,"maximum",r.value,r.message,t):Se(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),Se(n,"maximum",r.value,r.message,t));break;case"multipleOf":Se(n,"multipleOf",r.value,r.message,t);break}return n}function WP(){return{type:"boolean"}}function z_(e,t){return ve(e.type._def,t)}const KP=(e,t)=>ve(e.innerType._def,t);function A_(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,i)=>A_(e,t,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return GP(e,t)}}const GP=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":Se(n,"minimum",r.value,r.message,t);break;case"max":Se(n,"maximum",r.value,r.message,t);break}return n};function QP(e,t){return{...ve(e.innerType._def,t),default:e.defaultValue()}}function JP(e,t){return t.effectStrategy==="input"?ve(e.schema._def,t):jt(t)}function YP(e){return{type:"string",enum:Array.from(e.values)}}const XP=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function eI(e,t){const n=[ve(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),ve(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return n.forEach(i=>{if(XP(i))s.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:a,...l}=i;o=l}else r=void 0;s.push(o)}}),s.length?{allOf:s,...r}:void 0}function tI(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let Ru;const on={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Ru===void 0&&(Ru=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ru),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function M_(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":Se(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":Se(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":an(n,"email",r.message,t);break;case"format:idn-email":an(n,"idn-email",r.message,t);break;case"pattern:zod":vt(n,on.email,r.message,t);break}break;case"url":an(n,"uri",r.message,t);break;case"uuid":an(n,"uuid",r.message,t);break;case"regex":vt(n,r.regex,r.message,t);break;case"cuid":vt(n,on.cuid,r.message,t);break;case"cuid2":vt(n,on.cuid2,r.message,t);break;case"startsWith":vt(n,RegExp(`^${Nu(r.value,t)}`),r.message,t);break;case"endsWith":vt(n,RegExp(`${Nu(r.value,t)}$`),r.message,t);break;case"datetime":an(n,"date-time",r.message,t);break;case"date":an(n,"date",r.message,t);break;case"time":an(n,"time",r.message,t);break;case"duration":an(n,"duration",r.message,t);break;case"length":Se(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),Se(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{vt(n,RegExp(Nu(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&an(n,"ipv4",r.message,t),r.version!=="v4"&&an(n,"ipv6",r.message,t);break}case"base64url":vt(n,on.base64url,r.message,t);break;case"jwt":vt(n,on.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&vt(n,on.ipv4Cidr,r.message,t),r.version!=="v4"&&vt(n,on.ipv6Cidr,r.message,t);break}case"emoji":vt(n,on.emoji(),r.message,t);break;case"ulid":{vt(n,on.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{an(n,"binary",r.message,t);break}case"contentEncoding:base64":{Se(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{vt(n,on.base64,r.message,t);break}}break}case"nanoid":vt(n,on.nanoid,r.message,t)}return n}function Nu(e,t){return t.patternStrategy==="escape"?rI(e):e}const nI=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function rI(e){let t="";for(let n=0;n<e.length;n++)nI.has(e[n])||(t+="\\"),t+=e[n];return t}function an(e,t,n,r){var s;e.format||(s=e.anyOf)!=null&&s.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Se(e,"format",t,n,r)}function vt(e,t,n,r){var s;e.pattern||(s=e.allOf)!=null&&s.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:Im(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Se(e,"pattern",Im(t,r),n,r)}function Im(e,t){var l;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let s="",i=!1,o=!1,a=!1;for(let u=0;u<r.length;u++){if(i){s+=r[u],i=!1;continue}if(n.i){if(o){if(r[u].match(/[a-z]/)){a?(s+=r[u],s+=`${r[u-2]}-${r[u]}`.toUpperCase(),a=!1):r[u+1]==="-"&&((l=r[u+2])!=null&&l.match(/[a-z]/))?(s+=r[u],a=!0):s+=`${r[u]}${r[u].toUpperCase()}`;continue}}else if(r[u].match(/[a-z]/)){s+=`[${r[u]}${r[u].toUpperCase()}]`;continue}}if(n.m){if(r[u]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(r[u]==="$"){s+=`($|(?=[\r
]))`;continue}}if(n.s&&r[u]==="."){s+=o?`${r[u]}\r
`:`[${r[u]}\r
]`;continue}s+=r[u],r[u]==="\\"?i=!0:o&&r[u]==="]"?o=!1:!o&&r[u]==="["&&(o=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function D_(e,t){var r,s,i,o,a,l;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===A.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((u,c)=>({...u,[c]:ve(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",c]})??jt(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:ve(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((s=e.keyType)==null?void 0:s._def.typeName)===A.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:u,...c}=M_(e.keyType._def,t);return{...n,propertyNames:c}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===A.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((a=e.keyType)==null?void 0:a._def.typeName)===A.ZodBranded&&e.keyType._def.type._def.typeName===A.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){const{type:u,...c}=z_(e.keyType._def,t);return{...n,propertyNames:c}}}return n}function sI(e,t){if(t.mapStrategy==="record")return D_(e,t);const n=ve(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||jt(t),r=ve(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||jt(t);return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function iI(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),s=Array.from(new Set(r.map(i=>typeof i)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function oI(e){return e.target==="openAi"?void 0:{not:jt({...e,currentPath:[...e.currentPath,"not"]})}}function aI(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const tl={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function lI(e,t){if(t.target==="openApi3")return Rm(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in tl&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((s,i)=>{const o=tl[i._def.typeName];return o&&!s.includes(o)?[...s,o]:s},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((s,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...s,o];case"bigint":return[...s,"integer"];case"object":if(i._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===n.length){const s=r.filter((i,o,a)=>a.indexOf(i)===o);return{type:s.length>1?s:s[0],enum:n.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,s)=>[...r,...s._def.values.filter(i=>!r.includes(i))],[])};return Rm(e,t)}const Rm=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,s)=>ve(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function uI(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:tl[e.innerType._def.typeName],nullable:!0}:{type:[tl[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=ve(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=ve(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function cI(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",x_(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?Se(n,"minimum",r.value,r.message,t):Se(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),Se(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?Se(n,"maximum",r.value,r.message,t):Se(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),Se(n,"maximum",r.value,r.message,t));break;case"multipleOf":Se(n,"multipleOf",r.value,r.message,t);break}return n}function dI(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},s=[],i=e.shape();for(const a in i){let l=i[a];if(l===void 0||l._def===void 0)continue;let u=hI(l);u&&n&&(l._def.typeName==="ZodOptional"&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),u=!1);const c=ve(l._def,{...t,currentPath:[...t.currentPath,"properties",a],propertyPath:[...t.currentPath,"properties",a]});c!==void 0&&(r.properties[a]=c,u||s.push(a))}s.length&&(r.required=s);const o=fI(e,t);return o!==void 0&&(r.additionalProperties=o),r}function fI(e,t){if(e.catchall._def.typeName!=="ZodNever")return ve(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function hI(e){try{return e.isOptional()}catch{return!0}}const pI=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return ve(e.innerType._def,t);const n=ve(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:jt(t)},n]}:jt(t)},mI=(e,t)=>{if(t.pipeStrategy==="input")return ve(e.in._def,t);if(t.pipeStrategy==="output")return ve(e.out._def,t);const n=ve(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=ve(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(s=>s!==void 0)}};function gI(e,t){return ve(e.type._def,t)}function yI(e,t){const r={type:"array",uniqueItems:!0,items:ve(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&Se(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&Se(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function vI(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>ve(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:ve(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>ve(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function _I(e){return{not:jt(e)}}function wI(e){return jt(e)}const kI=(e,t)=>ve(e.innerType._def,t),SI=(e,t,n)=>{switch(t){case A.ZodString:return M_(e,n);case A.ZodNumber:return cI(e,n);case A.ZodObject:return dI(e,n);case A.ZodBigInt:return BP(e,n);case A.ZodBoolean:return WP();case A.ZodDate:return A_(e,n);case A.ZodUndefined:return _I(n);case A.ZodNull:return aI(n);case A.ZodArray:return qP(e,n);case A.ZodUnion:case A.ZodDiscriminatedUnion:return lI(e,n);case A.ZodIntersection:return eI(e,n);case A.ZodTuple:return vI(e,n);case A.ZodRecord:return D_(e,n);case A.ZodLiteral:return tI(e,n);case A.ZodEnum:return YP(e);case A.ZodNativeEnum:return iI(e);case A.ZodNullable:return uI(e,n);case A.ZodOptional:return pI(e,n);case A.ZodMap:return sI(e,n);case A.ZodSet:return yI(e,n);case A.ZodLazy:return()=>e.getter()._def;case A.ZodPromise:return gI(e,n);case A.ZodNaN:case A.ZodNever:return oI(n);case A.ZodEffects:return JP(e,n);case A.ZodAny:return jt(n);case A.ZodUnknown:return wI(n);case A.ZodDefault:return QP(e,n);case A.ZodBranded:return z_(e,n);case A.ZodReadonly:return kI(e,n);case A.ZodCatch:return KP(e,n);case A.ZodPipeline:return mI(e,n);case A.ZodFunction:case A.ZodVoid:case A.ZodSymbol:return;default:return(r=>{})()}};function ve(e,t,n=!1){var a;const r=t.seen.get(e);if(t.override){const l=(a=t.override)==null?void 0:a.call(t,e,t,r,n);if(l!==FP)return l}if(r&&!n){const l=$I(r,t);if(l!==void 0)return l}const s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);const i=SI(e,e.typeName,t),o=typeof i=="function"?ve(i(),t):i;if(o&&EI(e,t,o),t.postProcess){const l=t.postProcess(o,e,t);return s.jsonSchema=o,l}return s.jsonSchema=o,o}const $I=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:j_(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),jt(t)):t.$refStrategy==="seen"?jt(t):void 0}},EI=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),TI=(e,t)=>{const n=HP(t);let r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[u,c])=>({...l,[u]:ve(c._def,{...n,currentPath:[...n.basePath,n.definitionPath,u]},!0)??jt(n)}),{}):void 0;const s=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=ve(e._def,s===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,s]},!1)??jt(n),o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o),n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));const a=s===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,s].join("/"),[n.definitionPath]:{...r,[s]:i}};return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};function bI(e){return!e||e==="jsonSchema7"||e==="draft-7"?"draft-7":e==="jsonSchema2019-09"||e==="draft-2020-12"?"draft-2020-12":"draft-7"}function Nm(e,t){return Nn(e)?XE(e,{target:bI(t==null?void 0:t.target),io:(t==null?void 0:t.pipeStrategy)??"input"}):TI(e,{strictUnions:(t==null?void 0:t.strictUnions)??!0,pipeStrategy:(t==null?void 0:t.pipeStrategy)??"input"})}function Om(e){const t=mo(e),n=t==null?void 0:t.method;if(!n)throw new Error("Schema is missing a method literal");const r=r_(n);if(typeof r!="string")throw new Error("Schema method literal must be a string");return r}function Cm(e,t){const n=Ci(e,t);if(!n.success)throw n.error;return n.data}const PI=6e4;class II{constructor(t){this._options=t,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(_f,n=>{this._oncancel(n)}),this.setNotificationHandler(kf,n=>{this._onprogress(n)}),this.setRequestHandler(wf,n=>({})),this._taskStore=t==null?void 0:t.taskStore,this._taskMessageQueue=t==null?void 0:t.taskMessageQueue,this._taskStore&&(this.setRequestHandler(Sf,async(n,r)=>{const s=await this._taskStore.getTask(n.params.taskId,r.sessionId);if(!s)throw new Q(te.InvalidParams,"Failed to retrieve task: Task not found");return{...s}}),this.setRequestHandler(Ef,async(n,r)=>{const s=async()=>{var a;const i=n.params.taskId;if(this._taskMessageQueue){let l;for(;l=await this._taskMessageQueue.dequeue(i,r.sessionId);){if(l.type==="response"||l.type==="error"){const u=l.message,c=u.id,f=this._requestResolvers.get(c);if(f)if(this._requestResolvers.delete(c),l.type==="response")f(u);else{const m=u,v=new Q(m.error.code,m.error.message,m.error.data);f(v)}else{const m=l.type==="response"?"Response":"Error";this._onerror(new Error(`${m} handler missing for request ${c}`))}continue}await((a=this._transport)==null?void 0:a.send(l.message,{relatedRequestId:r.requestId}))}}const o=await this._taskStore.getTask(i,r.sessionId);if(!o)throw new Q(te.InvalidParams,`Task not found: ${i}`);if(!Ir(o.status))return await this._waitForTaskUpdate(i,r.signal),await s();if(Ir(o.status)){const l=await this._taskStore.getTaskResult(i,r.sessionId);return this._clearTaskQueue(i),{...l,_meta:{...l._meta,[Cr]:{taskId:i}}}}return await s()};return await s()}),this.setRequestHandler(Tf,async(n,r)=>{var s;try{const{tasks:i,nextCursor:o}=await this._taskStore.listTasks((s=n.params)==null?void 0:s.cursor,r.sessionId);return{tasks:i,nextCursor:o,_meta:{}}}catch(i){throw new Q(te.InvalidParams,`Failed to list tasks: ${i instanceof Error?i.message:String(i)}`)}}),this.setRequestHandler(Pf,async(n,r)=>{try{const s=await this._taskStore.getTask(n.params.taskId,r.sessionId);if(!s)throw new Q(te.InvalidParams,`Task not found: ${n.params.taskId}`);if(Ir(s.status))throw new Q(te.InvalidParams,`Cannot cancel task in terminal status: ${s.status}`);await this._taskStore.updateTaskStatus(n.params.taskId,"cancelled","Client cancelled task execution.",r.sessionId),this._clearTaskQueue(n.params.taskId);const i=await this._taskStore.getTask(n.params.taskId,r.sessionId);if(!i)throw new Q(te.InvalidParams,`Task not found after cancellation: ${n.params.taskId}`);return{_meta:{},...i}}catch(s){throw s instanceof Q?s:new Q(te.InvalidRequest,`Failed to cancel task: ${s instanceof Error?s.message:String(s)}`)}}))}async _oncancel(t){if(!t.params.requestId)return;const n=this._requestHandlerAbortControllers.get(t.params.requestId);n==null||n.abort(t.params.reason)}_setupTimeout(t,n,r,s,i=!1){this._timeoutInfo.set(t,{timeoutId:setTimeout(s,n),startTime:Date.now(),timeout:n,maxTotalTimeout:r,resetTimeoutOnProgress:i,onTimeout:s})}_resetTimeout(t){const n=this._timeoutInfo.get(t);if(!n)return!1;const r=Date.now()-n.startTime;if(n.maxTotalTimeout&&r>=n.maxTotalTimeout)throw this._timeoutInfo.delete(t),Q.fromError(te.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:n.maxTotalTimeout,totalElapsed:r});return clearTimeout(n.timeoutId),n.timeoutId=setTimeout(n.onTimeout,n.timeout),!0}_cleanupTimeout(t){const n=this._timeoutInfo.get(t);n&&(clearTimeout(n.timeoutId),this._timeoutInfo.delete(t))}async connect(t){var i,o,a;this._transport=t;const n=(i=this.transport)==null?void 0:i.onclose;this._transport.onclose=()=>{n==null||n(),this._onclose()};const r=(o=this.transport)==null?void 0:o.onerror;this._transport.onerror=l=>{r==null||r(l),this._onerror(l)};const s=(a=this._transport)==null?void 0:a.onmessage;this._transport.onmessage=(l,u)=>{s==null||s(l,u),Bo(l)||fb(l)?this._onresponse(l):bm(l)?this._onrequest(l,u):db(l)?this._onnotification(l):this._onerror(new Error(`Unknown message type: ${JSON.stringify(l)}`))},await this._transport.start()}_onclose(){var r;const t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();const n=Q.fromError(te.ConnectionClosed,"Connection closed");this._transport=void 0,(r=this.onclose)==null||r.call(this);for(const s of t.values())s(n)}_onerror(t){var n;(n=this.onerror)==null||n.call(this,t)}_onnotification(t){const n=this._notificationHandlers.get(t.method)??this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(t)).catch(r=>this._onerror(new Error(`Uncaught error in notification handler: ${r}`)))}_onrequest(t,n){var c,f,m,v;const r=this._requestHandlers.get(t.method)??this.fallbackRequestHandler,s=this._transport,i=(m=(f=(c=t.params)==null?void 0:c._meta)==null?void 0:f[Cr])==null?void 0:m.taskId;if(r===void 0){const g={jsonrpc:"2.0",id:t.id,error:{code:te.MethodNotFound,message:"Method not found"}};i&&this._taskMessageQueue?this._enqueueTaskMessage(i,{type:"error",message:g,timestamp:Date.now()},s==null?void 0:s.sessionId).catch(_=>this._onerror(new Error(`Failed to enqueue error response: ${_}`))):s==null||s.send(g).catch(_=>this._onerror(new Error(`Failed to send an error response: ${_}`)));return}const o=new AbortController;this._requestHandlerAbortControllers.set(t.id,o);const a=cb(t.params)?t.params.task:void 0,l=this._taskStore?this.requestTaskStore(t,s==null?void 0:s.sessionId):void 0,u={signal:o.signal,sessionId:s==null?void 0:s.sessionId,_meta:(v=t.params)==null?void 0:v._meta,sendNotification:async g=>{const _={relatedRequestId:t.id};i&&(_.relatedTask={taskId:i}),await this.notification(g,_)},sendRequest:async(g,_,w)=>{var p;const d={...w,relatedRequestId:t.id};i&&!d.relatedTask&&(d.relatedTask={taskId:i});const h=((p=d.relatedTask)==null?void 0:p.taskId)??i;return h&&l&&await l.updateTaskStatus(h,"input_required"),await this.request(g,_,d)},authInfo:n==null?void 0:n.authInfo,requestId:t.id,requestInfo:n==null?void 0:n.requestInfo,taskId:i,taskStore:l,taskRequestedTtl:a==null?void 0:a.ttl,closeSSEStream:n==null?void 0:n.closeSSEStream,closeStandaloneSSEStream:n==null?void 0:n.closeStandaloneSSEStream};Promise.resolve().then(()=>{a&&this.assertTaskHandlerCapability(t.method)}).then(()=>r(t,u)).then(async g=>{if(o.signal.aborted)return;const _={result:g,jsonrpc:"2.0",id:t.id};i&&this._taskMessageQueue?await this._enqueueTaskMessage(i,{type:"response",message:_,timestamp:Date.now()},s==null?void 0:s.sessionId):await(s==null?void 0:s.send(_))},async g=>{if(o.signal.aborted)return;const _={jsonrpc:"2.0",id:t.id,error:{code:Number.isSafeInteger(g.code)?g.code:te.InternalError,message:g.message??"Internal error",...g.data!==void 0&&{data:g.data}}};i&&this._taskMessageQueue?await this._enqueueTaskMessage(i,{type:"error",message:_,timestamp:Date.now()},s==null?void 0:s.sessionId):await(s==null?void 0:s.send(_))}).catch(g=>this._onerror(new Error(`Failed to send response: ${g}`))).finally(()=>{this._requestHandlerAbortControllers.delete(t.id)})}_onprogress(t){const{progressToken:n,...r}=t.params,s=Number(n),i=this._progressHandlers.get(s);if(!i){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(t)}`));return}const o=this._responseHandlers.get(s),a=this._timeoutInfo.get(s);if(a&&o&&a.resetTimeoutOnProgress)try{this._resetTimeout(s)}catch(l){this._responseHandlers.delete(s),this._progressHandlers.delete(s),this._cleanupTimeout(s),o(l);return}i(r)}_onresponse(t){const n=Number(t.id),r=this._requestResolvers.get(n);if(r){if(this._requestResolvers.delete(n),Bo(t))r(t);else{const o=new Q(t.error.code,t.error.message,t.error.data);r(o)}return}const s=this._responseHandlers.get(n);if(s===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(t)}`));return}this._responseHandlers.delete(n),this._cleanupTimeout(n);let i=!1;if(Bo(t)&&t.result&&typeof t.result=="object"){const o=t.result;if(o.task&&typeof o.task=="object"){const a=o.task;typeof a.taskId=="string"&&(i=!0,this._taskProgressTokens.set(a.taskId,n))}}if(i||this._progressHandlers.delete(n),Bo(t))s(t);else{const o=Q.fromError(t.error.code,t.error.message,t.error.data);s(o)}}get transport(){return this._transport}async close(){var t;await((t=this._transport)==null?void 0:t.close())}async*requestStream(t,n,r){var o,a;const{task:s}=r??{};if(!s){try{yield{type:"result",result:await this.request(t,n,r)}}catch(l){yield{type:"error",error:l instanceof Q?l:new Q(te.InternalError,String(l))}}return}let i;try{const l=await this.request(t,Nl,r);if(l.task)i=l.task.taskId,yield{type:"taskCreated",task:l.task};else throw new Q(te.InternalError,"Task creation did not return a task");for(;;){const u=await this.getTask({taskId:i},r);if(yield{type:"taskStatus",task:u},Ir(u.status)){u.status==="completed"?yield{type:"result",result:await this.getTaskResult({taskId:i},n,r)}:u.status==="failed"?yield{type:"error",error:new Q(te.InternalError,`Task ${i} failed`)}:u.status==="cancelled"&&(yield{type:"error",error:new Q(te.InternalError,`Task ${i} was cancelled`)});return}if(u.status==="input_required"){yield{type:"result",result:await this.getTaskResult({taskId:i},n,r)};return}const c=u.pollInterval??((o=this._options)==null?void 0:o.defaultTaskPollInterval)??1e3;await new Promise(f=>setTimeout(f,c)),(a=r==null?void 0:r.signal)==null||a.throwIfAborted()}}catch(l){yield{type:"error",error:l instanceof Q?l:new Q(te.InternalError,String(l))}}}request(t,n,r){const{relatedRequestId:s,resumptionToken:i,onresumptiontoken:o,task:a,relatedTask:l}=r??{};return new Promise((u,c)=>{var h,p,k,E,R;const f=N=>{c(N)};if(!this._transport){f(new Error("Not connected"));return}if(((h=this._options)==null?void 0:h.enforceStrictCapabilities)===!0)try{this.assertCapabilityForMethod(t.method),a&&this.assertTaskCapability(t.method)}catch(N){f(N);return}(p=r==null?void 0:r.signal)==null||p.throwIfAborted();const m=this._requestMessageId++,v={...t,jsonrpc:"2.0",id:m};r!=null&&r.onprogress&&(this._progressHandlers.set(m,r.onprogress),v.params={...t.params,_meta:{...((k=t.params)==null?void 0:k._meta)||{},progressToken:m}}),a&&(v.params={...v.params,task:a}),l&&(v.params={...v.params,_meta:{...((E=v.params)==null?void 0:E._meta)||{},[Cr]:l}});const g=N=>{var ne;this._responseHandlers.delete(m),this._progressHandlers.delete(m),this._cleanupTimeout(m),(ne=this._transport)==null||ne.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:m,reason:String(N)}},{relatedRequestId:s,resumptionToken:i,onresumptiontoken:o}).catch(ee=>this._onerror(new Error(`Failed to send cancellation: ${ee}`)));const z=N instanceof Q?N:new Q(te.RequestTimeout,String(N));c(z)};this._responseHandlers.set(m,N=>{var z;if(!((z=r==null?void 0:r.signal)!=null&&z.aborted)){if(N instanceof Error)return c(N);try{const ne=Ci(n,N.result);ne.success?u(ne.data):c(ne.error)}catch(ne){c(ne)}}}),(R=r==null?void 0:r.signal)==null||R.addEventListener("abort",()=>{var N;g((N=r==null?void 0:r.signal)==null?void 0:N.reason)});const _=(r==null?void 0:r.timeout)??PI,w=()=>g(Q.fromError(te.RequestTimeout,"Request timed out",{timeout:_}));this._setupTimeout(m,_,r==null?void 0:r.maxTotalTimeout,w,(r==null?void 0:r.resetTimeoutOnProgress)??!1);const d=l==null?void 0:l.taskId;if(d){const N=z=>{const ne=this._responseHandlers.get(m);ne?ne(z):this._onerror(new Error(`Response handler missing for side-channeled request ${m}`))};this._requestResolvers.set(m,N),this._enqueueTaskMessage(d,{type:"request",message:v,timestamp:Date.now()}).catch(z=>{this._cleanupTimeout(m),c(z)})}else this._transport.send(v,{relatedRequestId:s,resumptionToken:i,onresumptiontoken:o}).catch(N=>{this._cleanupTimeout(m),c(N)})})}async getTask(t,n){return this.request({method:"tasks/get",params:t},$f,n)}async getTaskResult(t,n,r){return this.request({method:"tasks/result",params:t},n,r)}async listTasks(t,n){return this.request({method:"tasks/list",params:t},bf,n)}async cancelTask(t,n){return this.request({method:"tasks/cancel",params:t},Rb,n)}async notification(t,n){var a,l,u,c;if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(t.method);const r=(a=n==null?void 0:n.relatedTask)==null?void 0:a.taskId;if(r){const f={...t,jsonrpc:"2.0",params:{...t.params,_meta:{...((l=t.params)==null?void 0:l._meta)||{},[Cr]:n.relatedTask}}};await this._enqueueTaskMessage(r,{type:"notification",message:f,timestamp:Date.now()});return}if((((u=this._options)==null?void 0:u.debouncedNotificationMethods)??[]).includes(t.method)&&!t.params&&!(n!=null&&n.relatedRequestId)&&!(n!=null&&n.relatedTask)){if(this._pendingDebouncedNotifications.has(t.method))return;this._pendingDebouncedNotifications.add(t.method),Promise.resolve().then(()=>{var m,v;if(this._pendingDebouncedNotifications.delete(t.method),!this._transport)return;let f={...t,jsonrpc:"2.0"};n!=null&&n.relatedTask&&(f={...f,params:{...f.params,_meta:{...((m=f.params)==null?void 0:m._meta)||{},[Cr]:n.relatedTask}}}),(v=this._transport)==null||v.send(f,n).catch(g=>this._onerror(g))});return}let o={...t,jsonrpc:"2.0"};n!=null&&n.relatedTask&&(o={...o,params:{...o.params,_meta:{...((c=o.params)==null?void 0:c._meta)||{},[Cr]:n.relatedTask}}}),await this._transport.send(o,n)}setRequestHandler(t,n){const r=Om(t);this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(s,i)=>{const o=Cm(t,s);return Promise.resolve(n(o,i))})}removeRequestHandler(t){this._requestHandlers.delete(t)}assertCanSetRequestHandler(t){if(this._requestHandlers.has(t))throw new Error(`A request handler for ${t} already exists, which would be overridden`)}setNotificationHandler(t,n){const r=Om(t);this._notificationHandlers.set(r,s=>{const i=Cm(t,s);return Promise.resolve(n(i))})}removeNotificationHandler(t){this._notificationHandlers.delete(t)}_cleanupTaskProgressHandler(t){const n=this._taskProgressTokens.get(t);n!==void 0&&(this._progressHandlers.delete(n),this._taskProgressTokens.delete(t))}async _enqueueTaskMessage(t,n,r){var i;if(!this._taskStore||!this._taskMessageQueue)throw new Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");const s=(i=this._options)==null?void 0:i.maxTaskQueueSize;await this._taskMessageQueue.enqueue(t,n,r,s)}async _clearTaskQueue(t,n){if(this._taskMessageQueue){const r=await this._taskMessageQueue.dequeueAll(t,n);for(const s of r)if(s.type==="request"&&bm(s.message)){const i=s.message.id,o=this._requestResolvers.get(i);o?(o(new Q(te.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(i)):this._onerror(new Error(`Resolver missing for request ${i} during task ${t} cleanup`))}}}async _waitForTaskUpdate(t,n){var s,i;let r=((s=this._options)==null?void 0:s.defaultTaskPollInterval)??1e3;try{const o=await((i=this._taskStore)==null?void 0:i.getTask(t));o!=null&&o.pollInterval&&(r=o.pollInterval)}catch{}return new Promise((o,a)=>{if(n.aborted){a(new Q(te.InvalidRequest,"Request cancelled"));return}const l=setTimeout(o,r);n.addEventListener("abort",()=>{clearTimeout(l),a(new Q(te.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(t,n){const r=this._taskStore;if(!r)throw new Error("No task store configured");return{createTask:async s=>{if(!t)throw new Error("No request provided");return await r.createTask(s,t.id,{method:t.method,params:t.params},n)},getTask:async s=>{const i=await r.getTask(s,n);if(!i)throw new Q(te.InvalidParams,"Failed to retrieve task: Task not found");return i},storeTaskResult:async(s,i,o)=>{await r.storeTaskResult(s,i,o,n);const a=await r.getTask(s,n);if(a){const l=Ja.parse({method:"notifications/tasks/status",params:a});await this.notification(l),Ir(a.status)&&this._cleanupTaskProgressHandler(s)}},getTaskResult:s=>r.getTaskResult(s,n),updateTaskStatus:async(s,i,o)=>{const a=await r.getTask(s,n);if(!a)throw new Q(te.InvalidParams,`Task "${s}" not found - it may have been cleaned up`);if(Ir(a.status))throw new Q(te.InvalidParams,`Cannot update task "${s}" from terminal status "${a.status}" to "${i}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await r.updateTaskStatus(s,i,o,n);const l=await r.getTask(s,n);if(l){const u=Ja.parse({method:"notifications/tasks/status",params:l});await this.notification(u),Ir(l.status)&&this._cleanupTaskProgressHandler(s)}},listTasks:s=>r.listTasks(s,n)}}}function xm(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function RI(e,t){const n={...e};for(const r in t){const s=r,i=t[s];if(i===void 0)continue;const o=n[s];xm(o)&&xm(i)?n[s]={...o,...i}:n[s]=i}return n}var Jc={exports:{}},L_={},_n={},Vs={},So={},ae={},io={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(h){if(super(),!e.IDENTIFIER.test(h))throw new Error("CodeGen: name must be a valid identifier");this.str=h}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(h){super(),this._items=typeof h=="string"?[h]:h}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const h=this._items[0];return h===""||h==='""'}get str(){var h;return(h=this._str)!==null&&h!==void 0?h:this._str=this._items.reduce((p,k)=>`${p}${k}`,"")}get names(){var h;return(h=this._names)!==null&&h!==void 0?h:this._names=this._items.reduce((p,k)=>(k instanceof n&&(p[k.str]=(p[k.str]||0)+1),p),{})}}e._Code=r,e.nil=new r("");function s(d,...h){const p=[d[0]];let k=0;for(;k<h.length;)a(p,h[k]),p.push(d[++k]);return new r(p)}e._=s;const i=new r("+");function o(d,...h){const p=[v(d[0])];let k=0;for(;k<h.length;)p.push(i),a(p,h[k]),p.push(i,v(d[++k]));return l(p),new r(p)}e.str=o;function a(d,h){h instanceof r?d.push(...h._items):h instanceof n?d.push(h):d.push(f(h))}e.addCodeArg=a;function l(d){let h=1;for(;h<d.length-1;){if(d[h]===i){const p=u(d[h-1],d[h+1]);if(p!==void 0){d.splice(h-1,3,p);continue}d[h++]="+"}h++}}function u(d,h){if(h==='""')return d;if(d==='""')return h;if(typeof d=="string")return h instanceof n||d[d.length-1]!=='"'?void 0:typeof h!="string"?`${d.slice(0,-1)}${h}"`:h[0]==='"'?d.slice(0,-1)+h.slice(1):void 0;if(typeof h=="string"&&h[0]==='"'&&!(d instanceof n))return`"${d}${h.slice(1)}`}function c(d,h){return h.emptyStr()?d:d.emptyStr()?h:o`${d}${h}`}e.strConcat=c;function f(d){return typeof d=="number"||typeof d=="boolean"||d===null?d:v(Array.isArray(d)?d.join(","):d)}function m(d){return new r(v(d))}e.stringify=m;function v(d){return JSON.stringify(d).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=v;function g(d){return typeof d=="string"&&e.IDENTIFIER.test(d)?new r(`.${d}`):s`[${d}]`}e.getProperty=g;function _(d){if(typeof d=="string"&&e.IDENTIFIER.test(d))return new r(`${d}`);throw new Error(`CodeGen: invalid export name: ${d}, use explicit $id name mapping`)}e.getEsmExportName=_;function w(d){return new r(d.toString())}e.regexpCode=w})(io);var Yc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=io;class n extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var r;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:u,parent:c}={}){this._names={},this._prefixes=u,this._parent=c}toName(u){return u instanceof t.Name?u:this.name(u)}name(u){return new t.Name(this._newName(u))}_newName(u){const c=this._names[u]||this._nameGroup(u);return`${u}${c.index++}`}_nameGroup(u){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}e.Scope=s;class i extends t.Name{constructor(u,c){super(c),this.prefix=u}setValue(u,{property:c,itemIndex:f}){this.value=u,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=i;const o=(0,t._)`\n`;class a extends s{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?o:t.nil}}get(){return this._scope}name(u){return new i(u,this._newName(u))}value(u,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const m=this.toName(u),{prefix:v}=m,g=(f=c.key)!==null&&f!==void 0?f:c.ref;let _=this._values[v];if(_){const h=_.get(g);if(h)return h}else _=this._values[v]=new Map;_.set(g,m);const w=this._scope[v]||(this._scope[v]=[]),d=w.length;return w[d]=c.ref,m.setValue(c,{property:v,itemIndex:d}),m}getValue(u,c){const f=this._values[u];if(f)return f.get(c)}scopeRefs(u,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${u}${f.scopePath}`})}scopeCode(u=this._values,c,f){return this._reduceValues(u,m=>{if(m.value===void 0)throw new Error(`CodeGen: name "${m}" has no value`);return m.value.code},c,f)}_reduceValues(u,c,f={},m){let v=t.nil;for(const g in u){const _=u[g];if(!_)continue;const w=f[g]=f[g]||new Map;_.forEach(d=>{if(w.has(d))return;w.set(d,r.Started);let h=c(d);if(h){const p=this.opts.es5?e.varKinds.var:e.varKinds.const;v=(0,t._)`${v}${p} ${d} = ${h};${this.opts._n}`}else if(h=m==null?void 0:m(d))v=(0,t._)`${v}${h}${this.opts._n}`;else throw new n(d);w.set(d,r.Completed)})}return v}}e.ValueScope=a})(Yc);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=io,n=Yc;var r=io;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var s=Yc;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class i{optimizeNodes(){return this}optimizeNames(y,S){return this}}class o extends i{constructor(y,S,P){super(),this.varKind=y,this.name=S,this.rhs=P}render({es5:y,_n:S}){const P=y?n.varKinds.var:this.varKind,H=this.rhs===void 0?"":` = ${this.rhs}`;return`${P} ${this.name}${H};`+S}optimizeNames(y,S){if(y[this.name.str])return this.rhs&&(this.rhs=D(this.rhs,y,S)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends i{constructor(y,S,P){super(),this.lhs=y,this.rhs=S,this.sideEffects=P}render({_n:y}){return`${this.lhs} = ${this.rhs};`+y}optimizeNames(y,S){if(!(this.lhs instanceof t.Name&&!y[this.lhs.str]&&!this.sideEffects))return this.rhs=D(this.rhs,y,S),this}get names(){const y=this.lhs instanceof t.Name?{}:{...this.lhs.names};return fe(y,this.rhs)}}class l extends a{constructor(y,S,P,H){super(y,P,H),this.op=S}render({_n:y}){return`${this.lhs} ${this.op}= ${this.rhs};`+y}}class u extends i{constructor(y){super(),this.label=y,this.names={}}render({_n:y}){return`${this.label}:`+y}}class c extends i{constructor(y){super(),this.label=y,this.names={}}render({_n:y}){return`break${this.label?` ${this.label}`:""};`+y}}class f extends i{constructor(y){super(),this.error=y}render({_n:y}){return`throw ${this.error};`+y}get names(){return this.error.names}}class m extends i{constructor(y){super(),this.code=y}render({_n:y}){return`${this.code};`+y}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(y,S){return this.code=D(this.code,y,S),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class v extends i{constructor(y=[]){super(),this.nodes=y}render(y){return this.nodes.reduce((S,P)=>S+P.render(y),"")}optimizeNodes(){const{nodes:y}=this;let S=y.length;for(;S--;){const P=y[S].optimizeNodes();Array.isArray(P)?y.splice(S,1,...P):P?y[S]=P:y.splice(S,1)}return y.length>0?this:void 0}optimizeNames(y,S){const{nodes:P}=this;let H=P.length;for(;H--;){const J=P[H];J.optimizeNames(y,S)||(Fe(y,J.names),P.splice(H,1))}return P.length>0?this:void 0}get names(){return this.nodes.reduce((y,S)=>X(y,S.names),{})}}class g extends v{render(y){return"{"+y._n+super.render(y)+"}"+y._n}}class _ extends v{}class w extends g{}w.kind="else";class d extends g{constructor(y,S){super(S),this.condition=y}render(y){let S=`if(${this.condition})`+super.render(y);return this.else&&(S+="else "+this.else.render(y)),S}optimizeNodes(){super.optimizeNodes();const y=this.condition;if(y===!0)return this.nodes;let S=this.else;if(S){const P=S.optimizeNodes();S=this.else=Array.isArray(P)?new w(P):P}if(S)return y===!1?S instanceof d?S:S.nodes:this.nodes.length?this:new d(ft(y),S instanceof d?[S]:S.nodes);if(!(y===!1||!this.nodes.length))return this}optimizeNames(y,S){var P;if(this.else=(P=this.else)===null||P===void 0?void 0:P.optimizeNames(y,S),!!(super.optimizeNames(y,S)||this.else))return this.condition=D(this.condition,y,S),this}get names(){const y=super.names;return fe(y,this.condition),this.else&&X(y,this.else.names),y}}d.kind="if";class h extends g{}h.kind="for";class p extends h{constructor(y){super(),this.iteration=y}render(y){return`for(${this.iteration})`+super.render(y)}optimizeNames(y,S){if(super.optimizeNames(y,S))return this.iteration=D(this.iteration,y,S),this}get names(){return X(super.names,this.iteration.names)}}class k extends h{constructor(y,S,P,H){super(),this.varKind=y,this.name=S,this.from=P,this.to=H}render(y){const S=y.es5?n.varKinds.var:this.varKind,{name:P,from:H,to:J}=this;return`for(${S} ${P}=${H}; ${P}<${J}; ${P}++)`+super.render(y)}get names(){const y=fe(super.names,this.from);return fe(y,this.to)}}class E extends h{constructor(y,S,P,H){super(),this.loop=y,this.varKind=S,this.name=P,this.iterable=H}render(y){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(y)}optimizeNames(y,S){if(super.optimizeNames(y,S))return this.iterable=D(this.iterable,y,S),this}get names(){return X(super.names,this.iterable.names)}}class R extends g{constructor(y,S,P){super(),this.name=y,this.args=S,this.async=P}render(y){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(y)}}R.kind="func";class N extends v{render(y){return"return "+super.render(y)}}N.kind="return";class z extends g{render(y){let S="try"+super.render(y);return this.catch&&(S+=this.catch.render(y)),this.finally&&(S+=this.finally.render(y)),S}optimizeNodes(){var y,S;return super.optimizeNodes(),(y=this.catch)===null||y===void 0||y.optimizeNodes(),(S=this.finally)===null||S===void 0||S.optimizeNodes(),this}optimizeNames(y,S){var P,H;return super.optimizeNames(y,S),(P=this.catch)===null||P===void 0||P.optimizeNames(y,S),(H=this.finally)===null||H===void 0||H.optimizeNames(y,S),this}get names(){const y=super.names;return this.catch&&X(y,this.catch.names),this.finally&&X(y,this.finally.names),y}}class ne extends g{constructor(y){super(),this.error=y}render(y){return`catch(${this.error})`+super.render(y)}}ne.kind="catch";class ee extends g{render(y){return"finally"+super.render(y)}}ee.kind="finally";class V{constructor(y,S={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...S,_n:S.lines?`
`:""},this._extScope=y,this._scope=new n.Scope({parent:y}),this._nodes=[new _]}toString(){return this._root.render(this.opts)}name(y){return this._scope.name(y)}scopeName(y){return this._extScope.name(y)}scopeValue(y,S){const P=this._extScope.value(y,S);return(this._values[P.prefix]||(this._values[P.prefix]=new Set)).add(P),P}getScopeValue(y,S){return this._extScope.getValue(y,S)}scopeRefs(y){return this._extScope.scopeRefs(y,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(y,S,P,H){const J=this._scope.toName(S);return P!==void 0&&H&&(this._constants[J.str]=P),this._leafNode(new o(y,J,P)),J}const(y,S,P){return this._def(n.varKinds.const,y,S,P)}let(y,S,P){return this._def(n.varKinds.let,y,S,P)}var(y,S,P){return this._def(n.varKinds.var,y,S,P)}assign(y,S,P){return this._leafNode(new a(y,S,P))}add(y,S){return this._leafNode(new l(y,e.operators.ADD,S))}code(y){return typeof y=="function"?y():y!==t.nil&&this._leafNode(new m(y)),this}object(...y){const S=["{"];for(const[P,H]of y)S.length>1&&S.push(","),S.push(P),(P!==H||this.opts.es5)&&(S.push(":"),(0,t.addCodeArg)(S,H));return S.push("}"),new t._Code(S)}if(y,S,P){if(this._blockNode(new d(y)),S&&P)this.code(S).else().code(P).endIf();else if(S)this.code(S).endIf();else if(P)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(y){return this._elseNode(new d(y))}else(){return this._elseNode(new w)}endIf(){return this._endBlockNode(d,w)}_for(y,S){return this._blockNode(y),S&&this.code(S).endFor(),this}for(y,S){return this._for(new p(y),S)}forRange(y,S,P,H,J=this.opts.es5?n.varKinds.var:n.varKinds.let){const we=this._scope.toName(y);return this._for(new k(J,we,S,P),()=>H(we))}forOf(y,S,P,H=n.varKinds.const){const J=this._scope.toName(y);if(this.opts.es5){const we=S instanceof t.Name?S:this.var("_arr",S);return this.forRange("_i",0,(0,t._)`${we}.length`,ye=>{this.var(J,(0,t._)`${we}[${ye}]`),P(J)})}return this._for(new E("of",H,J,S),()=>P(J))}forIn(y,S,P,H=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(y,(0,t._)`Object.keys(${S})`,P);const J=this._scope.toName(y);return this._for(new E("in",H,J,S),()=>P(J))}endFor(){return this._endBlockNode(h)}label(y){return this._leafNode(new u(y))}break(y){return this._leafNode(new c(y))}return(y){const S=new N;if(this._blockNode(S),this.code(y),S.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(N)}try(y,S,P){if(!S&&!P)throw new Error('CodeGen: "try" without "catch" and "finally"');const H=new z;if(this._blockNode(H),this.code(y),S){const J=this.name("e");this._currNode=H.catch=new ne(J),S(J)}return P&&(this._currNode=H.finally=new ee,this.code(P)),this._endBlockNode(ne,ee)}throw(y){return this._leafNode(new f(y))}block(y,S){return this._blockStarts.push(this._nodes.length),y&&this.code(y).endBlock(S),this}endBlock(y){const S=this._blockStarts.pop();if(S===void 0)throw new Error("CodeGen: not in self-balancing block");const P=this._nodes.length-S;if(P<0||y!==void 0&&P!==y)throw new Error(`CodeGen: wrong number of nodes: ${P} vs ${y} expected`);return this._nodes.length=S,this}func(y,S=t.nil,P,H){return this._blockNode(new R(y,S,P)),H&&this.code(H).endFunc(),this}endFunc(){return this._endBlockNode(R)}optimize(y=1){for(;y-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(y){return this._currNode.nodes.push(y),this}_blockNode(y){this._currNode.nodes.push(y),this._nodes.push(y)}_endBlockNode(y,S){const P=this._currNode;if(P instanceof y||S&&P instanceof S)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${S?`${y.kind}/${S.kind}`:y.kind}"`)}_elseNode(y){const S=this._currNode;if(!(S instanceof d))throw new Error('CodeGen: "else" without "if"');return this._currNode=S.else=y,this}get _root(){return this._nodes[0]}get _currNode(){const y=this._nodes;return y[y.length-1]}set _currNode(y){const S=this._nodes;S[S.length-1]=y}}e.CodeGen=V;function X(T,y){for(const S in y)T[S]=(T[S]||0)+(y[S]||0);return T}function fe(T,y){return y instanceof t._CodeOrName?X(T,y.names):T}function D(T,y,S){if(T instanceof t.Name)return P(T);if(!H(T))return T;return new t._Code(T._items.reduce((J,we)=>(we instanceof t.Name&&(we=P(we)),we instanceof t._Code?J.push(...we._items):J.push(we),J),[]));function P(J){const we=S[J.str];return we===void 0||y[J.str]!==1?J:(delete y[J.str],we)}function H(J){return J instanceof t._Code&&J._items.some(we=>we instanceof t.Name&&y[we.str]===1&&S[we.str]!==void 0)}}function Fe(T,y){for(const S in y)T[S]=(T[S]||0)-(y[S]||0)}function ft(T){return typeof T=="boolean"||typeof T=="number"||T===null?!T:(0,t._)`!${O(T)}`}e.not=ft;const re=$(e.operators.AND);function M(...T){return T.reduce(re)}e.and=M;const Y=$(e.operators.OR);function C(...T){return T.reduce(Y)}e.or=C;function $(T){return(y,S)=>y===t.nil?S:S===t.nil?y:(0,t._)`${O(y)} ${T} ${O(S)}`}function O(T){return T instanceof t.Name?T:(0,t._)`(${T})`}})(ae);var Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.checkStrictMode=Z.getErrorPath=Z.Type=Z.useFunc=Z.setEvaluated=Z.evaluatedPropsToName=Z.mergeEvaluated=Z.eachItem=Z.unescapeJsonPointer=Z.escapeJsonPointer=Z.escapeFragment=Z.unescapeFragment=Z.schemaRefOrVal=Z.schemaHasRulesButRef=Z.schemaHasRules=Z.checkUnknownRules=Z.alwaysValidSchema=Z.toHash=void 0;const Te=ae,NI=io;function OI(e){const t={};for(const n of e)t[n]=!0;return t}Z.toHash=OI;function CI(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Z_(e,t),!U_(t,e.self.RULES.all))}Z.alwaysValidSchema=CI;function Z_(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const s=r.RULES.keywords;for(const i in t)s[i]||H_(e,`unknown keyword: "${i}"`)}Z.checkUnknownRules=Z_;function U_(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}Z.schemaHasRules=U_;function xI(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}Z.schemaHasRulesButRef=xI;function jI({topSchemaRef:e,schemaPath:t},n,r,s){if(!s){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Te._)`${n}`}return(0,Te._)`${e}${t}${(0,Te.getProperty)(r)}`}Z.schemaRefOrVal=jI;function zI(e){return F_(decodeURIComponent(e))}Z.unescapeFragment=zI;function AI(e){return encodeURIComponent(zf(e))}Z.escapeFragment=AI;function zf(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}Z.escapeJsonPointer=zf;function F_(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Z.unescapeJsonPointer=F_;function MI(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}Z.eachItem=MI;function jm({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(s,i,o,a)=>{const l=o===void 0?i:o instanceof Te.Name?(i instanceof Te.Name?e(s,i,o):t(s,i,o),o):i instanceof Te.Name?(t(s,o,i),i):n(i,o);return a===Te.Name&&!(l instanceof Te.Name)?r(s,l):l}}Z.mergeEvaluated={props:jm({mergeNames:(e,t,n)=>e.if((0,Te._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Te._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Te._)`${n} || {}`).code((0,Te._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Te._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Te._)`${n} || {}`),Af(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:V_}),items:jm({mergeNames:(e,t,n)=>e.if((0,Te._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Te._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Te._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Te._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function V_(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Te._)`{}`);return t!==void 0&&Af(e,n,t),n}Z.evaluatedPropsToName=V_;function Af(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Te._)`${t}${(0,Te.getProperty)(r)}`,!0))}Z.setEvaluated=Af;const zm={};function DI(e,t){return e.scopeValue("func",{ref:t,code:zm[t.code]||(zm[t.code]=new NI._Code(t.code))})}Z.useFunc=DI;var Xc;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Xc||(Z.Type=Xc={}));function LI(e,t,n){if(e instanceof Te.Name){const r=t===Xc.Num;return n?r?(0,Te._)`"[" + ${e} + "]"`:(0,Te._)`"['" + ${e} + "']"`:r?(0,Te._)`"/" + ${e}`:(0,Te._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Te.getProperty)(e).toString():"/"+zf(e)}Z.getErrorPath=LI;function H_(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}Z.checkStrictMode=H_;var On={};Object.defineProperty(On,"__esModule",{value:!0});const mt=ae,ZI={data:new mt.Name("data"),valCxt:new mt.Name("valCxt"),instancePath:new mt.Name("instancePath"),parentData:new mt.Name("parentData"),parentDataProperty:new mt.Name("parentDataProperty"),rootData:new mt.Name("rootData"),dynamicAnchors:new mt.Name("dynamicAnchors"),vErrors:new mt.Name("vErrors"),errors:new mt.Name("errors"),this:new mt.Name("this"),self:new mt.Name("self"),scope:new mt.Name("scope"),json:new mt.Name("json"),jsonPos:new mt.Name("jsonPos"),jsonLen:new mt.Name("jsonLen"),jsonPart:new mt.Name("jsonPart")};On.default=ZI;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=ae,n=Z,r=On;e.keywordError={message:({keyword:w})=>(0,t.str)`must pass "${w}" keyword validation`},e.keyword$DataError={message:({keyword:w,schemaType:d})=>d?(0,t.str)`"${w}" keyword must be ${d} ($data)`:(0,t.str)`"${w}" keyword is invalid ($data)`};function s(w,d=e.keywordError,h,p){const{it:k}=w,{gen:E,compositeRule:R,allErrors:N}=k,z=f(w,d,h);p??(R||N)?l(E,z):u(k,(0,t._)`[${z}]`)}e.reportError=s;function i(w,d=e.keywordError,h){const{it:p}=w,{gen:k,compositeRule:E,allErrors:R}=p,N=f(w,d,h);l(k,N),E||R||u(p,r.default.vErrors)}e.reportExtraError=i;function o(w,d){w.assign(r.default.errors,d),w.if((0,t._)`${r.default.vErrors} !== null`,()=>w.if(d,()=>w.assign((0,t._)`${r.default.vErrors}.length`,d),()=>w.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:w,keyword:d,schemaValue:h,data:p,errsCount:k,it:E}){if(k===void 0)throw new Error("ajv implementation error");const R=w.name("err");w.forRange("i",k,r.default.errors,N=>{w.const(R,(0,t._)`${r.default.vErrors}[${N}]`),w.if((0,t._)`${R}.instancePath === undefined`,()=>w.assign((0,t._)`${R}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),w.assign((0,t._)`${R}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${d}`),E.opts.verbose&&(w.assign((0,t._)`${R}.schema`,h),w.assign((0,t._)`${R}.data`,p))})}e.extendErrors=a;function l(w,d){const h=w.const("err",d);w.if((0,t._)`${r.default.vErrors} === null`,()=>w.assign(r.default.vErrors,(0,t._)`[${h}]`),(0,t._)`${r.default.vErrors}.push(${h})`),w.code((0,t._)`${r.default.errors}++`)}function u(w,d){const{gen:h,validateName:p,schemaEnv:k}=w;k.$async?h.throw((0,t._)`new ${w.ValidationError}(${d})`):(h.assign((0,t._)`${p}.errors`,d),h.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(w,d,h){const{createErrors:p}=w.it;return p===!1?(0,t._)`{}`:m(w,d,h)}function m(w,d,h={}){const{gen:p,it:k}=w,E=[v(k,h),g(w,h)];return _(w,d,E),p.object(...E)}function v({errorPath:w},{instancePath:d}){const h=d?(0,t.str)`${w}${(0,n.getErrorPath)(d,n.Type.Str)}`:w;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,h)]}function g({keyword:w,it:{errSchemaPath:d}},{schemaPath:h,parentSchema:p}){let k=p?d:(0,t.str)`${d}/${w}`;return h&&(k=(0,t.str)`${k}${(0,n.getErrorPath)(h,n.Type.Str)}`),[c.schemaPath,k]}function _(w,{params:d,message:h},p){const{keyword:k,data:E,schemaValue:R,it:N}=w,{opts:z,propertyName:ne,topSchemaRef:ee,schemaPath:V}=N;p.push([c.keyword,k],[c.params,typeof d=="function"?d(w):d||(0,t._)`{}`]),z.messages&&p.push([c.message,typeof h=="function"?h(w):h]),z.verbose&&p.push([c.schema,R],[c.parentSchema,(0,t._)`${ee}${V}`],[r.default.data,E]),ne&&p.push([c.propertyName,ne])}})(So);Object.defineProperty(Vs,"__esModule",{value:!0});Vs.boolOrEmptySchema=Vs.topBoolOrEmptySchema=void 0;const UI=So,FI=ae,VI=On,HI={message:"boolean schema is false"};function qI(e){const{gen:t,schema:n,validateName:r}=e;n===!1?q_(e,!1):typeof n=="object"&&n.$async===!0?t.return(VI.default.data):(t.assign((0,FI._)`${r}.errors`,null),t.return(!0))}Vs.topBoolOrEmptySchema=qI;function BI(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),q_(e)):n.var(t,!0)}Vs.boolOrEmptySchema=BI;function q_(e,t){const{gen:n,data:r}=e,s={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,UI.reportError)(s,HI,void 0,t)}var Qe={},Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.getRules=Jr.isJSONType=void 0;const WI=["string","number","integer","boolean","null","object","array"],KI=new Set(WI);function GI(e){return typeof e=="string"&&KI.has(e)}Jr.isJSONType=GI;function QI(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Jr.getRules=QI;var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.shouldUseRule=Ln.shouldUseGroup=Ln.schemaHasRulesForType=void 0;function JI({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&B_(e,r)}Ln.schemaHasRulesForType=JI;function B_(e,t){return t.rules.some(n=>W_(e,n))}Ln.shouldUseGroup=B_;function W_(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Ln.shouldUseRule=W_;Object.defineProperty(Qe,"__esModule",{value:!0});Qe.reportTypeError=Qe.checkDataTypes=Qe.checkDataType=Qe.coerceAndCheckDataType=Qe.getJSONTypes=Qe.getSchemaTypes=Qe.DataType=void 0;const YI=Jr,XI=Ln,eR=So,oe=ae,K_=Z;var Rs;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Rs||(Qe.DataType=Rs={}));function tR(e){const t=G_(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Qe.getSchemaTypes=tR;function G_(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(YI.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Qe.getJSONTypes=G_;function nR(e,t){const{gen:n,data:r,opts:s}=e,i=rR(t,s.coerceTypes),o=t.length>0&&!(i.length===0&&t.length===1&&(0,XI.schemaHasRulesForType)(e,t[0]));if(o){const a=Mf(t,r,s.strictNumbers,Rs.Wrong);n.if(a,()=>{i.length?sR(e,t,i):Df(e)})}return o}Qe.coerceAndCheckDataType=nR;const Q_=new Set(["string","number","integer","boolean","null"]);function rR(e,t){return t?e.filter(n=>Q_.has(n)||t==="array"&&n==="array"):[]}function sR(e,t,n){const{gen:r,data:s,opts:i}=e,o=r.let("dataType",(0,oe._)`typeof ${s}`),a=r.let("coerced",(0,oe._)`undefined`);i.coerceTypes==="array"&&r.if((0,oe._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>r.assign(s,(0,oe._)`${s}[0]`).assign(o,(0,oe._)`typeof ${s}`).if(Mf(t,s,i.strictNumbers),()=>r.assign(a,s))),r.if((0,oe._)`${a} !== undefined`);for(const u of n)(Q_.has(u)||u==="array"&&i.coerceTypes==="array")&&l(u);r.else(),Df(e),r.endIf(),r.if((0,oe._)`${a} !== undefined`,()=>{r.assign(s,a),iR(e,a)});function l(u){switch(u){case"string":r.elseIf((0,oe._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,oe._)`"" + ${s}`).elseIf((0,oe._)`${s} === null`).assign(a,(0,oe._)`""`);return;case"number":r.elseIf((0,oe._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,oe._)`+${s}`);return;case"integer":r.elseIf((0,oe._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,oe._)`+${s}`);return;case"boolean":r.elseIf((0,oe._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,oe._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":r.elseIf((0,oe._)`${s} === "" || ${s} === 0 || ${s} === false`),r.assign(a,null);return;case"array":r.elseIf((0,oe._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,oe._)`[${s}]`)}}}function iR({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,oe._)`${t} !== undefined`,()=>e.assign((0,oe._)`${t}[${n}]`,r))}function ed(e,t,n,r=Rs.Correct){const s=r===Rs.Correct?oe.operators.EQ:oe.operators.NEQ;let i;switch(e){case"null":return(0,oe._)`${t} ${s} null`;case"array":i=(0,oe._)`Array.isArray(${t})`;break;case"object":i=(0,oe._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=o((0,oe._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=o();break;default:return(0,oe._)`typeof ${t} ${s} ${e}`}return r===Rs.Correct?i:(0,oe.not)(i);function o(a=oe.nil){return(0,oe.and)((0,oe._)`typeof ${t} == "number"`,a,n?(0,oe._)`isFinite(${t})`:oe.nil)}}Qe.checkDataType=ed;function Mf(e,t,n,r){if(e.length===1)return ed(e[0],t,n,r);let s;const i=(0,K_.toHash)(e);if(i.array&&i.object){const o=(0,oe._)`typeof ${t} != "object"`;s=i.null?o:(0,oe._)`!${t} || ${o}`,delete i.null,delete i.array,delete i.object}else s=oe.nil;i.number&&delete i.integer;for(const o in i)s=(0,oe.and)(s,ed(o,t,n,r));return s}Qe.checkDataTypes=Mf;const oR={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,oe._)`{type: ${e}}`:(0,oe._)`{type: ${t}}`};function Df(e){const t=aR(e);(0,eR.reportError)(t,oR)}Qe.reportTypeError=Df;function aR(e){const{gen:t,data:n,schema:r}=e,s=(0,K_.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:s,schemaValue:s,parentSchema:r,params:{},it:e}}var Ol={};Object.defineProperty(Ol,"__esModule",{value:!0});Ol.assignDefaults=void 0;const rs=ae,lR=Z;function uR(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const s in n)Am(e,s,n[s].default);else t==="array"&&Array.isArray(r)&&r.forEach((s,i)=>Am(e,i,s.default))}Ol.assignDefaults=uR;function Am(e,t,n){const{gen:r,compositeRule:s,data:i,opts:o}=e;if(n===void 0)return;const a=(0,rs._)`${i}${(0,rs.getProperty)(t)}`;if(s){(0,lR.checkStrictMode)(e,`default is ignored for: ${a}`);return}let l=(0,rs._)`${a} === undefined`;o.useDefaults==="empty"&&(l=(0,rs._)`${l} || ${a} === null || ${a} === ""`),r.if(l,(0,rs._)`${a} = ${(0,rs.stringify)(n)}`)}var bn={},ue={};Object.defineProperty(ue,"__esModule",{value:!0});ue.validateUnion=ue.validateArray=ue.usePattern=ue.callValidateCode=ue.schemaProperties=ue.allSchemaProperties=ue.noPropertyInData=ue.propertyInData=ue.isOwnProperty=ue.hasPropFunc=ue.reportMissingProp=ue.checkMissingProp=ue.checkReportMissingProp=void 0;const Ne=ae,Lf=Z,Qn=On,cR=Z;function dR(e,t){const{gen:n,data:r,it:s}=e;n.if(Uf(n,r,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Ne._)`${t}`},!0),e.error()})}ue.checkReportMissingProp=dR;function fR({gen:e,data:t,it:{opts:n}},r,s){return(0,Ne.or)(...r.map(i=>(0,Ne.and)(Uf(e,t,i,n.ownProperties),(0,Ne._)`${s} = ${i}`)))}ue.checkMissingProp=fR;function hR(e,t){e.setParams({missingProperty:t},!0),e.error()}ue.reportMissingProp=hR;function J_(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Ne._)`Object.prototype.hasOwnProperty`})}ue.hasPropFunc=J_;function Zf(e,t,n){return(0,Ne._)`${J_(e)}.call(${t}, ${n})`}ue.isOwnProperty=Zf;function pR(e,t,n,r){const s=(0,Ne._)`${t}${(0,Ne.getProperty)(n)} !== undefined`;return r?(0,Ne._)`${s} && ${Zf(e,t,n)}`:s}ue.propertyInData=pR;function Uf(e,t,n,r){const s=(0,Ne._)`${t}${(0,Ne.getProperty)(n)} === undefined`;return r?(0,Ne.or)(s,(0,Ne.not)(Zf(e,t,n))):s}ue.noPropertyInData=Uf;function Y_(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}ue.allSchemaProperties=Y_;function mR(e,t){return Y_(t).filter(n=>!(0,Lf.alwaysValidSchema)(e,t[n]))}ue.schemaProperties=mR;function gR({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:s,errorPath:i},it:o},a,l,u){const c=u?(0,Ne._)`${e}, ${t}, ${r}${s}`:t,f=[[Qn.default.instancePath,(0,Ne.strConcat)(Qn.default.instancePath,i)],[Qn.default.parentData,o.parentData],[Qn.default.parentDataProperty,o.parentDataProperty],[Qn.default.rootData,Qn.default.rootData]];o.opts.dynamicRef&&f.push([Qn.default.dynamicAnchors,Qn.default.dynamicAnchors]);const m=(0,Ne._)`${c}, ${n.object(...f)}`;return l!==Ne.nil?(0,Ne._)`${a}.call(${l}, ${m})`:(0,Ne._)`${a}(${m})`}ue.callValidateCode=gR;const yR=(0,Ne._)`new RegExp`;function vR({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:s}=t.code,i=s(n,r);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,Ne._)`${s.code==="new RegExp"?yR:(0,cR.useFunc)(e,s)}(${n}, ${r})`})}ue.usePattern=vR;function _R(e){const{gen:t,data:n,keyword:r,it:s}=e,i=t.name("valid");if(s.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(i,!0),o(()=>t.break()),i;function o(a){const l=t.const("len",(0,Ne._)`${n}.length`);t.forRange("i",0,l,u=>{e.subschema({keyword:r,dataProp:u,dataPropType:Lf.Type.Num},i),t.if((0,Ne.not)(i),a)})}}ue.validateArray=_R;function wR(e){const{gen:t,schema:n,keyword:r,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(l=>(0,Lf.alwaysValidSchema)(s,l))&&!s.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((l,u)=>{const c=e.subschema({keyword:r,schemaProp:u,compositeRule:!0},a);t.assign(o,(0,Ne._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,Ne.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}ue.validateUnion=wR;Object.defineProperty(bn,"__esModule",{value:!0});bn.validateKeywordUsage=bn.validSchemaType=bn.funcKeywordCode=bn.macroKeywordCode=void 0;const St=ae,xr=On,kR=ue,SR=So;function $R(e,t){const{gen:n,keyword:r,schema:s,parentSchema:i,it:o}=e,a=t.macro.call(o.self,s,i,o),l=X_(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const u=n.name("valid");e.subschema({schema:a,schemaPath:St.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:l,compositeRule:!0},u),e.pass(u,()=>e.error(!0))}bn.macroKeywordCode=$R;function ER(e,t){var n;const{gen:r,keyword:s,schema:i,parentSchema:o,$data:a,it:l}=e;bR(l,t);const u=!a&&t.compile?t.compile.call(l.self,i,o,l):t.validate,c=X_(r,s,u),f=r.let("valid");e.block$data(f,m),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function m(){if(t.errors===!1)_(),t.modifying&&Mm(e),w(()=>e.error());else{const d=t.async?v():g();t.modifying&&Mm(e),w(()=>TR(e,d))}}function v(){const d=r.let("ruleErrs",null);return r.try(()=>_((0,St._)`await `),h=>r.assign(f,!1).if((0,St._)`${h} instanceof ${l.ValidationError}`,()=>r.assign(d,(0,St._)`${h}.errors`),()=>r.throw(h))),d}function g(){const d=(0,St._)`${c}.errors`;return r.assign(d,null),_(St.nil),d}function _(d=t.async?(0,St._)`await `:St.nil){const h=l.opts.passContext?xr.default.this:xr.default.self,p=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,St._)`${d}${(0,kR.callValidateCode)(e,c,h,p)}`,t.modifying)}function w(d){var h;r.if((0,St.not)((h=t.valid)!==null&&h!==void 0?h:f),d)}}bn.funcKeywordCode=ER;function Mm(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,St._)`${r.parentData}[${r.parentDataProperty}]`))}function TR(e,t){const{gen:n}=e;n.if((0,St._)`Array.isArray(${t})`,()=>{n.assign(xr.default.vErrors,(0,St._)`${xr.default.vErrors} === null ? ${t} : ${xr.default.vErrors}.concat(${t})`).assign(xr.default.errors,(0,St._)`${xr.default.vErrors}.length`),(0,SR.extendErrors)(e)},()=>e.error())}function bR({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function X_(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,St.stringify)(n)})}function PR(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}bn.validSchemaType=PR;function IR({schema:e,opts:t,self:n,errSchemaPath:r},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const o=s.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[i])){const l=`keyword "${i}" value is invalid at path "${r}": `+n.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(l);else throw new Error(l)}}bn.validateKeywordUsage=IR;var yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.extendSubschemaMode=yr.extendSubschemaData=yr.getSubschema=void 0;const Tn=ae,e0=Z;function RR(e,{keyword:t,schemaProp:n,schema:r,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Tn._)`${e.schemaPath}${(0,Tn.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Tn._)`${e.schemaPath}${(0,Tn.getProperty)(t)}${(0,Tn.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,e0.escapeFragment)(n)}`}}if(r!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}yr.getSubschema=RR;function NR(e,t,{dataProp:n,dataPropType:r,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:u,dataPathArr:c,opts:f}=t,m=a.let("data",(0,Tn._)`${t.data}${(0,Tn.getProperty)(n)}`,!0);l(m),e.errorPath=(0,Tn.str)`${u}${(0,e0.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Tn._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(s!==void 0){const u=s instanceof Tn.Name?s:a.let("data",s,!0);l(u),o!==void 0&&(e.propertyName=o)}i&&(e.dataTypes=i);function l(u){e.data=u,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,u]}}yr.extendSubschemaData=NR;function OR(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:s,allErrors:i}){r!==void 0&&(e.compositeRule=r),s!==void 0&&(e.createErrors=s),i!==void 0&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=n}yr.extendSubschemaMode=OR;var it={},t0=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(i=Object.keys(t),r=i.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;s--!==0;){var o=i[s];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n},n0={exports:{}},lr=n0.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},s=n.post||function(){};fa(t,r,s,e,"",e)};lr.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};lr.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};lr.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};lr.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function fa(e,t,n,r,s,i,o,a,l,u){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,s,i,o,a,l,u);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in lr.arrayKeywords)for(var m=0;m<f.length;m++)fa(e,t,n,f[m],s+"/"+c+"/"+m,i,s,c,r,m)}else if(c in lr.propsKeywords){if(f&&typeof f=="object")for(var v in f)fa(e,t,n,f[v],s+"/"+c+"/"+CR(v),i,s,c,r,v)}else(c in lr.keywords||e.allKeys&&!(c in lr.skipKeywords))&&fa(e,t,n,f,s+"/"+c,i,s,c,r)}n(r,s,i,o,a,l,u)}}function CR(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var xR=n0.exports;Object.defineProperty(it,"__esModule",{value:!0});it.getSchemaRefs=it.resolveUrl=it.normalizeId=it._getFullPath=it.getFullPath=it.inlineRef=void 0;const jR=Z,zR=t0,AR=xR,MR=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function DR(e,t=!0){return typeof e=="boolean"?!0:t===!0?!td(e):t?r0(e)<=t:!1}it.inlineRef=DR;const LR=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function td(e){for(const t in e){if(LR.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(td)||typeof n=="object"&&td(n))return!0}return!1}function r0(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!MR.has(n)&&(typeof e[n]=="object"&&(0,jR.eachItem)(e[n],r=>t+=r0(r)),t===1/0))return 1/0}return t}function s0(e,t="",n){n!==!1&&(t=Ns(t));const r=e.parse(t);return i0(e,r)}it.getFullPath=s0;function i0(e,t){return e.serialize(t).split("#")[0]+"#"}it._getFullPath=i0;const ZR=/#\/?$/;function Ns(e){return e?e.replace(ZR,""):""}it.normalizeId=Ns;function UR(e,t,n){return n=Ns(n),e.resolve(t,n)}it.resolveUrl=UR;const FR=/^[a-z_][-a-z0-9._]*$/i;function VR(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,s=Ns(e[n]||t),i={"":s},o=s0(r,s,!1),a={},l=new Set;return AR(e,{allKeys:!0},(f,m,v,g)=>{if(g===void 0)return;const _=o+m;let w=i[g];typeof f[n]=="string"&&(w=d.call(this,f[n])),h.call(this,f.$anchor),h.call(this,f.$dynamicAnchor),i[m]=w;function d(p){const k=this.opts.uriResolver.resolve;if(p=Ns(w?k(w,p):p),l.has(p))throw c(p);l.add(p);let E=this.refs[p];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?u(f,E.schema,p):p!==Ns(_)&&(p[0]==="#"?(u(f,a[p],p),a[p]=f):this.refs[p]=_),p}function h(p){if(typeof p=="string"){if(!FR.test(p))throw new Error(`invalid anchor "${p}"`);d.call(this,`#${p}`)}}}),a;function u(f,m,v){if(m!==void 0&&!zR(f,m))throw c(v)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}it.getSchemaRefs=VR;Object.defineProperty(_n,"__esModule",{value:!0});_n.getData=_n.KeywordCxt=_n.validateFunctionCode=void 0;const o0=Vs,Dm=Qe,Ff=Ln,nl=Qe,HR=Ol,xi=bn,Ou=yr,K=ae,se=On,qR=it,Zn=Z,ci=So;function BR(e){if(u0(e)&&(c0(e),l0(e))){GR(e);return}a0(e,()=>(0,o0.topBoolOrEmptySchema)(e))}_n.validateFunctionCode=BR;function a0({gen:e,validateName:t,schema:n,schemaEnv:r,opts:s},i){s.code.es5?e.func(t,(0,K._)`${se.default.data}, ${se.default.valCxt}`,r.$async,()=>{e.code((0,K._)`"use strict"; ${Lm(n,s)}`),KR(e,s),e.code(i)}):e.func(t,(0,K._)`${se.default.data}, ${WR(s)}`,r.$async,()=>e.code(Lm(n,s)).code(i))}function WR(e){return(0,K._)`{${se.default.instancePath}="", ${se.default.parentData}, ${se.default.parentDataProperty}, ${se.default.rootData}=${se.default.data}${e.dynamicRef?(0,K._)`, ${se.default.dynamicAnchors}={}`:K.nil}}={}`}function KR(e,t){e.if(se.default.valCxt,()=>{e.var(se.default.instancePath,(0,K._)`${se.default.valCxt}.${se.default.instancePath}`),e.var(se.default.parentData,(0,K._)`${se.default.valCxt}.${se.default.parentData}`),e.var(se.default.parentDataProperty,(0,K._)`${se.default.valCxt}.${se.default.parentDataProperty}`),e.var(se.default.rootData,(0,K._)`${se.default.valCxt}.${se.default.rootData}`),t.dynamicRef&&e.var(se.default.dynamicAnchors,(0,K._)`${se.default.valCxt}.${se.default.dynamicAnchors}`)},()=>{e.var(se.default.instancePath,(0,K._)`""`),e.var(se.default.parentData,(0,K._)`undefined`),e.var(se.default.parentDataProperty,(0,K._)`undefined`),e.var(se.default.rootData,se.default.data),t.dynamicRef&&e.var(se.default.dynamicAnchors,(0,K._)`{}`)})}function GR(e){const{schema:t,opts:n,gen:r}=e;a0(e,()=>{n.$comment&&t.$comment&&f0(e),eN(e),r.let(se.default.vErrors,null),r.let(se.default.errors,0),n.unevaluated&&QR(e),d0(e),rN(e)})}function QR(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,K._)`${n}.evaluated`),t.if((0,K._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,K._)`${e.evaluated}.props`,(0,K._)`undefined`)),t.if((0,K._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,K._)`${e.evaluated}.items`,(0,K._)`undefined`))}function Lm(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,K._)`/*# sourceURL=${n} */`:K.nil}function JR(e,t){if(u0(e)&&(c0(e),l0(e))){YR(e,t);return}(0,o0.boolOrEmptySchema)(e,t)}function l0({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function u0(e){return typeof e.schema!="boolean"}function YR(e,t){const{schema:n,gen:r,opts:s}=e;s.$comment&&n.$comment&&f0(e),tN(e),nN(e);const i=r.const("_errs",se.default.errors);d0(e,i),r.var(t,(0,K._)`${i} === ${se.default.errors}`)}function c0(e){(0,Zn.checkUnknownRules)(e),XR(e)}function d0(e,t){if(e.opts.jtd)return Zm(e,[],!1,t);const n=(0,Dm.getSchemaTypes)(e.schema),r=(0,Dm.coerceAndCheckDataType)(e,n);Zm(e,n,!r,t)}function XR(e){const{schema:t,errSchemaPath:n,opts:r,self:s}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Zn.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function eN(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Zn.checkStrictMode)(e,"default is ignored in the schema root")}function tN(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,qR.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function nN(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function f0({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:s}){const i=n.$comment;if(s.$comment===!0)e.code((0,K._)`${se.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){const o=(0,K.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,K._)`${se.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function rN(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:s,opts:i}=e;n.$async?t.if((0,K._)`${se.default.errors} === 0`,()=>t.return(se.default.data),()=>t.throw((0,K._)`new ${s}(${se.default.vErrors})`)):(t.assign((0,K._)`${r}.errors`,se.default.vErrors),i.unevaluated&&sN(e),t.return((0,K._)`${se.default.errors} === 0`))}function sN({gen:e,evaluated:t,props:n,items:r}){n instanceof K.Name&&e.assign((0,K._)`${t}.props`,n),r instanceof K.Name&&e.assign((0,K._)`${t}.items`,r)}function Zm(e,t,n,r){const{gen:s,schema:i,data:o,allErrors:a,opts:l,self:u}=e,{RULES:c}=u;if(i.$ref&&(l.ignoreKeywordsWithRef||!(0,Zn.schemaHasRulesButRef)(i,c))){s.block(()=>m0(e,"$ref",c.all.$ref.definition));return}l.jtd||iN(e,t),s.block(()=>{for(const m of c.rules)f(m);f(c.post)});function f(m){(0,Ff.shouldUseGroup)(i,m)&&(m.type?(s.if((0,nl.checkDataType)(m.type,o,l.strictNumbers)),Um(e,m),t.length===1&&t[0]===m.type&&n&&(s.else(),(0,nl.reportTypeError)(e)),s.endIf()):Um(e,m),a||s.if((0,K._)`${se.default.errors} === ${r||0}`))}}function Um(e,t){const{gen:n,schema:r,opts:{useDefaults:s}}=e;s&&(0,HR.assignDefaults)(e,t.type),n.block(()=>{for(const i of t.rules)(0,Ff.shouldUseRule)(r,i)&&m0(e,i.keyword,i.definition,t.type)})}function iN(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(oN(e,t),e.opts.allowUnionTypes||aN(e,t),lN(e,e.dataTypes))}function oN(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{h0(e.dataTypes,n)||Vf(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),cN(e,t)}}function aN(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Vf(e,"use allowUnionTypes to allow union type keyword")}function lN(e,t){const n=e.self.RULES.all;for(const r in n){const s=n[r];if(typeof s=="object"&&(0,Ff.shouldUseRule)(e.schema,s)){const{type:i}=s.definition;i.length&&!i.some(o=>uN(t,o))&&Vf(e,`missing type "${i.join(",")}" for keyword "${r}"`)}}}function uN(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function h0(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function cN(e,t){const n=[];for(const r of e.dataTypes)h0(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function Vf(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Zn.checkStrictMode)(e,t,e.opts.strictTypes)}class p0{constructor(t,n,r){if((0,xi.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Zn.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",g0(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,xi.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",se.default.errors))}result(t,n,r){this.failResult((0,K.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,K.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,K._)`${n} !== undefined && (${(0,K.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?ci.reportExtraError:ci.reportError)(this,this.def.error,n)}$dataError(){(0,ci.reportError)(this,this.def.$dataError||ci.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,ci.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=K.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=K.nil,n=K.nil){if(!this.$data)return;const{gen:r,schemaCode:s,schemaType:i,def:o}=this;r.if((0,K.or)((0,K._)`${s} === undefined`,n)),t!==K.nil&&r.assign(t,!0),(i.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==K.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:s,it:i}=this;return(0,K.or)(o(),a());function o(){if(r.length){if(!(n instanceof K.Name))throw new Error("ajv implementation error");const l=Array.isArray(r)?r:[r];return(0,K._)`${(0,nl.checkDataTypes)(l,n,i.opts.strictNumbers,nl.DataType.Wrong)}`}return K.nil}function a(){if(s.validateSchema){const l=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,K._)`!${l}(${n})`}return K.nil}}subschema(t,n){const r=(0,Ou.getSubschema)(this.it,t);(0,Ou.extendSubschemaData)(r,this.it,t),(0,Ou.extendSubschemaMode)(r,t);const s={...this.it,...r,items:void 0,props:void 0};return JR(s,n),s}mergeEvaluated(t,n){const{it:r,gen:s}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Zn.mergeEvaluated.props(s,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Zn.mergeEvaluated.items(s,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:s}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return s.if(n,()=>this.mergeEvaluated(t,K.Name)),!0}}_n.KeywordCxt=p0;function m0(e,t,n,r){const s=new p0(e,n,t);"code"in n?n.code(s,r):s.$data&&n.validate?(0,xi.funcKeywordCode)(s,n):"macro"in n?(0,xi.macroKeywordCode)(s,n):(n.compile||n.validate)&&(0,xi.funcKeywordCode)(s,n)}const dN=/^\/(?:[^~]|~0|~1)*$/,fN=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function g0(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let s,i;if(e==="")return se.default.rootData;if(e[0]==="/"){if(!dN.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,i=se.default.rootData}else{const u=fN.exec(e);if(!u)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+u[1];if(s=u[2],s==="#"){if(c>=t)throw new Error(l("property/index",c));return r[t-c]}if(c>t)throw new Error(l("data",c));if(i=n[t-c],!s)return i}let o=i;const a=s.split("/");for(const u of a)u&&(i=(0,K._)`${i}${(0,K.getProperty)((0,Zn.unescapeJsonPointer)(u))}`,o=(0,K._)`${o} && ${i}`);return o;function l(u,c){return`Cannot access ${u} ${c} levels up, current level is ${t}`}}_n.getData=g0;var $o={};Object.defineProperty($o,"__esModule",{value:!0});class hN extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}$o.default=hN;var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});const Cu=it;class pN extends Error{constructor(t,n,r,s){super(s||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,Cu.resolveUrl)(t,n,r),this.missingSchema=(0,Cu.normalizeId)((0,Cu.getFullPath)(t,this.missingRef))}}Gs.default=pN;var It={};Object.defineProperty(It,"__esModule",{value:!0});It.resolveSchema=It.getCompilingSchema=It.resolveRef=It.compileSchema=It.SchemaEnv=void 0;const ln=ae,mN=$o,Rr=On,pn=it,Fm=Z,gN=_n;class Cl{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,pn.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}It.SchemaEnv=Cl;function Hf(e){const t=y0.call(this,e);if(t)return t;const n=(0,pn.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new ln.CodeGen(this.scope,{es5:r,lines:s,ownProperties:i});let a;e.$async&&(a=o.scopeValue("Error",{ref:mN.default,code:(0,ln._)`require("ajv/dist/runtime/validation_error").default`}));const l=o.scopeName("validate");e.validateName=l;const u={gen:o,allErrors:this.opts.allErrors,data:Rr.default.data,parentData:Rr.default.parentData,parentDataProperty:Rr.default.parentDataProperty,dataNames:[Rr.default.data],dataPathArr:[ln.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,ln.stringify)(e.schema)}:{ref:e.schema}),validateName:l,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:ln.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ln._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,gN.validateFunctionCode)(u),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(Rr.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const v=new Function(`${Rr.default.self}`,`${Rr.default.scope}`,c)(this,this.scope.get());if(this.scope.value(l,{ref:v}),v.errors=null,v.schema=e.schema,v.schemaEnv=e,e.$async&&(v.$async=!0),this.opts.code.source===!0&&(v.source={validateName:l,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:g,items:_}=u;v.evaluated={props:g instanceof ln.Name?void 0:g,items:_ instanceof ln.Name?void 0:_,dynamicProps:g instanceof ln.Name,dynamicItems:_ instanceof ln.Name},v.source&&(v.source.evaluated=(0,ln.stringify)(v.evaluated))}return e.validate=v,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}It.compileSchema=Hf;function yN(e,t,n){var r;n=(0,pn.resolveUrl)(this.opts.uriResolver,t,n);const s=e.refs[n];if(s)return s;let i=wN.call(this,e,n);if(i===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(i=new Cl({schema:o,schemaId:a,root:e,baseId:t}))}if(i!==void 0)return e.refs[n]=vN.call(this,i)}It.resolveRef=yN;function vN(e){return(0,pn.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Hf.call(this,e)}function y0(e){for(const t of this._compilations)if(_N(t,e))return t}It.getCompilingSchema=y0;function _N(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function wN(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||xl.call(this,e,t)}function xl(e,t){const n=this.opts.uriResolver.parse(t),r=(0,pn._getFullPath)(this.opts.uriResolver,n);let s=(0,pn.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===s)return xu.call(this,n,e);const i=(0,pn.normalizeId)(r),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){const a=xl.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:xu.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||Hf.call(this,o),i===(0,pn.normalizeId)(t)){const{schema:a}=o,{schemaId:l}=this.opts,u=a[l];return u&&(s=(0,pn.resolveUrl)(this.opts.uriResolver,s,u)),new Cl({schema:a,schemaId:l,root:e,baseId:s})}return xu.call(this,n,o)}}It.resolveSchema=xl;const kN=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function xu(e,{baseId:t,schema:n,root:r}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const l=n[(0,Fm.unescapeFragment)(a)];if(l===void 0)return;n=l;const u=typeof n=="object"&&n[this.opts.schemaId];!kN.has(a)&&u&&(t=(0,pn.resolveUrl)(this.opts.uriResolver,t,u))}let i;if(typeof n!="boolean"&&n.$ref&&!(0,Fm.schemaHasRulesButRef)(n,this.RULES)){const a=(0,pn.resolveUrl)(this.opts.uriResolver,t,n.$ref);i=xl.call(this,r,a)}const{schemaId:o}=this.opts;if(i=i||new Cl({schema:n,schemaId:o,root:r,baseId:t}),i.schema!==i.root.schema)return i}const SN="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",$N="Meta-schema for $data reference (JSON AnySchema extension proposal)",EN="object",TN=["$data"],bN={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},PN=!1,IN={$id:SN,description:$N,type:EN,required:TN,properties:bN,additionalProperties:PN};var qf={},jl={exports:{}};const RN=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),v0=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function Bf(e){let t="",n=0,r=0;for(r=0;r<e.length;r++)if(n=e[r].charCodeAt(0),n!==48){if(!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r];break}for(r+=1;r<e.length;r++){if(n=e[r].charCodeAt(0),!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r]}return t}const NN=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function Vm(e){return e.length=0,!0}function ON(e,t,n){if(e.length){const r=Bf(e);if(r!=="")t.push(r);else return n.error=!0,!1;e.length=0}return!0}function CN(e){let t=0;const n={error:!1,address:"",zone:""},r=[],s=[];let i=!1,o=!1,a=ON;for(let l=0;l<e.length;l++){const u=e[l];if(!(u==="["||u==="]"))if(u===":"){if(i===!0&&(o=!0),!a(s,r,n))break;if(++t>7){n.error=!0;break}l>0&&e[l-1]===":"&&(i=!0),r.push(":");continue}else if(u==="%"){if(!a(s,r,n))break;a=Vm}else{s.push(u);continue}}return s.length&&(a===Vm?n.zone=s.join(""):o?r.push(s.join("")):r.push(Bf(s))),n.address=r.join(""),n}function _0(e){if(xN(e,":")<2)return{host:e,isIPV6:!1};const t=CN(e);if(t.error)return{host:e,isIPV6:!1};{let n=t.address,r=t.address;return t.zone&&(n+="%"+t.zone,r+="%25"+t.zone),{host:n,isIPV6:!0,escapedHost:r}}}function xN(e,t){let n=0;for(let r=0;r<e.length;r++)e[r]===t&&n++;return n}function jN(e){let t=e;const n=[];let r=-1,s=0;for(;s=t.length;){if(s===1){if(t===".")break;if(t==="/"){n.push("/");break}else{n.push(t);break}}else if(s===2){if(t[0]==="."){if(t[1]===".")break;if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&(t[1]==="."||t[1]==="/")){n.push("/");break}}else if(s===3&&t==="/.."){n.length!==0&&n.pop(),n.push("/");break}if(t[0]==="."){if(t[1]==="."){if(t[2]==="/"){t=t.slice(3);continue}}else if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&t[1]==="."){if(t[2]==="/"){t=t.slice(2);continue}else if(t[2]==="."&&t[3]==="/"){t=t.slice(3),n.length!==0&&n.pop();continue}}if((r=t.indexOf("/",1))===-1){n.push(t);break}else n.push(t.slice(0,r)),t=t.slice(r)}return n.join("")}function zN(e,t){const n=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=n(e.scheme)),e.userinfo!==void 0&&(e.userinfo=n(e.userinfo)),e.host!==void 0&&(e.host=n(e.host)),e.path!==void 0&&(e.path=n(e.path)),e.query!==void 0&&(e.query=n(e.query)),e.fragment!==void 0&&(e.fragment=n(e.fragment)),e}function AN(e){const t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let n=unescape(e.host);if(!v0(n)){const r=_0(n);r.isIPV6===!0?n=`[${r.escapedHost}]`:n=e.host}t.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}var w0={nonSimpleDomain:NN,recomposeAuthority:AN,normalizeComponentEncoding:zN,removeDotSegments:jN,isIPv4:v0,isUUID:RN,normalizeIPv6:_0,stringArrayToHexStripped:Bf};const{isUUID:MN}=w0,DN=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,LN=["http","https","ws","wss","urn","urn:uuid"];function ZN(e){return LN.indexOf(e)!==-1}function Wf(e){return e.secure===!0?!0:e.secure===!1?!1:e.scheme?e.scheme.length===3&&(e.scheme[0]==="w"||e.scheme[0]==="W")&&(e.scheme[1]==="s"||e.scheme[1]==="S")&&(e.scheme[2]==="s"||e.scheme[2]==="S"):!1}function k0(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function S0(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function UN(e){return e.secure=Wf(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function FN(e){if((e.port===(Wf(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,n]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=n,e.resourceName=void 0}return e.fragment=void 0,e}function VN(e,t){if(!e.path)return e.error="URN can not be parsed",e;const n=e.path.match(DN);if(n){const r=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];const s=`${r}:${t.nid||e.nid}`,i=Kf(s);e.path=void 0,i&&(e=i.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function HN(e,t){if(e.nid===void 0)throw new Error("URN without nid cannot be serialized");const n=t.scheme||e.scheme||"urn",r=e.nid.toLowerCase(),s=`${n}:${t.nid||r}`,i=Kf(s);i&&(e=i.serialize(e,t));const o=e,a=e.nss;return o.path=`${r||t.nid}:${a}`,t.skipEscape=!0,o}function qN(e,t){const n=e;return n.uuid=n.nss,n.nss=void 0,!t.tolerant&&(!n.uuid||!MN(n.uuid))&&(n.error=n.error||"UUID is not valid."),n}function BN(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const $0={scheme:"http",domainHost:!0,parse:k0,serialize:S0},WN={scheme:"https",domainHost:$0.domainHost,parse:k0,serialize:S0},ha={scheme:"ws",domainHost:!0,parse:UN,serialize:FN},KN={scheme:"wss",domainHost:ha.domainHost,parse:ha.parse,serialize:ha.serialize},GN={scheme:"urn",parse:VN,serialize:HN,skipNormalize:!0},QN={scheme:"urn:uuid",parse:qN,serialize:BN,skipNormalize:!0},rl={http:$0,https:WN,ws:ha,wss:KN,urn:GN,"urn:uuid":QN};Object.setPrototypeOf(rl,null);function Kf(e){return e&&(rl[e]||rl[e.toLowerCase()])||void 0}var JN={wsIsSecure:Wf,SCHEMES:rl,isValidSchemeName:ZN,getSchemeHandler:Kf};const{normalizeIPv6:YN,removeDotSegments:wi,recomposeAuthority:XN,normalizeComponentEncoding:Wo,isIPv4:eO,nonSimpleDomain:tO}=w0,{SCHEMES:nO,getSchemeHandler:E0}=JN;function rO(e,t){return typeof e=="string"?e=Pn(Bn(e,t),t):typeof e=="object"&&(e=Bn(Pn(e,t),t)),e}function sO(e,t,n){const r=n?Object.assign({scheme:"null"},n):{scheme:"null"},s=T0(Bn(e,r),Bn(t,r),r,!0);return r.skipEscape=!0,Pn(s,r)}function T0(e,t,n,r){const s={};return r||(e=Bn(Pn(e,n),n),t=Bn(Pn(t,n),n)),n=n||{},!n.tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=wi(t.path||""),s.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=wi(t.path||""),s.query=t.query):(t.path?(t.path[0]==="/"?s.path=wi(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?s.path="/"+t.path:e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path,s.path=wi(s.path)),s.query=t.query):(s.path=e.path,t.query!==void 0?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function iO(e,t,n){return typeof e=="string"?(e=unescape(e),e=Pn(Wo(Bn(e,n),!0),{...n,skipEscape:!0})):typeof e=="object"&&(e=Pn(Wo(e,!0),{...n,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Pn(Wo(Bn(t,n),!0),{...n,skipEscape:!0})):typeof t=="object"&&(t=Pn(Wo(t,!0),{...n,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Pn(e,t){const n={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},r=Object.assign({},t),s=[],i=E0(r.scheme||n.scheme);i&&i.serialize&&i.serialize(n,r),n.path!==void 0&&(r.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),n.scheme!==void 0&&(n.path=n.path.split("%3A").join(":")))),r.reference!=="suffix"&&n.scheme&&s.push(n.scheme,":");const o=XN(n);if(o!==void 0&&(r.reference!=="suffix"&&s.push("//"),s.push(o),n.path&&n.path[0]!=="/"&&s.push("/")),n.path!==void 0){let a=n.path;!r.absolutePath&&(!i||!i.absolutePath)&&(a=wi(a)),o===void 0&&a[0]==="/"&&a[1]==="/"&&(a="/%2F"+a.slice(2)),s.push(a)}return n.query!==void 0&&s.push("?",n.query),n.fragment!==void 0&&s.push("#",n.fragment),s.join("")}const oO=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Bn(e,t){const n=Object.assign({},t),r={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let s=!1;n.reference==="suffix"&&(n.scheme?e=n.scheme+":"+e:e="//"+e);const i=e.match(oO);if(i){if(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5]),r.host)if(eO(r.host)===!1){const l=YN(r.host);r.host=l.host.toLowerCase(),s=l.isIPV6}else s=!0;r.scheme===void 0&&r.userinfo===void 0&&r.host===void 0&&r.port===void 0&&r.query===void 0&&!r.path?r.reference="same-document":r.scheme===void 0?r.reference="relative":r.fragment===void 0?r.reference="absolute":r.reference="uri",n.reference&&n.reference!=="suffix"&&n.reference!==r.reference&&(r.error=r.error||"URI is not a "+n.reference+" reference.");const o=E0(n.scheme||r.scheme);if(!n.unicodeSupport&&(!o||!o.unicodeSupport)&&r.host&&(n.domainHost||o&&o.domainHost)&&s===!1&&tO(r.host))try{r.host=URL.domainToASCII(r.host.toLowerCase())}catch(a){r.error=r.error||"Host's domain name can not be converted to ASCII: "+a}(!o||o&&!o.skipNormalize)&&(e.indexOf("%")!==-1&&(r.scheme!==void 0&&(r.scheme=unescape(r.scheme)),r.host!==void 0&&(r.host=unescape(r.host))),r.path&&(r.path=escape(unescape(r.path))),r.fragment&&(r.fragment=encodeURI(decodeURIComponent(r.fragment)))),o&&o.parse&&o.parse(r,n)}else r.error=r.error||"URI can not be parsed.";return r}const Gf={SCHEMES:nO,normalize:rO,resolve:sO,resolveComponent:T0,equal:iO,serialize:Pn,parse:Bn};jl.exports=Gf;jl.exports.default=Gf;jl.exports.fastUri=Gf;var aO=jl.exports;Object.defineProperty(qf,"__esModule",{value:!0});const b0=aO;b0.code='require("ajv/dist/runtime/uri").default';qf.default=b0;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=_n;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=ae;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=$o,s=Gs,i=Jr,o=It,a=ae,l=it,u=Qe,c=Z,f=IN,m=qf,v=(C,$)=>new RegExp(C,$);v.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],_=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),w={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},d={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},h=200;function p(C){var $,O,T,y,S,P,H,J,we,ye,Ye,ts,Ml,Dl,Ll,Zl,Ul,Fl,Vl,Hl,ql,Bl,Wl,Kl,Gl;const Ys=C.strict,Ql=($=C.code)===null||$===void 0?void 0:$.optimize,Ph=Ql===!0||Ql===void 0?1:Ql||0,Ih=(T=(O=C.code)===null||O===void 0?void 0:O.regExp)!==null&&T!==void 0?T:v,U0=(y=C.uriResolver)!==null&&y!==void 0?y:m.default;return{strictSchema:(P=(S=C.strictSchema)!==null&&S!==void 0?S:Ys)!==null&&P!==void 0?P:!0,strictNumbers:(J=(H=C.strictNumbers)!==null&&H!==void 0?H:Ys)!==null&&J!==void 0?J:!0,strictTypes:(ye=(we=C.strictTypes)!==null&&we!==void 0?we:Ys)!==null&&ye!==void 0?ye:"log",strictTuples:(ts=(Ye=C.strictTuples)!==null&&Ye!==void 0?Ye:Ys)!==null&&ts!==void 0?ts:"log",strictRequired:(Dl=(Ml=C.strictRequired)!==null&&Ml!==void 0?Ml:Ys)!==null&&Dl!==void 0?Dl:!1,code:C.code?{...C.code,optimize:Ph,regExp:Ih}:{optimize:Ph,regExp:Ih},loopRequired:(Ll=C.loopRequired)!==null&&Ll!==void 0?Ll:h,loopEnum:(Zl=C.loopEnum)!==null&&Zl!==void 0?Zl:h,meta:(Ul=C.meta)!==null&&Ul!==void 0?Ul:!0,messages:(Fl=C.messages)!==null&&Fl!==void 0?Fl:!0,inlineRefs:(Vl=C.inlineRefs)!==null&&Vl!==void 0?Vl:!0,schemaId:(Hl=C.schemaId)!==null&&Hl!==void 0?Hl:"$id",addUsedSchema:(ql=C.addUsedSchema)!==null&&ql!==void 0?ql:!0,validateSchema:(Bl=C.validateSchema)!==null&&Bl!==void 0?Bl:!0,validateFormats:(Wl=C.validateFormats)!==null&&Wl!==void 0?Wl:!0,unicodeRegExp:(Kl=C.unicodeRegExp)!==null&&Kl!==void 0?Kl:!0,int32range:(Gl=C.int32range)!==null&&Gl!==void 0?Gl:!0,uriResolver:U0}}class k{constructor($={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,$=this.opts={...$,...p($)};const{es5:O,lines:T}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:_,es5:O,lines:T}),this.logger=X($.logger);const y=$.validateFormats;$.validateFormats=!1,this.RULES=(0,i.getRules)(),E.call(this,w,$,"NOT SUPPORTED"),E.call(this,d,$,"DEPRECATED","warn"),this._metaOpts=ee.call(this),$.formats&&z.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),$.keywords&&ne.call(this,$.keywords),typeof $.meta=="object"&&this.addMetaSchema($.meta),N.call(this),$.validateFormats=y}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:$,meta:O,schemaId:T}=this.opts;let y=f;T==="id"&&(y={...f},y.id=y.$id,delete y.$id),O&&$&&this.addMetaSchema(y,y[T],!1)}defaultMeta(){const{meta:$,schemaId:O}=this.opts;return this.opts.defaultMeta=typeof $=="object"?$[O]||$:void 0}validate($,O){let T;if(typeof $=="string"){if(T=this.getSchema($),!T)throw new Error(`no schema with key or ref "${$}"`)}else T=this.compile($);const y=T(O);return"$async"in T||(this.errors=T.errors),y}compile($,O){const T=this._addSchema($,O);return T.validate||this._compileSchemaEnv(T)}compileAsync($,O){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:T}=this.opts;return y.call(this,$,O);async function y(ye,Ye){await S.call(this,ye.$schema);const ts=this._addSchema(ye,Ye);return ts.validate||P.call(this,ts)}async function S(ye){ye&&!this.getSchema(ye)&&await y.call(this,{$ref:ye},!0)}async function P(ye){try{return this._compileSchemaEnv(ye)}catch(Ye){if(!(Ye instanceof s.default))throw Ye;return H.call(this,Ye),await J.call(this,Ye.missingSchema),P.call(this,ye)}}function H({missingSchema:ye,missingRef:Ye}){if(this.refs[ye])throw new Error(`AnySchema ${ye} is loaded but ${Ye} cannot be resolved`)}async function J(ye){const Ye=await we.call(this,ye);this.refs[ye]||await S.call(this,Ye.$schema),this.refs[ye]||this.addSchema(Ye,ye,O)}async function we(ye){const Ye=this._loading[ye];if(Ye)return Ye;try{return await(this._loading[ye]=T(ye))}finally{delete this._loading[ye]}}}addSchema($,O,T,y=this.opts.validateSchema){if(Array.isArray($)){for(const P of $)this.addSchema(P,void 0,T,y);return this}let S;if(typeof $=="object"){const{schemaId:P}=this.opts;if(S=$[P],S!==void 0&&typeof S!="string")throw new Error(`schema ${P} must be string`)}return O=(0,l.normalizeId)(O||S),this._checkUnique(O),this.schemas[O]=this._addSchema($,T,O,y,!0),this}addMetaSchema($,O,T=this.opts.validateSchema){return this.addSchema($,O,!0,T),this}validateSchema($,O){if(typeof $=="boolean")return!0;let T;if(T=$.$schema,T!==void 0&&typeof T!="string")throw new Error("$schema must be a string");if(T=T||this.opts.defaultMeta||this.defaultMeta(),!T)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const y=this.validate(T,$);if(!y&&O){const S="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(S);else throw new Error(S)}return y}getSchema($){let O;for(;typeof(O=R.call(this,$))=="string";)$=O;if(O===void 0){const{schemaId:T}=this.opts,y=new o.SchemaEnv({schema:{},schemaId:T});if(O=o.resolveSchema.call(this,y,$),!O)return;this.refs[$]=O}return O.validate||this._compileSchemaEnv(O)}removeSchema($){if($ instanceof RegExp)return this._removeAllSchemas(this.schemas,$),this._removeAllSchemas(this.refs,$),this;switch(typeof $){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const O=R.call(this,$);return typeof O=="object"&&this._cache.delete(O.schema),delete this.schemas[$],delete this.refs[$],this}case"object":{const O=$;this._cache.delete(O);let T=$[this.opts.schemaId];return T&&(T=(0,l.normalizeId)(T),delete this.schemas[T],delete this.refs[T]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary($){for(const O of $)this.addKeyword(O);return this}addKeyword($,O){let T;if(typeof $=="string")T=$,typeof O=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),O.keyword=T);else if(typeof $=="object"&&O===void 0){if(O=$,T=O.keyword,Array.isArray(T)&&!T.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(D.call(this,T,O),!O)return(0,c.eachItem)(T,S=>Fe.call(this,S)),this;re.call(this,O);const y={...O,type:(0,u.getJSONTypes)(O.type),schemaType:(0,u.getJSONTypes)(O.schemaType)};return(0,c.eachItem)(T,y.type.length===0?S=>Fe.call(this,S,y):S=>y.type.forEach(P=>Fe.call(this,S,y,P))),this}getKeyword($){const O=this.RULES.all[$];return typeof O=="object"?O.definition:!!O}removeKeyword($){const{RULES:O}=this;delete O.keywords[$],delete O.all[$];for(const T of O.rules){const y=T.rules.findIndex(S=>S.keyword===$);y>=0&&T.rules.splice(y,1)}return this}addFormat($,O){return typeof O=="string"&&(O=new RegExp(O)),this.formats[$]=O,this}errorsText($=this.errors,{separator:O=", ",dataVar:T="data"}={}){return!$||$.length===0?"No errors":$.map(y=>`${T}${y.instancePath} ${y.message}`).reduce((y,S)=>y+O+S)}$dataMetaSchema($,O){const T=this.RULES.all;$=JSON.parse(JSON.stringify($));for(const y of O){const S=y.split("/").slice(1);let P=$;for(const H of S)P=P[H];for(const H in T){const J=T[H];if(typeof J!="object")continue;const{$data:we}=J.definition,ye=P[H];we&&ye&&(P[H]=Y(ye))}}return $}_removeAllSchemas($,O){for(const T in $){const y=$[T];(!O||O.test(T))&&(typeof y=="string"?delete $[T]:y&&!y.meta&&(this._cache.delete(y.schema),delete $[T]))}}_addSchema($,O,T,y=this.opts.validateSchema,S=this.opts.addUsedSchema){let P;const{schemaId:H}=this.opts;if(typeof $=="object")P=$[H];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof $!="boolean")throw new Error("schema must be object or boolean")}let J=this._cache.get($);if(J!==void 0)return J;T=(0,l.normalizeId)(P||T);const we=l.getSchemaRefs.call(this,$,T);return J=new o.SchemaEnv({schema:$,schemaId:H,meta:O,baseId:T,localRefs:we}),this._cache.set(J.schema,J),S&&!T.startsWith("#")&&(T&&this._checkUnique(T),this.refs[T]=J),y&&this.validateSchema($,!0),J}_checkUnique($){if(this.schemas[$]||this.refs[$])throw new Error(`schema with key or id "${$}" already exists`)}_compileSchemaEnv($){if($.meta?this._compileMetaSchema($):o.compileSchema.call(this,$),!$.validate)throw new Error("ajv implementation error");return $.validate}_compileMetaSchema($){const O=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,$)}finally{this.opts=O}}}k.ValidationError=r.default,k.MissingRefError=s.default,e.default=k;function E(C,$,O,T="error"){for(const y in C){const S=y;S in $&&this.logger[T](`${O}: option ${y}. ${C[S]}`)}}function R(C){return C=(0,l.normalizeId)(C),this.schemas[C]||this.refs[C]}function N(){const C=this.opts.schemas;if(C)if(Array.isArray(C))this.addSchema(C);else for(const $ in C)this.addSchema(C[$],$)}function z(){for(const C in this.opts.formats){const $=this.opts.formats[C];$&&this.addFormat(C,$)}}function ne(C){if(Array.isArray(C)){this.addVocabulary(C);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const $ in C){const O=C[$];O.keyword||(O.keyword=$),this.addKeyword(O)}}function ee(){const C={...this.opts};for(const $ of g)delete C[$];return C}const V={log(){},warn(){},error(){}};function X(C){if(C===!1)return V;if(C===void 0)return console;if(C.log&&C.warn&&C.error)return C;throw new Error("logger must implement log, warn and error methods")}const fe=/^[a-z_$][a-z0-9_$:-]*$/i;function D(C,$){const{RULES:O}=this;if((0,c.eachItem)(C,T=>{if(O.keywords[T])throw new Error(`Keyword ${T} is already defined`);if(!fe.test(T))throw new Error(`Keyword ${T} has invalid name`)}),!!$&&$.$data&&!("code"in $||"validate"in $))throw new Error('$data keyword must have "code" or "validate" function')}function Fe(C,$,O){var T;const y=$==null?void 0:$.post;if(O&&y)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:S}=this;let P=y?S.post:S.rules.find(({type:J})=>J===O);if(P||(P={type:O,rules:[]},S.rules.push(P)),S.keywords[C]=!0,!$)return;const H={keyword:C,definition:{...$,type:(0,u.getJSONTypes)($.type),schemaType:(0,u.getJSONTypes)($.schemaType)}};$.before?ft.call(this,P,H,$.before):P.rules.push(H),S.all[C]=H,(T=$.implements)===null||T===void 0||T.forEach(J=>this.addKeyword(J))}function ft(C,$,O){const T=C.rules.findIndex(y=>y.keyword===O);T>=0?C.rules.splice(T,0,$):(C.rules.push($),this.logger.warn(`rule ${O} is not defined`))}function re(C){let{metaSchema:$}=C;$!==void 0&&(C.$data&&this.opts.$data&&($=Y($)),C.validateSchema=this.compile($,!0))}const M={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Y(C){return{anyOf:[C,M]}}})(L_);var Qf={},Jf={},Yf={};Object.defineProperty(Yf,"__esModule",{value:!0});const lO={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Yf.default=lO;var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.callRef=Yr.getValidate=void 0;const uO=Gs,Hm=ue,bt=ae,ss=On,qm=It,Ko=Z,cO={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:l}=r,{root:u}=i;if((n==="#"||n==="#/")&&s===u.baseId)return f();const c=qm.resolveRef.call(l,u,s,n);if(c===void 0)throw new uO.default(r.opts.uriResolver,s,n);if(c instanceof qm.SchemaEnv)return m(c);return v(c);function f(){if(i===u)return pa(e,o,i,i.$async);const g=t.scopeValue("root",{ref:u});return pa(e,(0,bt._)`${g}.validate`,u,u.$async)}function m(g){const _=P0(e,g);pa(e,_,g,g.$async)}function v(g){const _=t.scopeValue("schema",a.code.source===!0?{ref:g,code:(0,bt.stringify)(g)}:{ref:g}),w=t.name("valid"),d=e.subschema({schema:g,dataTypes:[],schemaPath:bt.nil,topSchemaRef:_,errSchemaPath:n},w);e.mergeEvaluated(d),e.ok(w)}}};function P0(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,bt._)`${n.scopeValue("wrapper",{ref:t})}.validate`}Yr.getValidate=P0;function pa(e,t,n,r){const{gen:s,it:i}=e,{allErrors:o,schemaEnv:a,opts:l}=i,u=l.passContext?ss.default.this:bt.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const g=s.let("valid");s.try(()=>{s.code((0,bt._)`await ${(0,Hm.callValidateCode)(e,t,u)}`),v(t),o||s.assign(g,!0)},_=>{s.if((0,bt._)`!(${_} instanceof ${i.ValidationError})`,()=>s.throw(_)),m(_),o||s.assign(g,!1)}),e.ok(g)}function f(){e.result((0,Hm.callValidateCode)(e,t,u),()=>v(t),()=>m(t))}function m(g){const _=(0,bt._)`${g}.errors`;s.assign(ss.default.vErrors,(0,bt._)`${ss.default.vErrors} === null ? ${_} : ${ss.default.vErrors}.concat(${_})`),s.assign(ss.default.errors,(0,bt._)`${ss.default.vErrors}.length`)}function v(g){var _;if(!i.opts.unevaluated)return;const w=(_=n==null?void 0:n.validate)===null||_===void 0?void 0:_.evaluated;if(i.props!==!0)if(w&&!w.dynamicProps)w.props!==void 0&&(i.props=Ko.mergeEvaluated.props(s,w.props,i.props));else{const d=s.var("props",(0,bt._)`${g}.evaluated.props`);i.props=Ko.mergeEvaluated.props(s,d,i.props,bt.Name)}if(i.items!==!0)if(w&&!w.dynamicItems)w.items!==void 0&&(i.items=Ko.mergeEvaluated.items(s,w.items,i.items));else{const d=s.var("items",(0,bt._)`${g}.evaluated.items`);i.items=Ko.mergeEvaluated.items(s,d,i.items,bt.Name)}}}Yr.callRef=pa;Yr.default=cO;Object.defineProperty(Jf,"__esModule",{value:!0});const dO=Yf,fO=Yr,hO=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",dO.default,fO.default];Jf.default=hO;var Xf={},eh={};Object.defineProperty(eh,"__esModule",{value:!0});const sl=ae,Jn=sl.operators,il={maximum:{okStr:"<=",ok:Jn.LTE,fail:Jn.GT},minimum:{okStr:">=",ok:Jn.GTE,fail:Jn.LT},exclusiveMaximum:{okStr:"<",ok:Jn.LT,fail:Jn.GTE},exclusiveMinimum:{okStr:">",ok:Jn.GT,fail:Jn.LTE}},pO={message:({keyword:e,schemaCode:t})=>(0,sl.str)`must be ${il[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,sl._)`{comparison: ${il[e].okStr}, limit: ${t}}`},mO={keyword:Object.keys(il),type:"number",schemaType:"number",$data:!0,error:pO,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,sl._)`${n} ${il[t].fail} ${r} || isNaN(${n})`)}};eh.default=mO;var th={};Object.defineProperty(th,"__esModule",{value:!0});const ji=ae,gO={message:({schemaCode:e})=>(0,ji.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,ji._)`{multipleOf: ${e}}`},yO={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:gO,code(e){const{gen:t,data:n,schemaCode:r,it:s}=e,i=s.opts.multipleOfPrecision,o=t.let("res"),a=i?(0,ji._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,ji._)`${o} !== parseInt(${o})`;e.fail$data((0,ji._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};th.default=yO;var nh={},rh={};Object.defineProperty(rh,"__esModule",{value:!0});function I0(e){const t=e.length;let n=0,r=0,s;for(;r<t;)n++,s=e.charCodeAt(r++),s>=55296&&s<=56319&&r<t&&(s=e.charCodeAt(r),(s&64512)===56320&&r++);return n}rh.default=I0;I0.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(nh,"__esModule",{value:!0});const jr=ae,vO=Z,_O=rh,wO={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,jr.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,jr._)`{limit: ${e}}`},kO={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:wO,code(e){const{keyword:t,data:n,schemaCode:r,it:s}=e,i=t==="maxLength"?jr.operators.GT:jr.operators.LT,o=s.opts.unicode===!1?(0,jr._)`${n}.length`:(0,jr._)`${(0,vO.useFunc)(e.gen,_O.default)}(${n})`;e.fail$data((0,jr._)`${o} ${i} ${r}`)}};nh.default=kO;var sh={};Object.defineProperty(sh,"__esModule",{value:!0});const SO=ue,ol=ae,$O={message:({schemaCode:e})=>(0,ol.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,ol._)`{pattern: ${e}}`},EO={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:$O,code(e){const{data:t,$data:n,schema:r,schemaCode:s,it:i}=e,o=i.opts.unicodeRegExp?"u":"",a=n?(0,ol._)`(new RegExp(${s}, ${o}))`:(0,SO.usePattern)(e,r);e.fail$data((0,ol._)`!${a}.test(${t})`)}};sh.default=EO;var ih={};Object.defineProperty(ih,"__esModule",{value:!0});const zi=ae,TO={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,zi.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,zi._)`{limit: ${e}}`},bO={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:TO,code(e){const{keyword:t,data:n,schemaCode:r}=e,s=t==="maxProperties"?zi.operators.GT:zi.operators.LT;e.fail$data((0,zi._)`Object.keys(${n}).length ${s} ${r}`)}};ih.default=bO;var oh={};Object.defineProperty(oh,"__esModule",{value:!0});const di=ue,Ai=ae,PO=Z,IO={message:({params:{missingProperty:e}})=>(0,Ai.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Ai._)`{missingProperty: ${e}}`},RO={keyword:"required",type:"object",schemaType:"array",$data:!0,error:IO,code(e){const{gen:t,schema:n,schemaCode:r,data:s,$data:i,it:o}=e,{opts:a}=o;if(!i&&n.length===0)return;const l=n.length>=a.loopRequired;if(o.allErrors?u():c(),a.strictRequired){const v=e.parentSchema.properties,{definedProperties:g}=e.it;for(const _ of n)if((v==null?void 0:v[_])===void 0&&!g.has(_)){const w=o.schemaEnv.baseId+o.errSchemaPath,d=`required property "${_}" is not defined at "${w}" (strictRequired)`;(0,PO.checkStrictMode)(o,d,o.opts.strictRequired)}}function u(){if(l||i)e.block$data(Ai.nil,f);else for(const v of n)(0,di.checkReportMissingProp)(e,v)}function c(){const v=t.let("missing");if(l||i){const g=t.let("valid",!0);e.block$data(g,()=>m(v,g)),e.ok(g)}else t.if((0,di.checkMissingProp)(e,n,v)),(0,di.reportMissingProp)(e,v),t.else()}function f(){t.forOf("prop",r,v=>{e.setParams({missingProperty:v}),t.if((0,di.noPropertyInData)(t,s,v,a.ownProperties),()=>e.error())})}function m(v,g){e.setParams({missingProperty:v}),t.forOf(v,r,()=>{t.assign(g,(0,di.propertyInData)(t,s,v,a.ownProperties)),t.if((0,Ai.not)(g),()=>{e.error(),t.break()})},Ai.nil)}}};oh.default=RO;var ah={};Object.defineProperty(ah,"__esModule",{value:!0});const Mi=ae,NO={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,Mi.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,Mi._)`{limit: ${e}}`},OO={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:NO,code(e){const{keyword:t,data:n,schemaCode:r}=e,s=t==="maxItems"?Mi.operators.GT:Mi.operators.LT;e.fail$data((0,Mi._)`${n}.length ${s} ${r}`)}};ah.default=OO;var lh={},Eo={};Object.defineProperty(Eo,"__esModule",{value:!0});const R0=t0;R0.code='require("ajv/dist/runtime/equal").default';Eo.default=R0;Object.defineProperty(lh,"__esModule",{value:!0});const ju=Qe,rt=ae,CO=Z,xO=Eo,jO={message:({params:{i:e,j:t}})=>(0,rt.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,rt._)`{i: ${e}, j: ${t}}`},zO={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:jO,code(e){const{gen:t,data:n,$data:r,schema:s,parentSchema:i,schemaCode:o,it:a}=e;if(!r&&!s)return;const l=t.let("valid"),u=i.items?(0,ju.getSchemaTypes)(i.items):[];e.block$data(l,c,(0,rt._)`${o} === false`),e.ok(l);function c(){const g=t.let("i",(0,rt._)`${n}.length`),_=t.let("j");e.setParams({i:g,j:_}),t.assign(l,!0),t.if((0,rt._)`${g} > 1`,()=>(f()?m:v)(g,_))}function f(){return u.length>0&&!u.some(g=>g==="object"||g==="array")}function m(g,_){const w=t.name("item"),d=(0,ju.checkDataTypes)(u,w,a.opts.strictNumbers,ju.DataType.Wrong),h=t.const("indices",(0,rt._)`{}`);t.for((0,rt._)`;${g}--;`,()=>{t.let(w,(0,rt._)`${n}[${g}]`),t.if(d,(0,rt._)`continue`),u.length>1&&t.if((0,rt._)`typeof ${w} == "string"`,(0,rt._)`${w} += "_"`),t.if((0,rt._)`typeof ${h}[${w}] == "number"`,()=>{t.assign(_,(0,rt._)`${h}[${w}]`),e.error(),t.assign(l,!1).break()}).code((0,rt._)`${h}[${w}] = ${g}`)})}function v(g,_){const w=(0,CO.useFunc)(t,xO.default),d=t.name("outer");t.label(d).for((0,rt._)`;${g}--;`,()=>t.for((0,rt._)`${_} = ${g}; ${_}--;`,()=>t.if((0,rt._)`${w}(${n}[${g}], ${n}[${_}])`,()=>{e.error(),t.assign(l,!1).break(d)})))}}};lh.default=zO;var uh={};Object.defineProperty(uh,"__esModule",{value:!0});const nd=ae,AO=Z,MO=Eo,DO={message:"must be equal to constant",params:({schemaCode:e})=>(0,nd._)`{allowedValue: ${e}}`},LO={keyword:"const",$data:!0,error:DO,code(e){const{gen:t,data:n,$data:r,schemaCode:s,schema:i}=e;r||i&&typeof i=="object"?e.fail$data((0,nd._)`!${(0,AO.useFunc)(t,MO.default)}(${n}, ${s})`):e.fail((0,nd._)`${i} !== ${n}`)}};uh.default=LO;var ch={};Object.defineProperty(ch,"__esModule",{value:!0});const ki=ae,ZO=Z,UO=Eo,FO={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,ki._)`{allowedValues: ${e}}`},VO={keyword:"enum",schemaType:"array",$data:!0,error:FO,code(e){const{gen:t,data:n,$data:r,schema:s,schemaCode:i,it:o}=e;if(!r&&s.length===0)throw new Error("enum must have non-empty array");const a=s.length>=o.opts.loopEnum;let l;const u=()=>l??(l=(0,ZO.useFunc)(t,UO.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const v=t.const("vSchema",i);c=(0,ki.or)(...s.map((g,_)=>m(v,_)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",i,v=>t.if((0,ki._)`${u()}(${n}, ${v})`,()=>t.assign(c,!0).break()))}function m(v,g){const _=s[g];return typeof _=="object"&&_!==null?(0,ki._)`${u()}(${n}, ${v}[${g}])`:(0,ki._)`${n} === ${_}`}}};ch.default=VO;Object.defineProperty(Xf,"__esModule",{value:!0});const HO=eh,qO=th,BO=nh,WO=sh,KO=ih,GO=oh,QO=ah,JO=lh,YO=uh,XO=ch,eC=[HO.default,qO.default,BO.default,WO.default,KO.default,GO.default,QO.default,JO.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},YO.default,XO.default];Xf.default=eC;var dh={},Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.validateAdditionalItems=void 0;const zr=ae,rd=Z,tC={message:({params:{len:e}})=>(0,zr.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,zr._)`{limit: ${e}}`},nC={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:tC,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,rd.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}N0(e,r)}};function N0(e,t){const{gen:n,schema:r,data:s,keyword:i,it:o}=e;o.items=!0;const a=n.const("len",(0,zr._)`${s}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,zr._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,rd.alwaysValidSchema)(o,r)){const u=n.var("valid",(0,zr._)`${a} <= ${t.length}`);n.if((0,zr.not)(u),()=>l(u)),e.ok(u)}function l(u){n.forRange("i",t.length,a,c=>{e.subschema({keyword:i,dataProp:c,dataPropType:rd.Type.Num},u),o.allErrors||n.if((0,zr.not)(u),()=>n.break())})}}Qs.validateAdditionalItems=N0;Qs.default=nC;var fh={},Js={};Object.defineProperty(Js,"__esModule",{value:!0});Js.validateTuple=void 0;const Bm=ae,ma=Z,rC=ue,sC={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return O0(e,"additionalItems",t);n.items=!0,!(0,ma.alwaysValidSchema)(n,t)&&e.ok((0,rC.validateArray)(e))}};function O0(e,t,n=e.schema){const{gen:r,parentSchema:s,data:i,keyword:o,it:a}=e;c(s),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=ma.mergeEvaluated.items(r,n.length,a.items));const l=r.name("valid"),u=r.const("len",(0,Bm._)`${i}.length`);n.forEach((f,m)=>{(0,ma.alwaysValidSchema)(a,f)||(r.if((0,Bm._)`${u} > ${m}`,()=>e.subschema({keyword:o,schemaProp:m,dataProp:m},l)),e.ok(l))});function c(f){const{opts:m,errSchemaPath:v}=a,g=n.length,_=g===f.minItems&&(g===f.maxItems||f[t]===!1);if(m.strictTuples&&!_){const w=`"${o}" is ${g}-tuple, but minItems or maxItems/${t} are not specified or different at path "${v}"`;(0,ma.checkStrictMode)(a,w,m.strictTuples)}}}Js.validateTuple=O0;Js.default=sC;Object.defineProperty(fh,"__esModule",{value:!0});const iC=Js,oC={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,iC.validateTuple)(e,"items")};fh.default=oC;var hh={};Object.defineProperty(hh,"__esModule",{value:!0});const Wm=ae,aC=Z,lC=ue,uC=Qs,cC={message:({params:{len:e}})=>(0,Wm.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Wm._)`{limit: ${e}}`},dC={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:cC,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:s}=n;r.items=!0,!(0,aC.alwaysValidSchema)(r,t)&&(s?(0,uC.validateAdditionalItems)(e,s):e.ok((0,lC.validateArray)(e)))}};hh.default=dC;var ph={};Object.defineProperty(ph,"__esModule",{value:!0});const Kt=ae,Go=Z,fC={message:({params:{min:e,max:t}})=>t===void 0?(0,Kt.str)`must contain at least ${e} valid item(s)`:(0,Kt.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Kt._)`{minContains: ${e}}`:(0,Kt._)`{minContains: ${e}, maxContains: ${t}}`},hC={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:fC,code(e){const{gen:t,schema:n,parentSchema:r,data:s,it:i}=e;let o,a;const{minContains:l,maxContains:u}=r;i.opts.next?(o=l===void 0?1:l,a=u):o=1;const c=t.const("len",(0,Kt._)`${s}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,Go.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Go.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Go.alwaysValidSchema)(i,n)){let _=(0,Kt._)`${c} >= ${o}`;a!==void 0&&(_=(0,Kt._)`${_} && ${c} <= ${a}`),e.pass(_);return}i.items=!0;const f=t.name("valid");a===void 0&&o===1?v(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Kt._)`${s}.length > 0`,m)):(t.let(f,!1),m()),e.result(f,()=>e.reset());function m(){const _=t.name("_valid"),w=t.let("count",0);v(_,()=>t.if(_,()=>g(w)))}function v(_,w){t.forRange("i",0,c,d=>{e.subschema({keyword:"contains",dataProp:d,dataPropType:Go.Type.Num,compositeRule:!0},_),w()})}function g(_){t.code((0,Kt._)`${_}++`),a===void 0?t.if((0,Kt._)`${_} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Kt._)`${_} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Kt._)`${_} >= ${o}`,()=>t.assign(f,!0)))}}};ph.default=hC;var C0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=ae,n=Z,r=ue;e.error={message:({params:{property:l,depsCount:u,deps:c}})=>{const f=u===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${l} is present`},params:({params:{property:l,depsCount:u,deps:c,missingProperty:f}})=>(0,t._)`{property: ${l},
    missingProperty: ${f},
    depsCount: ${u},
    deps: ${c}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(l){const[u,c]=i(l);o(l,u),a(l,c)}};function i({schema:l}){const u={},c={};for(const f in l){if(f==="__proto__")continue;const m=Array.isArray(l[f])?u:c;m[f]=l[f]}return[u,c]}function o(l,u=l.schema){const{gen:c,data:f,it:m}=l;if(Object.keys(u).length===0)return;const v=c.let("missing");for(const g in u){const _=u[g];if(_.length===0)continue;const w=(0,r.propertyInData)(c,f,g,m.opts.ownProperties);l.setParams({property:g,depsCount:_.length,deps:_.join(", ")}),m.allErrors?c.if(w,()=>{for(const d of _)(0,r.checkReportMissingProp)(l,d)}):(c.if((0,t._)`${w} && (${(0,r.checkMissingProp)(l,_,v)})`),(0,r.reportMissingProp)(l,v),c.else())}}e.validatePropertyDeps=o;function a(l,u=l.schema){const{gen:c,data:f,keyword:m,it:v}=l,g=c.name("valid");for(const _ in u)(0,n.alwaysValidSchema)(v,u[_])||(c.if((0,r.propertyInData)(c,f,_,v.opts.ownProperties),()=>{const w=l.subschema({keyword:m,schemaProp:_},g);l.mergeValidEvaluated(w,g)},()=>c.var(g,!0)),l.ok(g))}e.validateSchemaDeps=a,e.default=s})(C0);var mh={};Object.defineProperty(mh,"__esModule",{value:!0});const x0=ae,pC=Z,mC={message:"property name must be valid",params:({params:e})=>(0,x0._)`{propertyName: ${e.propertyName}}`},gC={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:mC,code(e){const{gen:t,schema:n,data:r,it:s}=e;if((0,pC.alwaysValidSchema)(s,n))return;const i=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),t.if((0,x0.not)(i),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(i)}};mh.default=gC;var zl={};Object.defineProperty(zl,"__esModule",{value:!0});const Qo=ue,cn=ae,yC=On,Jo=Z,vC={message:"must NOT have additional properties",params:({params:e})=>(0,cn._)`{additionalProperty: ${e.additionalProperty}}`},_C={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:vC,code(e){const{gen:t,schema:n,parentSchema:r,data:s,errsCount:i,it:o}=e;if(!i)throw new Error("ajv implementation error");const{allErrors:a,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,Jo.alwaysValidSchema)(o,n))return;const u=(0,Qo.allSchemaProperties)(r.properties),c=(0,Qo.allSchemaProperties)(r.patternProperties);f(),e.ok((0,cn._)`${i} === ${yC.default.errors}`);function f(){t.forIn("key",s,w=>{!u.length&&!c.length?g(w):t.if(m(w),()=>g(w))})}function m(w){let d;if(u.length>8){const h=(0,Jo.schemaRefOrVal)(o,r.properties,"properties");d=(0,Qo.isOwnProperty)(t,h,w)}else u.length?d=(0,cn.or)(...u.map(h=>(0,cn._)`${w} === ${h}`)):d=cn.nil;return c.length&&(d=(0,cn.or)(d,...c.map(h=>(0,cn._)`${(0,Qo.usePattern)(e,h)}.test(${w})`))),(0,cn.not)(d)}function v(w){t.code((0,cn._)`delete ${s}[${w}]`)}function g(w){if(l.removeAdditional==="all"||l.removeAdditional&&n===!1){v(w);return}if(n===!1){e.setParams({additionalProperty:w}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,Jo.alwaysValidSchema)(o,n)){const d=t.name("valid");l.removeAdditional==="failing"?(_(w,d,!1),t.if((0,cn.not)(d),()=>{e.reset(),v(w)})):(_(w,d),a||t.if((0,cn.not)(d),()=>t.break()))}}function _(w,d,h){const p={keyword:"additionalProperties",dataProp:w,dataPropType:Jo.Type.Str};h===!1&&Object.assign(p,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(p,d)}}};zl.default=_C;var gh={};Object.defineProperty(gh,"__esModule",{value:!0});const wC=_n,Km=ue,zu=Z,Gm=zl,kC={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:s,it:i}=e;i.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Gm.default.code(new wC.KeywordCxt(i,Gm.default,"additionalProperties"));const o=(0,Km.allSchemaProperties)(n);for(const f of o)i.definedProperties.add(f);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=zu.mergeEvaluated.props(t,(0,zu.toHash)(o),i.props));const a=o.filter(f=>!(0,zu.alwaysValidSchema)(i,n[f]));if(a.length===0)return;const l=t.name("valid");for(const f of a)u(f)?c(f):(t.if((0,Km.propertyInData)(t,s,f,i.opts.ownProperties)),c(f),i.allErrors||t.else().var(l,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(l);function u(f){return i.opts.useDefaults&&!i.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},l)}}};gh.default=kC;var yh={};Object.defineProperty(yh,"__esModule",{value:!0});const Qm=ue,Yo=ae,Jm=Z,Ym=Z,SC={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:s,it:i}=e,{opts:o}=i,a=(0,Qm.allSchemaProperties)(n),l=a.filter(_=>(0,Jm.alwaysValidSchema)(i,n[_]));if(a.length===0||l.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;const u=o.strictSchema&&!o.allowMatchingProperties&&s.properties,c=t.name("valid");i.props!==!0&&!(i.props instanceof Yo.Name)&&(i.props=(0,Ym.evaluatedPropsToName)(t,i.props));const{props:f}=i;m();function m(){for(const _ of a)u&&v(_),i.allErrors?g(_):(t.var(c,!0),g(_),t.if(c))}function v(_){for(const w in u)new RegExp(_).test(w)&&(0,Jm.checkStrictMode)(i,`property ${w} matches pattern ${_} (use allowMatchingProperties)`)}function g(_){t.forIn("key",r,w=>{t.if((0,Yo._)`${(0,Qm.usePattern)(e,_)}.test(${w})`,()=>{const d=l.includes(_);d||e.subschema({keyword:"patternProperties",schemaProp:_,dataProp:w,dataPropType:Ym.Type.Str},c),i.opts.unevaluated&&f!==!0?t.assign((0,Yo._)`${f}[${w}]`,!0):!d&&!i.allErrors&&t.if((0,Yo.not)(c),()=>t.break())})})}}};yh.default=SC;var vh={};Object.defineProperty(vh,"__esModule",{value:!0});const $C=Z,EC={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,$C.alwaysValidSchema)(r,n)){e.fail();return}const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};vh.default=EC;var _h={};Object.defineProperty(_h,"__esModule",{value:!0});const TC=ue,bC={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:TC.validateUnion,error:{message:"must match a schema in anyOf"}};_h.default=bC;var wh={};Object.defineProperty(wh,"__esModule",{value:!0});const ga=ae,PC=Z,IC={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,ga._)`{passingSchemas: ${e.passing}}`},RC={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:IC,code(e){const{gen:t,schema:n,parentSchema:r,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(s.opts.discriminator&&r.discriminator)return;const i=n,o=t.let("valid",!1),a=t.let("passing",null),l=t.name("_valid");e.setParams({passing:a}),t.block(u),e.result(o,()=>e.reset(),()=>e.error(!0));function u(){i.forEach((c,f)=>{let m;(0,PC.alwaysValidSchema)(s,c)?t.var(l,!0):m=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},l),f>0&&t.if((0,ga._)`${l} && ${o}`).assign(o,!1).assign(a,(0,ga._)`[${a}, ${f}]`).else(),t.if(l,()=>{t.assign(o,!0),t.assign(a,f),m&&e.mergeEvaluated(m,ga.Name)})})}}};wh.default=RC;var kh={};Object.defineProperty(kh,"__esModule",{value:!0});const NC=Z,OC={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const s=t.name("valid");n.forEach((i,o)=>{if((0,NC.alwaysValidSchema)(r,i))return;const a=e.subschema({keyword:"allOf",schemaProp:o},s);e.ok(s),e.mergeEvaluated(a)})}};kh.default=OC;var Sh={};Object.defineProperty(Sh,"__esModule",{value:!0});const al=ae,j0=Z,CC={message:({params:e})=>(0,al.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,al._)`{failingKeyword: ${e.ifClause}}`},xC={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:CC,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,j0.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const s=Xm(r,"then"),i=Xm(r,"else");if(!s&&!i)return;const o=t.let("valid",!0),a=t.name("_valid");if(l(),e.reset(),s&&i){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,u("then",c),u("else",c))}else s?t.if(a,u("then")):t.if((0,al.not)(a),u("else"));e.pass(o,()=>e.error(!0));function l(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function u(c,f){return()=>{const m=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(m,o),f?t.assign(f,(0,al._)`${c}`):e.setParams({ifClause:c})}}}};function Xm(e,t){const n=e.schema[t];return n!==void 0&&!(0,j0.alwaysValidSchema)(e,n)}Sh.default=xC;var $h={};Object.defineProperty($h,"__esModule",{value:!0});const jC=Z,zC={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,jC.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};$h.default=zC;Object.defineProperty(dh,"__esModule",{value:!0});const AC=Qs,MC=fh,DC=Js,LC=hh,ZC=ph,UC=C0,FC=mh,VC=zl,HC=gh,qC=yh,BC=vh,WC=_h,KC=wh,GC=kh,QC=Sh,JC=$h;function YC(e=!1){const t=[BC.default,WC.default,KC.default,GC.default,QC.default,JC.default,FC.default,VC.default,UC.default,HC.default,qC.default];return e?t.push(MC.default,LC.default):t.push(AC.default,DC.default),t.push(ZC.default),t}dh.default=YC;var Eh={},Th={};Object.defineProperty(Th,"__esModule",{value:!0});const qe=ae,XC={message:({schemaCode:e})=>(0,qe.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,qe._)`{format: ${e}}`},ex={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:XC,code(e,t){const{gen:n,data:r,$data:s,schema:i,schemaCode:o,it:a}=e,{opts:l,errSchemaPath:u,schemaEnv:c,self:f}=a;if(!l.validateFormats)return;s?m():v();function m(){const g=n.scopeValue("formats",{ref:f.formats,code:l.code.formats}),_=n.const("fDef",(0,qe._)`${g}[${o}]`),w=n.let("fType"),d=n.let("format");n.if((0,qe._)`typeof ${_} == "object" && !(${_} instanceof RegExp)`,()=>n.assign(w,(0,qe._)`${_}.type || "string"`).assign(d,(0,qe._)`${_}.validate`),()=>n.assign(w,(0,qe._)`"string"`).assign(d,_)),e.fail$data((0,qe.or)(h(),p()));function h(){return l.strictSchema===!1?qe.nil:(0,qe._)`${o} && !${d}`}function p(){const k=c.$async?(0,qe._)`(${_}.async ? await ${d}(${r}) : ${d}(${r}))`:(0,qe._)`${d}(${r})`,E=(0,qe._)`(typeof ${d} == "function" ? ${k} : ${d}.test(${r}))`;return(0,qe._)`${d} && ${d} !== true && ${w} === ${t} && !${E}`}}function v(){const g=f.formats[i];if(!g){h();return}if(g===!0)return;const[_,w,d]=p(g);_===t&&e.pass(k());function h(){if(l.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${i}" ignored in schema at path "${u}"`}}function p(E){const R=E instanceof RegExp?(0,qe.regexpCode)(E):l.code.formats?(0,qe._)`${l.code.formats}${(0,qe.getProperty)(i)}`:void 0,N=n.scopeValue("formats",{key:i,ref:E,code:R});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,qe._)`${N}.validate`]:["string",E,N]}function k(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!c.$async)throw new Error("async format in sync schema");return(0,qe._)`await ${d}(${r})`}return typeof w=="function"?(0,qe._)`${d}(${r})`:(0,qe._)`${d}.test(${r})`}}}};Th.default=ex;Object.defineProperty(Eh,"__esModule",{value:!0});const tx=Th,nx=[tx.default];Eh.default=nx;var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.contentVocabulary=Hs.metadataVocabulary=void 0;Hs.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Hs.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Qf,"__esModule",{value:!0});const rx=Jf,sx=Xf,ix=dh,ox=Eh,eg=Hs,ax=[rx.default,sx.default,(0,ix.default)(),ox.default,eg.metadataVocabulary,eg.contentVocabulary];Qf.default=ax;var bh={},Al={};Object.defineProperty(Al,"__esModule",{value:!0});Al.DiscrError=void 0;var tg;(function(e){e.Tag="tag",e.Mapping="mapping"})(tg||(Al.DiscrError=tg={}));Object.defineProperty(bh,"__esModule",{value:!0});const os=ae,sd=Al,ng=It,lx=Gs,ux=Z,cx={message:({params:{discrError:e,tagName:t}})=>e===sd.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,os._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},dx={keyword:"discriminator",type:"object",schemaType:"object",error:cx,code(e){const{gen:t,data:n,schema:r,parentSchema:s,it:i}=e,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const l=t.let("valid",!1),u=t.const("tag",(0,os._)`${n}${(0,os.getProperty)(a)}`);t.if((0,os._)`typeof ${u} == "string"`,()=>c(),()=>e.error(!1,{discrError:sd.DiscrError.Tag,tag:u,tagName:a})),e.ok(l);function c(){const v=m();t.if(!1);for(const g in v)t.elseIf((0,os._)`${u} === ${g}`),t.assign(l,f(v[g]));t.else(),e.error(!1,{discrError:sd.DiscrError.Mapping,tag:u,tagName:a}),t.endIf()}function f(v){const g=t.name("valid"),_=e.subschema({keyword:"oneOf",schemaProp:v},g);return e.mergeEvaluated(_,os.Name),g}function m(){var v;const g={},_=d(s);let w=!0;for(let k=0;k<o.length;k++){let E=o[k];if(E!=null&&E.$ref&&!(0,ux.schemaHasRulesButRef)(E,i.self.RULES)){const N=E.$ref;if(E=ng.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,N),E instanceof ng.SchemaEnv&&(E=E.schema),E===void 0)throw new lx.default(i.opts.uriResolver,i.baseId,N)}const R=(v=E==null?void 0:E.properties)===null||v===void 0?void 0:v[a];if(typeof R!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);w=w&&(_||d(E)),h(R,k)}if(!w)throw new Error(`discriminator: "${a}" must be required`);return g;function d({required:k}){return Array.isArray(k)&&k.includes(a)}function h(k,E){if(k.const)p(k.const,E);else if(k.enum)for(const R of k.enum)p(R,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function p(k,E){if(typeof k!="string"||k in g)throw new Error(`discriminator: "${a}" values must be unique strings`);g[k]=E}}}};bh.default=dx;const fx="http://json-schema.org/draft-07/schema#",hx="http://json-schema.org/draft-07/schema#",px="Core schema meta-schema",mx={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},gx=["object","boolean"],yx={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},vx={$schema:fx,$id:hx,title:px,definitions:mx,type:gx,properties:yx,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=L_,r=Qf,s=bh,i=vx,o=["/properties"],a="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(g=>this.addVocabulary(g)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const g=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(g,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var u=_n;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var c=ae;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=$o;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var m=Gs;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return m.default}})})(Jc,Jc.exports);var z0=Jc.exports;const _x=ad(z0);var id={exports:{}},A0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(V,X){return{validate:V,compare:X}}e.fullFormats={date:t(i,o),time:t(l(!0),u),"date-time":t(m(!0),v),"iso-time":t(l(),c),"iso-date-time":t(m(),g),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:d,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:ee,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:p,int32:{type:"number",validate:R},int64:{type:"number",validate:N},float:{type:"number",validate:z},double:{type:"number",validate:z},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,v),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,g),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function n(V){return V%4===0&&(V%100!==0||V%400===0)}const r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(V){const X=r.exec(V);if(!X)return!1;const fe=+X[1],D=+X[2],Fe=+X[3];return D>=1&&D<=12&&Fe>=1&&Fe<=(D===2&&n(fe)?29:s[D])}function o(V,X){if(V&&X)return V>X?1:V<X?-1:0}const a=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function l(V){return function(fe){const D=a.exec(fe);if(!D)return!1;const Fe=+D[1],ft=+D[2],re=+D[3],M=D[4],Y=D[5]==="-"?-1:1,C=+(D[6]||0),$=+(D[7]||0);if(C>23||$>59||V&&!M)return!1;if(Fe<=23&&ft<=59&&re<60)return!0;const O=ft-$*Y,T=Fe-C*Y-(O<0?1:0);return(T===23||T===-1)&&(O===59||O===-1)&&re<61}}function u(V,X){if(!(V&&X))return;const fe=new Date("2020-01-01T"+V).valueOf(),D=new Date("2020-01-01T"+X).valueOf();if(fe&&D)return fe-D}function c(V,X){if(!(V&&X))return;const fe=a.exec(V),D=a.exec(X);if(fe&&D)return V=fe[1]+fe[2]+fe[3],X=D[1]+D[2]+D[3],V>X?1:V<X?-1:0}const f=/t|\s/i;function m(V){const X=l(V);return function(D){const Fe=D.split(f);return Fe.length===2&&i(Fe[0])&&X(Fe[1])}}function v(V,X){if(!(V&&X))return;const fe=new Date(V).valueOf(),D=new Date(X).valueOf();if(fe&&D)return fe-D}function g(V,X){if(!(V&&X))return;const[fe,D]=V.split(f),[Fe,ft]=X.split(f),re=o(fe,Fe);if(re!==void 0)return re||u(D,ft)}const _=/\/|:/,w=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function d(V){return _.test(V)&&w.test(V)}const h=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function p(V){return h.lastIndex=0,h.test(V)}const k=-(2**31),E=2**31-1;function R(V){return Number.isInteger(V)&&V<=E&&V>=k}function N(V){return Number.isInteger(V)}function z(){return!0}const ne=/[^\\]\\Z/;function ee(V){if(ne.test(V))return!1;try{return new RegExp(V),!0}catch{return!1}}})(A0);var M0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=z0,n=ae,r=n.operators,s={formatMaximum:{okStr:"<=",ok:r.LTE,fail:r.GT},formatMinimum:{okStr:">=",ok:r.GTE,fail:r.LT},formatExclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},formatExclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},i={message:({keyword:a,schemaCode:l})=>(0,n.str)`should be ${s[a].okStr} ${l}`,params:({keyword:a,schemaCode:l})=>(0,n._)`{comparison: ${s[a].okStr}, limit: ${l}}`};e.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:i,code(a){const{gen:l,data:u,schemaCode:c,keyword:f,it:m}=a,{opts:v,self:g}=m;if(!v.validateFormats)return;const _=new t.KeywordCxt(m,g.RULES.all.format.definition,"format");_.$data?w():d();function w(){const p=l.scopeValue("formats",{ref:g.formats,code:v.code.formats}),k=l.const("fmt",(0,n._)`${p}[${_.schemaCode}]`);a.fail$data((0,n.or)((0,n._)`typeof ${k} != "object"`,(0,n._)`${k} instanceof RegExp`,(0,n._)`typeof ${k}.compare != "function"`,h(k)))}function d(){const p=_.schema,k=g.formats[p];if(!k||k===!0)return;if(typeof k!="object"||k instanceof RegExp||typeof k.compare!="function")throw new Error(`"${f}": format "${p}" does not define "compare" function`);const E=l.scopeValue("formats",{key:p,ref:k,code:v.code.formats?(0,n._)`${v.code.formats}${(0,n.getProperty)(p)}`:void 0});a.fail$data(h(E))}function h(p){return(0,n._)`${p}.compare(${u}, ${c}) ${s[f].fail} 0`}},dependencies:["format"]};const o=a=>(a.addKeyword(e.formatLimitDefinition),a);e.default=o})(M0);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=A0,r=M0,s=ae,i=new s.Name("fullFormats"),o=new s.Name("fastFormats"),a=(u,c={keywords:!0})=>{if(Array.isArray(c))return l(u,c,n.fullFormats,i),u;const[f,m]=c.mode==="fast"?[n.fastFormats,o]:[n.fullFormats,i],v=c.formats||n.formatNames;return l(u,v,f,m),c.keywords&&(0,r.default)(u),u};a.get=(u,c="full")=>{const m=(c==="fast"?n.fastFormats:n.fullFormats)[u];if(!m)throw new Error(`Unknown format "${u}"`);return m};function l(u,c,f,m){var v,g;(v=(g=u.opts.code).formats)!==null&&v!==void 0||(g.formats=(0,s._)`require("ajv-formats/dist/formats").${m}`);for(const _ of c)u.addFormat(_,f[_])}e.exports=t=a,Object.defineProperty(t,"__esModule",{value:!0}),t.default=a})(id,id.exports);var wx=id.exports;const kx=ad(wx);function Sx(){const e=new _x({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return kx(e),e}class $x{constructor(t){this._ajv=t??Sx()}getValidator(t){const n="$id"in t&&typeof t.$id=="string"?this._ajv.getSchema(t.$id)??this._ajv.compile(t):this._ajv.compile(t);return r=>n(r)?{valid:!0,data:r,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(n.errors)}}}class Ex{constructor(t){this._server=t}requestStream(t,n,r){return this._server.requestStream(t,n,r)}async getTask(t,n){return this._server.getTask({taskId:t},n)}async getTaskResult(t,n,r){return this._server.getTaskResult({taskId:t},n,r)}async listTasks(t,n){return this._server.listTasks(t?{cursor:t}:void 0,n)}async cancelTask(t,n){return this._server.cancelTask({taskId:t},n)}}function Tx(e,t,n){var r;if(!e)throw new Error(`${n} does not support task creation (required for ${t})`);switch(t){case"tools/call":if(!((r=e.tools)!=null&&r.call))throw new Error(`${n} does not support task creation for tools/call (required for ${t})`);break}}function bx(e,t,n){var r,s;if(!e)throw new Error(`${n} does not support task creation (required for ${t})`);switch(t){case"sampling/createMessage":if(!((r=e.sampling)!=null&&r.createMessage))throw new Error(`${n} does not support task creation for sampling/createMessage (required for ${t})`);break;case"elicitation/create":if(!((s=e.elicitation)!=null&&s.create))throw new Error(`${n} does not support task creation for elicitation/create (required for ${t})`);break}}class Px extends II{constructor(t,n){super(n),this._serverInfo=t,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(Xa.options.map((r,s)=>[r,s])),this.isMessageIgnored=(r,s)=>{const i=this._loggingLevels.get(s);return i?this.LOG_LEVEL_SEVERITY.get(r)<this.LOG_LEVEL_SEVERITY.get(i):!1},this._capabilities=(n==null?void 0:n.capabilities)??{},this._instructions=n==null?void 0:n.instructions,this._jsonSchemaValidator=(n==null?void 0:n.jsonSchemaValidator)??new $x,this.setRequestHandler(S_,r=>this._oninitialize(r)),this.setNotificationHandler($_,()=>{var r;return(r=this.oninitialized)==null?void 0:r.call(this)}),this._capabilities.logging&&this.setRequestHandler(R_,async(r,s)=>{var l;const i=s.sessionId||((l=s.requestInfo)==null?void 0:l.headers["mcp-session-id"])||void 0,{level:o}=r.params,a=Xa.safeParse(o);return a.success&&this._loggingLevels.set(i,a.data),{}})}get experimental(){return this._experimental||(this._experimental={tasks:new Ex(this)}),this._experimental}registerCapabilities(t){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=RI(this._capabilities,t)}setRequestHandler(t,n){var a;const r=mo(t),s=r==null?void 0:r.method;if(!s)throw new Error("Schema is missing a method literal");let i;if(Nn(s)){const l=s,u=(a=l._zod)==null?void 0:a.def;i=(u==null?void 0:u.value)??l.value}else{const l=s,u=l._def;i=(u==null?void 0:u.value)??l.value}if(typeof i!="string")throw new Error("Schema method literal must be a string");if(i==="tools/call"){const l=async(u,c)=>{const f=Ci(Ya,u);if(!f.success){const _=f.error instanceof Error?f.error.message:String(f.error);throw new Q(te.InvalidParams,`Invalid tools/call request: ${_}`)}const{params:m}=f.data,v=await Promise.resolve(n(u,c));if(m.task){const _=Ci(Nl,v);if(!_.success){const w=_.error instanceof Error?_.error.message:String(_.error);throw new Q(te.InvalidParams,`Invalid task creation result: ${w}`)}return _.data}const g=Ci(jf,v);if(!g.success){const _=g.error instanceof Error?g.error.message:String(g.error);throw new Q(te.InvalidParams,`Invalid tools/call result: ${_}`)}return g.data};return super.setRequestHandler(t,l)}return super.setRequestHandler(t,n)}assertCapabilityForMethod(t){var n,r,s;switch(t){case"sampling/createMessage":if(!((n=this._clientCapabilities)!=null&&n.sampling))throw new Error(`Client does not support sampling (required for ${t})`);break;case"elicitation/create":if(!((r=this._clientCapabilities)!=null&&r.elicitation))throw new Error(`Client does not support elicitation (required for ${t})`);break;case"roots/list":if(!((s=this._clientCapabilities)!=null&&s.roots))throw new Error(`Client does not support listing roots (required for ${t})`);break}}assertNotificationCapability(t){var n,r;switch(t){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${t})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${t})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${t})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${t})`);break;case"notifications/elicitation/complete":if(!((r=(n=this._clientCapabilities)==null?void 0:n.elicitation)!=null&&r.url))throw new Error(`Client does not support URL elicitation (required for ${t})`);break}}assertRequestHandlerCapability(t){if(this._capabilities)switch(t){case"completion/complete":if(!this._capabilities.completions)throw new Error(`Server does not support completions (required for ${t})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${t})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${t})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${t})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${t})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw new Error(`Server does not support tasks capability (required for ${t})`);break}}assertTaskCapability(t){var n,r;bx((r=(n=this._clientCapabilities)==null?void 0:n.tasks)==null?void 0:r.requests,t,"Client")}assertTaskHandlerCapability(t){var n;this._capabilities&&Tx((n=this._capabilities.tasks)==null?void 0:n.requests,t,"Server")}async _oninitialize(t){const n=t.params.protocolVersion;return this._clientCapabilities=t.params.capabilities,this._clientVersion=t.params.clientInfo,{protocolVersion:ab.includes(n)?n:g_,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},vf)}async createMessage(t,n){var r,s;if((t.tools||t.toolChoice)&&!((s=(r=this._clientCapabilities)==null?void 0:r.sampling)!=null&&s.tools))throw new Error("Client does not support sampling tools capability.");if(t.messages.length>0){const i=t.messages[t.messages.length-1],o=Array.isArray(i.content)?i.content:[i.content],a=o.some(f=>f.type==="tool_result"),l=t.messages.length>1?t.messages[t.messages.length-2]:void 0,u=l?Array.isArray(l.content)?l.content:[l.content]:[],c=u.some(f=>f.type==="tool_use");if(a){if(o.some(f=>f.type!=="tool_result"))throw new Error("The last message must contain only tool_result content if any is present");if(!c)throw new Error("tool_result blocks are not matching any tool_use from the previous message")}if(c){const f=new Set(u.filter(v=>v.type==="tool_use").map(v=>v.id)),m=new Set(o.filter(v=>v.type==="tool_result").map(v=>v.toolUseId));if(f.size!==m.size||![...f].every(v=>m.has(v)))throw new Error("ids of tool_result blocks and tool_use blocks from previous message do not match")}}return t.tools?this.request({method:"sampling/createMessage",params:t},O_,n):this.request({method:"sampling/createMessage",params:t},N_,n)}async elicitInput(t,n){var s,i,o,a;switch(t.mode??"form"){case"url":{if(!((i=(s=this._clientCapabilities)==null?void 0:s.elicitation)!=null&&i.url))throw new Error("Client does not support url elicitation.");const l=t;return this.request({method:"elicitation/create",params:l},Gc,n)}case"form":{if(!((a=(o=this._clientCapabilities)==null?void 0:o.elicitation)!=null&&a.form))throw new Error("Client does not support form elicitation.");const l=t.mode==="form"?t:{...t,mode:"form"},u=await this.request({method:"elicitation/create",params:l},Gc,n);if(u.action==="accept"&&u.content&&l.requestedSchema)try{const f=this._jsonSchemaValidator.getValidator(l.requestedSchema)(u.content);if(!f.valid)throw new Q(te.InvalidParams,`Elicitation response content does not match requested schema: ${f.errorMessage}`)}catch(c){throw c instanceof Q?c:new Q(te.InternalError,`Error validating elicitation response: ${c instanceof Error?c.message:String(c)}`)}return u}}}createElicitationCompletionNotifier(t,n){var r,s;if(!((s=(r=this._clientCapabilities)==null?void 0:r.elicitation)!=null&&s.url))throw new Error("Client does not support URL elicitation (required for notifications/elicitation/complete)");return()=>this.notification({method:"notifications/elicitation/complete",params:{elicitationId:t}},n)}async listRoots(t,n){return this.request({method:"roots/list",params:t},C_,n)}async sendLoggingMessage(t,n){if(this._capabilities.logging&&!this.isMessageIgnored(t.level,n))return this.notification({method:"notifications/message",params:t})}async sendResourceUpdated(t){return this.notification({method:"notifications/resources/updated",params:t})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}}const D0=Symbol.for("mcp.completable");function rg(e){return!!e&&typeof e=="object"&&D0 in e}function Ix(e){const t=e[D0];return t==null?void 0:t.complete}var sg;(function(e){e.Completable="McpCompletable"})(sg||(sg={}));const Rx=/^[A-Za-z0-9._-]{1,128}$/;function Nx(e){const t=[];if(e.length===0)return{isValid:!1,warnings:["Tool name cannot be empty"]};if(e.length>128)return{isValid:!1,warnings:[`Tool name exceeds maximum length of 128 characters (current: ${e.length})`]};if(e.includes(" ")&&t.push("Tool name contains spaces, which may cause parsing issues"),e.includes(",")&&t.push("Tool name contains commas, which may cause parsing issues"),(e.startsWith("-")||e.endsWith("-"))&&t.push("Tool name starts or ends with a dash, which may cause parsing issues in some contexts"),(e.startsWith(".")||e.endsWith("."))&&t.push("Tool name starts or ends with a dot, which may cause parsing issues in some contexts"),!Rx.test(e)){const n=e.split("").filter(r=>!/[A-Za-z0-9._-]/.test(r)).filter((r,s,i)=>i.indexOf(r)===s);return t.push(`Tool name contains invalid characters: ${n.map(r=>`"${r}"`).join(", ")}`,"Allowed characters are: A-Z, a-z, 0-9, underscore (_), dash (-), and dot (.)"),{isValid:!1,warnings:t}}return{isValid:!0,warnings:t}}function Ox(e,t){if(t.length>0){console.warn(`Tool name validation warning for "${e}":`);for(const n of t)console.warn(`  - ${n}`);console.warn("Tool registration will proceed, but this may cause compatibility issues."),console.warn("Consider updating the tool name to conform to the MCP tool naming standard."),console.warn("See SEP: Specify Format for Tool Names (https://github.com/modelcontextprotocol/modelcontextprotocol/issues/986) for more details.")}}function ig(e){const t=Nx(e);return Ox(e,t.warnings),t.isValid}class Cx{constructor(t){this._mcpServer=t}registerToolTask(t,n,r){const s={taskSupport:"required",...n.execution};if(s.taskSupport==="forbidden")throw new Error(`Cannot register task-based tool '${t}' with taskSupport 'forbidden'. Use registerTool() instead.`);return this._mcpServer._createRegisteredTool(t,n.title,n.description,n.inputSchema,n.outputSchema,n.annotations,s,n._meta,r)}}class xx{constructor(t,n){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new Px(t,n)}get experimental(){return this._experimental||(this._experimental={tasks:new Cx(this)}),this._experimental}async connect(t){return await this.server.connect(t)}async close(){await this.server.close()}setToolRequestHandlers(){this._toolHandlersInitialized||(this.server.assertCanSetRequestHandler(Yn(Kc)),this.server.assertCanSetRequestHandler(Yn(Ya)),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(Kc,()=>({tools:Object.entries(this._registeredTools).filter(([,t])=>t.enabled).map(([t,n])=>{const r={name:t,title:n.title,description:n.description,inputSchema:(()=>{const s=ui(n.inputSchema);return s?Nm(s,{strictUnions:!0,pipeStrategy:"input"}):jx})(),annotations:n.annotations,execution:n.execution,_meta:n._meta};if(n.outputSchema){const s=ui(n.outputSchema);s&&(r.outputSchema=Nm(s,{strictUnions:!0,pipeStrategy:"output"}))}return r})})),this.server.setRequestHandler(Ya,async(t,n)=>{var r;try{const s=this._registeredTools[t.params.name];if(!s)throw new Q(te.InvalidParams,`Tool ${t.params.name} not found`);if(!s.enabled)throw new Q(te.InvalidParams,`Tool ${t.params.name} disabled`);const i=!!t.params.task,o=(r=s.execution)==null?void 0:r.taskSupport,a="createTask"in s.handler;if((o==="required"||o==="optional")&&!a)throw new Q(te.InternalError,`Tool ${t.params.name} has taskSupport '${o}' but was not registered with registerToolTask`);if(o==="required"&&!i)throw new Q(te.MethodNotFound,`Tool ${t.params.name} requires task augmentation (taskSupport: 'required')`);if(o==="optional"&&!i&&a)return await this.handleAutomaticTaskPolling(s,t,n);const l=await this.validateToolInput(s,t.params.arguments,t.params.name),u=await this.executeToolHandler(s,l,n);return i||await this.validateToolOutput(s,u,t.params.name),u}catch(s){if(s instanceof Q&&s.code===te.UrlElicitationRequired)throw s;return this.createToolError(s instanceof Error?s.message:String(s))}}),this._toolHandlersInitialized=!0)}createToolError(t){return{content:[{type:"text",text:t}],isError:!0}}async validateToolInput(t,n,r){if(!t.inputSchema)return;const i=ui(t.inputSchema)??t.inputSchema,o=await Pu(i,n);if(!o.success){const a="error"in o?o.error:"Unknown error",l=Iu(a);throw new Q(te.InvalidParams,`Input validation error: Invalid arguments for tool ${r}: ${l}`)}return o.data}async validateToolOutput(t,n,r){if(!t.outputSchema||!("content"in n)||n.isError)return;if(!n.structuredContent)throw new Q(te.InvalidParams,`Output validation error: Tool ${r} has an output schema but no structured content was provided`);const s=ui(t.outputSchema),i=await Pu(s,n.structuredContent);if(!i.success){const o="error"in i?i.error:"Unknown error",a=Iu(o);throw new Q(te.InvalidParams,`Output validation error: Invalid structured content for tool ${r}: ${a}`)}}async executeToolHandler(t,n,r){const s=t.handler;if("createTask"in s){if(!r.taskStore)throw new Error("No task store provided.");const o={...r,taskStore:r.taskStore};if(t.inputSchema){const a=s;return await Promise.resolve(a.createTask(n,o))}else{const a=s;return await Promise.resolve(a.createTask(o))}}if(t.inputSchema){const o=s;return await Promise.resolve(o(n,r))}else{const o=s;return await Promise.resolve(o(r))}}async handleAutomaticTaskPolling(t,n,r){if(!r.taskStore)throw new Error("No task store provided for task-capable tool.");const s=await this.validateToolInput(t,n.params.arguments,n.params.name),i=t.handler,o={...r,taskStore:r.taskStore},a=s?await Promise.resolve(i.createTask(s,o)):await Promise.resolve(i.createTask(o)),l=a.task.taskId;let u=a.task;const c=u.pollInterval??5e3;for(;u.status!=="completed"&&u.status!=="failed"&&u.status!=="cancelled";){await new Promise(m=>setTimeout(m,c));const f=await r.taskStore.getTask(l);if(!f)throw new Q(te.InternalError,`Task ${l} not found during polling`);u=f}return await r.taskStore.getTaskResult(l)}setCompletionRequestHandler(){this._completionHandlerInitialized||(this.server.assertCanSetRequestHandler(Yn(Qc)),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(Qc,async t=>{switch(t.params.ref.type){case"ref/prompt":return zP(t),this.handlePromptCompletion(t,t.params.ref);case"ref/resource":return AP(t),this.handleResourceCompletion(t,t.params.ref);default:throw new Q(te.InvalidParams,`Invalid completion reference: ${t.params.ref}`)}}),this._completionHandlerInitialized=!0)}async handlePromptCompletion(t,n){const r=this._registeredPrompts[n.name];if(!r)throw new Q(te.InvalidParams,`Prompt ${n.name} not found`);if(!r.enabled)throw new Q(te.InvalidParams,`Prompt ${n.name} disabled`);if(!r.argsSchema)return fi;const s=mo(r.argsSchema),i=s==null?void 0:s[t.params.argument.name];if(!rg(i))return fi;const o=Ix(i);if(!o)return fi;const a=await o(t.params.argument.value,t.params.context);return ag(a)}async handleResourceCompletion(t,n){const r=Object.values(this._registeredResourceTemplates).find(o=>o.resourceTemplate.uriTemplate.toString()===n.uri);if(!r){if(this._registeredResources[n.uri])return fi;throw new Q(te.InvalidParams,`Resource template ${t.params.ref.uri} not found`)}const s=r.resourceTemplate.completeCallback(t.params.argument.name);if(!s)return fi;const i=await s(t.params.argument.value,t.params.context);return ag(i)}setResourceRequestHandlers(){this._resourceHandlersInitialized||(this.server.assertCanSetRequestHandler(Yn(Vc)),this.server.assertCanSetRequestHandler(Yn(Hc)),this.server.assertCanSetRequestHandler(Yn(qc)),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(Vc,async(t,n)=>{const r=Object.entries(this._registeredResources).filter(([i,o])=>o.enabled).map(([i,o])=>({uri:i,name:o.name,...o.metadata})),s=[];for(const i of Object.values(this._registeredResourceTemplates)){if(!i.resourceTemplate.listCallback)continue;const o=await i.resourceTemplate.listCallback(n);for(const a of o.resources)s.push({...i.metadata,...a})}return{resources:[...r,...s]}}),this.server.setRequestHandler(Hc,async()=>({resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([n,r])=>({name:n,uriTemplate:r.resourceTemplate.uriTemplate.toString(),...r.metadata}))})),this.server.setRequestHandler(qc,async(t,n)=>{const r=new URL(t.params.uri),s=this._registeredResources[r.toString()];if(s){if(!s.enabled)throw new Q(te.InvalidParams,`Resource ${r} disabled`);return s.readCallback(r,n)}for(const i of Object.values(this._registeredResourceTemplates)){const o=i.resourceTemplate.uriTemplate.match(r.toString());if(o)return i.readCallback(r,o,n)}throw new Q(te.InvalidParams,`Resource ${r} not found`)}),this._resourceHandlersInitialized=!0)}setPromptRequestHandlers(){this._promptHandlersInitialized||(this.server.assertCanSetRequestHandler(Yn(Bc)),this.server.assertCanSetRequestHandler(Yn(Wc)),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(Bc,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,t])=>t.enabled).map(([t,n])=>({name:t,title:n.title,description:n.description,arguments:n.argsSchema?Ax(n.argsSchema):void 0}))})),this.server.setRequestHandler(Wc,async(t,n)=>{const r=this._registeredPrompts[t.params.name];if(!r)throw new Q(te.InvalidParams,`Prompt ${t.params.name} not found`);if(!r.enabled)throw new Q(te.InvalidParams,`Prompt ${t.params.name} disabled`);if(r.argsSchema){const s=ui(r.argsSchema),i=await Pu(s,t.params.arguments);if(!i.success){const l="error"in i?i.error:"Unknown error",u=Iu(l);throw new Q(te.InvalidParams,`Invalid arguments for prompt ${t.params.name}: ${u}`)}const o=i.data,a=r.callback;return await Promise.resolve(a(o,n))}else{const s=r.callback;return await Promise.resolve(s(n))}}),this._promptHandlersInitialized=!0)}resource(t,n,...r){let s;typeof r[0]=="object"&&(s=r.shift());const i=r[0];if(typeof n=="string"){if(this._registeredResources[n])throw new Error(`Resource ${n} is already registered`);const o=this._createRegisteredResource(t,void 0,n,s,i);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),o}else{if(this._registeredResourceTemplates[t])throw new Error(`Resource template ${t} is already registered`);const o=this._createRegisteredResourceTemplate(t,void 0,n,s,i);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),o}}registerResource(t,n,r,s){if(typeof n=="string"){if(this._registeredResources[n])throw new Error(`Resource ${n} is already registered`);const i=this._createRegisteredResource(t,r.title,n,r,s);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),i}else{if(this._registeredResourceTemplates[t])throw new Error(`Resource template ${t} is already registered`);const i=this._createRegisteredResourceTemplate(t,r.title,n,r,s);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),i}}_createRegisteredResource(t,n,r,s,i){const o={name:t,title:n,metadata:s,readCallback:i,enabled:!0,disable:()=>o.update({enabled:!1}),enable:()=>o.update({enabled:!0}),remove:()=>o.update({uri:null}),update:a=>{typeof a.uri<"u"&&a.uri!==r&&(delete this._registeredResources[r],a.uri&&(this._registeredResources[a.uri]=o)),typeof a.name<"u"&&(o.name=a.name),typeof a.title<"u"&&(o.title=a.title),typeof a.metadata<"u"&&(o.metadata=a.metadata),typeof a.callback<"u"&&(o.readCallback=a.callback),typeof a.enabled<"u"&&(o.enabled=a.enabled),this.sendResourceListChanged()}};return this._registeredResources[r]=o,o}_createRegisteredResourceTemplate(t,n,r,s,i){const o={resourceTemplate:r,title:n,metadata:s,readCallback:i,enabled:!0,disable:()=>o.update({enabled:!1}),enable:()=>o.update({enabled:!0}),remove:()=>o.update({name:null}),update:u=>{typeof u.name<"u"&&u.name!==t&&(delete this._registeredResourceTemplates[t],u.name&&(this._registeredResourceTemplates[u.name]=o)),typeof u.title<"u"&&(o.title=u.title),typeof u.template<"u"&&(o.resourceTemplate=u.template),typeof u.metadata<"u"&&(o.metadata=u.metadata),typeof u.callback<"u"&&(o.readCallback=u.callback),typeof u.enabled<"u"&&(o.enabled=u.enabled),this.sendResourceListChanged()}};this._registeredResourceTemplates[t]=o;const a=r.uriTemplate.variableNames;return Array.isArray(a)&&a.some(u=>!!r.completeCallback(u))&&this.setCompletionRequestHandler(),o}_createRegisteredPrompt(t,n,r,s,i){const o={title:n,description:r,argsSchema:s===void 0?void 0:ks(s),callback:i,enabled:!0,disable:()=>o.update({enabled:!1}),enable:()=>o.update({enabled:!0}),remove:()=>o.update({name:null}),update:a=>{typeof a.name<"u"&&a.name!==t&&(delete this._registeredPrompts[t],a.name&&(this._registeredPrompts[a.name]=o)),typeof a.title<"u"&&(o.title=a.title),typeof a.description<"u"&&(o.description=a.description),typeof a.argsSchema<"u"&&(o.argsSchema=ks(a.argsSchema)),typeof a.callback<"u"&&(o.callback=a.callback),typeof a.enabled<"u"&&(o.enabled=a.enabled),this.sendPromptListChanged()}};return this._registeredPrompts[t]=o,s&&Object.values(s).some(l=>{var c;const u=l instanceof Dn?(c=l._def)==null?void 0:c.innerType:l;return rg(u)})&&this.setCompletionRequestHandler(),o}_createRegisteredTool(t,n,r,s,i,o,a,l,u){ig(t);const c={title:n,description:r,inputSchema:og(s),outputSchema:og(i),annotations:o,execution:a,_meta:l,handler:u,enabled:!0,disable:()=>c.update({enabled:!1}),enable:()=>c.update({enabled:!0}),remove:()=>c.update({name:null}),update:f=>{typeof f.name<"u"&&f.name!==t&&(typeof f.name=="string"&&ig(f.name),delete this._registeredTools[t],f.name&&(this._registeredTools[f.name]=c)),typeof f.title<"u"&&(c.title=f.title),typeof f.description<"u"&&(c.description=f.description),typeof f.paramsSchema<"u"&&(c.inputSchema=ks(f.paramsSchema)),typeof f.outputSchema<"u"&&(c.outputSchema=ks(f.outputSchema)),typeof f.callback<"u"&&(c.handler=f.callback),typeof f.annotations<"u"&&(c.annotations=f.annotations),typeof f._meta<"u"&&(c._meta=f._meta),typeof f.enabled<"u"&&(c.enabled=f.enabled),this.sendToolListChanged()}};return this._registeredTools[t]=c,this.setToolRequestHandlers(),this.sendToolListChanged(),c}tool(t,...n){if(this._registeredTools[t])throw new Error(`Tool ${t} is already registered`);let r,s,i,o;if(typeof n[0]=="string"&&(r=n.shift()),n.length>1){const l=n[0];od(l)?(s=n.shift(),n.length>1&&typeof n[0]=="object"&&n[0]!==null&&!od(n[0])&&(o=n.shift())):typeof l=="object"&&l!==null&&(o=n.shift())}const a=n[0];return this._createRegisteredTool(t,void 0,r,s,i,o,{taskSupport:"forbidden"},void 0,a)}registerTool(t,n,r){if(this._registeredTools[t])throw new Error(`Tool ${t} is already registered`);const{title:s,description:i,inputSchema:o,outputSchema:a,annotations:l,_meta:u}=n;return this._createRegisteredTool(t,s,i,o,a,l,{taskSupport:"forbidden"},u,r)}prompt(t,...n){if(this._registeredPrompts[t])throw new Error(`Prompt ${t} is already registered`);let r;typeof n[0]=="string"&&(r=n.shift());let s;n.length>1&&(s=n.shift());const i=n[0],o=this._createRegisteredPrompt(t,void 0,r,s,i);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),o}registerPrompt(t,n,r){if(this._registeredPrompts[t])throw new Error(`Prompt ${t} is already registered`);const{title:s,description:i,argsSchema:o}=n,a=this._createRegisteredPrompt(t,s,i,o,r);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),a}isConnected(){return this.server.transport!==void 0}async sendLoggingMessage(t,n){return this.server.sendLoggingMessage(t,n)}sendResourceListChanged(){this.isConnected()&&this.server.sendResourceListChanged()}sendToolListChanged(){this.isConnected()&&this.server.sendToolListChanged()}sendPromptListChanged(){this.isConnected()&&this.server.sendPromptListChanged()}}const jx={type:"object",properties:{}};function L0(e){return e!==null&&typeof e=="object"&&"parse"in e&&typeof e.parse=="function"&&"safeParse"in e&&typeof e.safeParse=="function"}function zx(e){return"_def"in e||"_zod"in e||L0(e)}function od(e){return typeof e!="object"||e===null||zx(e)?!1:Object.keys(e).length===0?!0:Object.values(e).some(L0)}function og(e){if(e)return od(e)?ks(e):e}function Ax(e){const t=mo(e);return t?Object.entries(t).map(([n,r])=>{const s=nT(r),i=rT(r);return{name:n,description:s,required:!i}}):[]}function Yn(e){const t=mo(e),n=t==null?void 0:t.method;if(!n)throw new Error("Schema is missing a method literal");const r=r_(n);if(typeof r=="string")return r;throw new Error("Schema method literal must be a string")}function ag(e){return{completion:{values:e.slice(0,100),total:e.length,hasMore:e.length>100}}}const fi={completion:{values:[],hasMore:!1}};class Mx{constructor(t){t.environment=="staging"||t.environment=="production"?(this.generator=new Ik,this.messenger=new Nk,this.storage=new Mk(t.id,t.token)):(this.generator=new Rk,this.messenger=new Ok,this.storage=new Ak(t.id,t.token)),this.mcp=new xx({name:"stage-mcp-server",version:"1.0.0"},{capabilities:{logging:{}}})}}var lg;(function(e){e.development="development",e.staging="staging",e.production="production",e.testing="testing"})(lg||(lg={}));const Dx={id:0,userId:"1",environment:"development",initState:null,token:"test",characters:{},config:null,messageState:null,users:{},chatState:null},ug={error:null,success:!0,chatState:null,initState:null,messageState:null},cg={chatState:null,systemMessage:null,error:null,extensionMessage:null,modifiedMessage:null,messageState:null,stageDirections:null},Lx=()=>ir.createElement("div",{className:"outer"},ir.createElement("div",{className:"middle"},ir.createElement("div",{className:"spinner"},ir.createElement("img",{className:"loading-spinner",src:"https://avatars.charhub.io/flower.png",alt:"Loading..."}))));var Au=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class dg extends Error{constructor(t){super(`Iframe Transport error: ${t}`)}}class Zx{constructor(t){var n,r;this._messageQueue=[],this._started=!1,this._targetOrigin=(n=t==null?void 0:t.targetOrigin)!==null&&n!==void 0?n:"*",this._allowedOrigins=(r=t==null?void 0:t.allowedOrigins)!==null&&r!==void 0?r:new Set(this._targetOrigin)}_isOriginAllowed(t){return this._allowedOrigins.has(t)||t.endsWith("chub.ai")||t.endsWith("chub-ui.pages.dev")?!0:this._targetOrigin!=="*"&&t===this._targetOrigin}_setupMessageListener(){this._messageListener=t=>{var n;if(this._isOriginAllowed(t.origin)&&t.source===window.parent)try{const r=t.data;switch(r==null?void 0:r.type){case"iframe-init":window.parent.postMessage({type:"iframe-ready"},this._targetOrigin),this._processQueue();break;case"mcp-message":r.payload&&(Array.isArray(r.payload)?r.payload:[r.payload]).forEach(i=>{const o=hb.parse(i);this.onmessage?this.onmessage(o):this._messageQueue.push({message:o})});break;case"iframe-close":this.close();break;default:break}}catch(r){(n=this.onerror)===null||n===void 0||n.call(this,r),this._sendError(r)}},window.addEventListener("message",this._messageListener)}_processQueue(){for(;this._messageQueue.length>0&&this.onmessage;){const t=this._messageQueue.shift();this.onmessage(t.message)}}_sendError(t){if(window.parent)try{window.parent.postMessage({type:"iframe-error",error:t.message},this._targetOrigin)}catch{}}start(){return Au(this,void 0,void 0,function*(){if(!this._started){if(!window.parent)throw new dg("Not in iframe context");this._setupMessageListener(),this._started=!0,this._processQueue()}})}close(){return Au(this,void 0,void 0,function*(){var t;this._started=!1,this._messageListener&&(window.removeEventListener("message",this._messageListener),this._messageListener=void 0),this._messageQueue=[],(t=this.onclose)===null||t===void 0||t.call(this)})}send(t,n){return Au(this,void 0,void 0,function*(){var r;if(!window.parent)throw new dg("Not in iframe context");try{window.parent.postMessage({type:"mcp-message",payload:t},this._targetOrigin)}catch(s){throw(r=this.onerror)===null||r===void 0||r.call(this,s),s}})}}var Ux=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Fx="INIT",Vx="BEFORE",Hx="AFTER",qx="SET",Mu="CALL",Bx=new Set([Fx,Vx,Hx,qx]),fg=new Zx({targetOrigin:"*",allowedOrigins:nf}),Wx=({factory:e,debug:t=!1})=>{const[n,r]=mn.useState(null),[s,i]=mn.useState(new Date),[o,a]=mn.useState({key:"",value:{}});function l(u,c){window.parent.postMessage({messageType:u,data:c},"*")}return mn.useEffect(()=>{const u=c=>Ux(void 0,void 0,void 0,function*(){try{if(!nf.has(c.origin)){console.warn("Received message from unauthorized origin: ",c.origin);return}if(c.source!==window.parent){console.warn("Received message from unauthorized source: ",c.source);return}const{messageType:f,data:m}=c.data;t&&Bx.has(f)&&(console.debug("Stages iFrame received event from origin: ",c.origin),console.debug("Stages iFrame received data: ",c.data));const v=f+": "+JSON.stringify(m);if(o.key==v)t&&console.debug("Already seen, returning previous"),l(f,o.value);else if(f=="INIT")if(n!=null)console.warn("INIT message for non-null stage."),l("INIT",Object.assign({},ug)),a(Object.assign(Object.assign({},o),{key:v}));else{let g=e(Object.assign(Object.assign({},Dx),m));const _=yield g.load(),w=Object.assign(Object.assign({},ug),_);g.mcp.connect(fg),fg.start(),a({key:v,value:w}),l("INIT",w),r(g)}else if(n==null)console.warn("Null stage instance for non-INIT message.");else if(f=="BEFORE"){const g=yield n==null?void 0:n.beforePrompt(Object.assign({},m)),_=Object.assign(Object.assign({},cg),g);a({key:v,value:_}),l("BEFORE",_)}else if(f=="AFTER"){const g=yield n==null?void 0:n.afterResponse(Object.assign({},m)),_=Object.assign(Object.assign({},cg),g);a({key:v,value:_}),l("AFTER",_)}else if(f=="SET")yield n==null?void 0:n.setState(m),a({key:v,value:{}}),l("SET",{});else if(f==Mu){const{functionName:g,parameters:_}=m;if(n.hasOwnProperty(g)){const w=n[g](_);l(Mu,{functionName:g,result:w})}else console.error(`Function '${g}' does not exist on the stage.`),l(Mu,{functionName:g,result:null})}}catch(f){console.error("Stages iFrame had an unexpected error: ",f),window.parent.postMessage({messageType:"ERROR",data:{name:f.name,message:f.message,stack:f.stack}})}finally{i(new Date)}});return window.removeEventListener("message",u),window.addEventListener("message",u),()=>{window.removeEventListener("message",u)}},[n]),ir.createElement(ir.Fragment,null,ir.createElement("div",{style:{display:"none"}},String(s),window.location.href),n==null?ir.createElement(Lx,null):n.render())},Z0={speaker_id:"1",parent_id:null,is_main:!0};Object.assign(Object.assign({},Z0),{message:""});Object.assign(Object.assign({},Z0),{stage_directions:null,participants:null});var hg;(function(e){e.biped="biped",e.quadruped="quadruped",e.unknown="unknown"})(hg||(hg={}));var pg;(function(e){e.glb="glb",e.vrm="vrm",e.stl="stl",e.obj="obj",e.ply="ply"})(pg||(pg={}));var mg;(function(e){e.turbo="turbo",e.fast="fast",e.standard="standard"})(mg||(mg={}));const ya={enabled:!0,strictness:2,memory_depth:15};function gg(e,t,n){return Number.isNaN(e)?t:Math.max(t,Math.min(n,e))}function Kx(e){const t=e||{},n=typeof t.enabled=="boolean"?t.enabled:ya.enabled,r=typeof t.strictness=="number"?gg(Math.floor(t.strictness),1,3):ya.strictness,s=typeof t.memory_depth=="number"?gg(Math.floor(t.memory_depth),5,30):ya.memory_depth;return{enabled:n,strictness:r,memory_depth:s,...Object.keys(t).reduce((i,o)=>(["enabled","strictness","memory_depth"].includes(o)||(i[o]=t[o]),i),{})}}function Gx(e){return!e||e.trim().length===0?{tone:"neutral",intensity:"low"}:/!|\b(am|so|very)\b/i.test(e)?{tone:"excited",intensity:"medium"}:/sad|tear|cry|sorry|regret/i.test(e)?{tone:"sad",intensity:"medium"}:/love|like|cherish|admire/i.test(e)?{tone:"affection",intensity:"medium"}:{tone:"neutral",intensity:"low"}}function Qx(e,t){const n=t.slice(-5);if(!n||n.length===0)return{detected:!1,summary:""};const r=g=>({low:0,medium:1,high:2})[g.intensity]??0,s=Math.round(n.reduce((g,_)=>g+r(_),0)/n.length),i=n.map(g=>g.tone),o=i[i.length-1]??"",a=Array.from(new Set(i)).slice(-3),l=r(e),u=o.length===0?!1:o!==e.tone,c=l-s,f=i.length>=3&&i.every(g=>g===o),m=c>=2||u&&f&&Math.abs(c)>=1,v=`from [${a.join(", ")}] (${s}) to ${e.tone} (${l})`;return{detected:m,summary:v}}function Jx(e,t){const n=[];return!e||e.trim().length===0||((/I\s+(feel|felt|confess|admit|can't help)/i.test(e)||/confess(ed)?/i.test(e))&&n.push({type:"emotional_disclosure",suggestedPhase:"Familiar",text:e.slice(0,200)}),/I need you|I can't live|depend on you|rely on you|can't (?:do|be)/i.test(e)&&n.push({type:"dependency",suggestedPhase:"Charged",text:e.slice(0,200)}),/hug|kiss|hold|embrace|press(es|ed)?|near|closer|close to/i.test(e)&&n.push({type:"physical_closeness",suggestedPhase:"Charged",text:e.slice(0,200)}),/kiss(ed)? on the lips|making love|sex|fellatio|intercourse|nude|strip/i.test(e)&&n.push({type:"physical_intimacy",suggestedPhase:"Intimate",text:e.slice(0,200)}),t.tone==="affection"&&t.intensity==="high"&&n.push({type:"affection_high",suggestedPhase:"Charged",text:"high-affection"})),n}class Yx extends Mx{constructor(n){super(n);tt(this,"myInternalState");tt(this,"defaultConfig",{...ya});const{characters:r,users:s,config:i,messageState:o,environment:a,initState:l,chatState:u}=n,c=Kx(i);this.myInternalState=o??{lastEmotions:[],memoryScars:[],proximity:"Distant",phase:"Neutral",overlayNotes:[]},this.myInternalState.numUsers=s?Object.keys(s).length:0,this.myInternalState.numChars=r?Object.keys(r).length:0,this._effectiveConfig=c,this._chatState=u||{scene:null}}async load(){return{success:!0,error:null,initState:null,chatState:null,messageState:{...this.myInternalState},state:{...this.myInternalState}}}async setState(n){var r;if(n!=null){this.myInternalState={...this.myInternalState,...n};const s=((r=this._effectiveConfig)==null?void 0:r.memory_depth)||this.defaultConfig.memory_depth;Array.isArray(this.myInternalState.memoryScars)&&(this.myInternalState.memoryScars=this.myInternalState.memoryScars.slice(-s)),Array.isArray(this.myInternalState.lastEmotions)&&(this.myInternalState.lastEmotions=this.myInternalState.lastEmotions.slice(-5))}}async beforePrompt(n){try{const r=typeof(n==null?void 0:n.content)=="string"?n.content:"",s=this._effectiveConfig||this.defaultConfig,i=typeof s.strictness=="number"?Math.floor(s.strictness):2;if(!s.enabled){const u=this._chatState||null;return{stageDirections:null,messageState:{...this.myInternalState},modifiedMessage:null,systemMessage:null,error:null,chatState:u||null}}const o=this._chatState||null;let a=null;if(i>=3&&o&&o.scene){const u=this.summarizeScene(o.scene);u&&(a=`Scene summary: ${u}`)}const l={...this.myInternalState};return{stageDirections:null,messageState:l,state:l,modifiedMessage:null,systemMessage:a,error:null,chatState:o||null}}catch(r){return r instanceof Error?r.message:String(r),console.error("Stage beforePrompt error:",r),{stageDirections:null,messageState:{...this.myInternalState},state:{...this.myInternalState},modifiedMessage:null,systemMessage:null,error:null,chatState:this._chatState||null}}}async afterResponse(n){var r;try{const s=typeof(n==null?void 0:n.content)=="string"?n.content:"",i=this._effectiveConfig||this.defaultConfig,o=typeof i.strictness=="number"?Math.floor(i.strictness):2;if(!i.enabled)return{stageDirections:null,messageState:this.myInternalState,modifiedMessage:null,error:null,systemMessage:null,chatState:this._chatState||null};const a=(this.myInternalState.turnIndex||0)+1;this.myInternalState.turnIndex=a;const u=(Array.isArray(this.myInternalState.systemNoteHistory)?this.myInternalState.systemNoteHistory:[]).filter(re=>re>a-20),c={1:0,2:0,3:6}[o]??0,f=o>=3&&u.length<c;let m=!1;const v=Gx(s),g=this.myInternalState.lastEmotions||[],_=this.detectMemoryEvents(s);if(_.length>0){const re=Date.now(),M=((r=this._effectiveConfig)==null?void 0:r.memory_depth)||this.defaultConfig.memory_depth;this.myInternalState.memoryScars=(this.myInternalState.memoryScars||[]).concat(_.map(Y=>({event:Y,text:s.slice(0,500),at:re}))).slice(-M)}const w=this._chatState||{scene:null},d=this.updateSceneFromMessage((w==null?void 0:w.scene)||null,s,v),h={...w||{},scene:d};this._chatState=h;const p=this.detectProximityTransitions(s);let k=null;p.skipped&&(k=`System note: proximity jumped to ${p.next}. Consider describing intermediate steps.`);const E=Jx(s,v);this.myInternalState.signalHistory=(this.myInternalState.signalHistory||[]).concat(E).slice(-20);const R=(this.myInternalState.signalHistory||[]).slice(-5),N=["Neutral","Familiar","Charged","Intimate"],z=this.myInternalState.phase||"Neutral",ne=Math.max(0,N.indexOf(z)),ee={};for(const re of R)ee[re.suggestedPhase]=(ee[re.suggestedPhase]||0)+1;const V=2;let X=null;for(let re=N.length-1;re>=0;re--){const M=N[re];if((ee[M]||0)>=V){X=M;break}}let fe=null;if(X){const re=N.indexOf(X);re>ne+1?fe=`System note: relationship signals suggest ${X} but current phase is ${z}. Consider intermediate steps.`:re===ne+1&&(this.myInternalState.phase=X,this.myInternalState.phaseHistory=(this.myInternalState.phaseHistory||[]).concat([{phase:X,at:Date.now()}]).slice(-50))}let D=null;const Fe=Qx(v,g);if(Fe.detected&&i.enabled&&f){const re={1:1,2:2,3:3}[o]||2;this.myInternalState.lastAnnotations=this.myInternalState.lastAnnotations||[],this.myInternalState.lastAnnotations.filter(Y=>Y>a-20).length<re&&(D=`System note: abrupt emotional shift detected (${Fe.summary}). Consider adding a transitional cue.`,this.myInternalState.lastAnnotations.push(a),this.myInternalState.lastAnnotations=this.myInternalState.lastAnnotations.slice(-20))}this.myInternalState.lastEmotions=g.concat(v).slice(-5),fe&&(f||m||D!=null)&&(D=D?`${D}  ${fe}`:fe),k&&(f||m||D!=null)&&(D=D?`${D}  ${k}`:k);const ft=this.detectConsentIssues(s);if(ft.length>0){m=!0,this.myInternalState.consentAlerts=(this.myInternalState.consentAlerts||[]).concat([Date.now()]).slice(-50);const re=`Consent/agency alert: ${ft.join("; ")}`;D=D?`${D}  ${re}`:re}if(o>=2&&(f||m||D!=null)){const re=this.detectSubtext(s);if(re.length>0){const M=`Subtext: ${re.join("; ")}`;D=D?`${D}  ${M}`:M}}if(o>=3&&(f||m||D!=null)){const re=this.detectSilenceOrPause(s);re&&(this.myInternalState.silenceHistory=(this.myInternalState.silenceHistory||[]).concat([Date.now()]).slice(-50),D=D?`${D}  ${re}`:re)}if(o>=3&&(f||m||D!=null)){const re=this.detectDrift(g,this.myInternalState.phaseHistory||[],i);re&&(this.myInternalState.driftNotes=(this.myInternalState.driftNotes||[]).concat([a]).slice(-50),D=D?`${D}  ${re}`:re)}if(o>=3&&(f||m||D!=null)){const re=this.recallMemoryScar();re&&(D=D?`${D}  ${re}`:re)}return D!=null&&(this.myInternalState.overlayNotes=(this.myInternalState.overlayNotes||[]).concat([{text:D,at:Date.now()}]).slice(-10),this.myInternalState.systemNoteHistory=u.concat([a]).slice(-100)),{stageDirections:null,messageState:this.myInternalState,state:this.myInternalState,modifiedMessage:null,error:null,systemMessage:D,chatState:h}}catch(s){return s instanceof Error?s.message:String(s),console.error("Stage afterResponse error:",s),{stageDirections:null,messageState:this.myInternalState,state:this.myInternalState,modifiedMessage:null,systemMessage:null,error:null,chatState:this._chatState||null}}}render(){return Mt.jsx(Xx,{stageRef:this})}detectMemoryEvents(n){if(!n)return[];const r=[];return/confess(ed)?|admit(s|ted)?/i.test(n)&&r.push("confession"),/betray(s|ed)?|lie(?:s|d)? to/i.test(n)&&r.push("betrayal"),/reject(s|ed)?|turns you down|pushes you away/i.test(n)&&r.push("rejection"),/argue|fight|conflict|shout at/i.test(n)&&r.push("conflict"),r}detectSubtext(n){if(!n)return[];const r=[];return(/(um\b|uh\b|ellipses|\.\.\.|hesitates|pauses)/i.test(n)||/(not sure|maybe|i guess)/i.test(n))&&r.push("hesitation/uncertainty"),/(changes the subject|deflects|avoids eye contact|looks away|shrugs it off)/i.test(n)&&r.push("avoidance"),/(careful not to|holding back|guarded|keeps distance emotionally)/i.test(n)&&r.push("guarded interest"),/(afraid to ask|fear of rejection|worried you'll say no|doesn't want to scare you off)/i.test(n)&&r.push("fear of rejection"),r}recallMemoryScar(){const n=this.myInternalState.memoryScars||[];if(n.length===0)return null;const r=this.myInternalState.lastScarRecallIdx??-1,s=n.length-1;return s===r?null:(this.myInternalState.lastScarRecallIdx=s,`Recall: unresolved ${n[s].event} persists. Keep continuity in tone and stakes.`)}detectDrift(n,r,s){const i=s.strictness===3?8:s.strictness===1?15:12;if((this.myInternalState.driftNotes||[]).filter(m=>(this.myInternalState.turnIndex||0)-m<i).length>0)return null;const a=(r||[]).slice(-3),l=a.length>=2&&new Set(a.map(m=>m.phase)).size===1,u=n.slice(-5),c=new Set(u.map(m=>m.tone)),f=u.length>=3&&c.size<=1;return l&&f?"Drift detected: relationship and emotion have stagnated. Suggest gentle narrative pressure or new beat.":null}detectSilenceOrPause(n){if(n==null)return null;const r=n.trim();if(r.length===0)return"Silence detected: consider clarifying hesitation or disengagement.";const s=r.length<25,i=/(maybe|i guess|not sure|could be|i dunno|perhaps)/i.test(r),o=/^(ok|okay|sure|fine|whatever|yeah)\.?$/i.test(r);return s&&(i||o)?"Brief/non-committal reply: may signal hesitation or disengagement.":/\.\.\.|\bpauses\b|\bhesitates\b/i.test(r)?"Pause noted: consider leaning into hesitation or giving space.":null}detectProximityTransitions(n){const r=["Distant","Nearby","Touching","Intimate"],s=this.myInternalState.proximity||"Distant";let i=s;/across the room|far away|distant/i.test(n)&&(i="Distant"),/steps closer|sits beside|next to|nearby|close by/i.test(n)&&(i="Nearby"),/touch|hand in hand|holds|brushes|resting on/i.test(n)&&(i="Touching"),/embrace tightly|presses against|kiss(?:ing)?|intimate|caress/i.test(n)&&(i="Intimate");const o=r.indexOf(s),a=r.indexOf(i),l=a>o+1;return a>=0&&i!==s&&(this.myInternalState.proximity=i,this.myInternalState.proximityHistory=(this.myInternalState.proximityHistory||[]).concat([{state:i,at:Date.now()}]).slice(-50)),{next:i,skipped:l}}detectConsentIssues(n){if(!n)return[];const r=[];return/you (?:feel|felt|are overcome|can't help but feel)/i.test(n)&&r.push("assigns emotions to the user"),/(you must|you have no choice|without your consent|ignoring your protest|forces you)/i.test(n)&&r.push("forces decisions/consent onto the user"),/(inside your mind|your thoughts say|your inner voice|you think to yourself)/i.test(n)&&r.push("describes internal monologue for the user"),r}summarizeScene(n){if(!n)return null;const r=[];return n.location&&r.push(`${n.location}`),n.timeOfDay&&r.push(`${n.timeOfDay}`),n.lingeringEmotion&&r.push(`mood: ${n.lingeringEmotion}`),Array.isArray(n.unresolvedBeats)&&n.unresolvedBeats.length>0&&r.push(`${n.unresolvedBeats.length} unresolved beats`),r.length>0?r.join("  "):null}updateSceneFromMessage(n,r,s){const i=Object.assign({},n||{}),o=r.match(/(?:at|in|on) the ([A-Za-z0-9'\- ]{3,40})/i);o&&(i.location=o[1].trim());const a=/\b(morning|afternoon|evening|night|noon|midnight|dawn|dusk)\b/i.exec(r);return a&&(i.timeOfDay=a[1].toLowerCase()),s&&s.tone&&s.tone!=="neutral"&&(i.lingeringEmotion=s.tone),/(?:still|remain|unresolved|unfinished|left hanging|pending)/i.test(r)&&(i.unresolvedBeats=(i.unresolvedBeats||[]).concat([r.trim()]).slice(-10)),i}}function Xx({stageRef:e}){var u;const[t,n]=mn.useState(!1),[r,s]=mn.useState(0);mn.useEffect(()=>{const c=window.setInterval(()=>s(f=>f+1),1e3);return()=>window.clearInterval(c)},[]);const i=((u=e==null?void 0:e.myInternalState)==null?void 0:u.overlayNotes)||[],o=mn.useMemo(()=>[...i].slice(-5).reverse(),[i,r]);if(o.length===0)return Mt.jsx(Mt.Fragment,{});const a=typeof document<"u"?document.body:null;if(!a)return Mt.jsx(Mt.Fragment,{});const l=Mt.jsxs("div",{style:{position:"fixed",bottom:"12px",right:"12px",zIndex:2147483647,fontFamily:"Inter, system-ui, sans-serif",color:"#111",pointerEvents:"none"},children:[Mt.jsxs("button",{type:"button",onClick:()=>n(c=>!c),style:{background:"#f4f4f4",border:"1px solid #d0d0d0",borderRadius:"16px",padding:"6px 10px",boxShadow:"0 2px 6px rgba(0,0,0,0.12)",cursor:"pointer",fontSize:"12px",pointerEvents:"auto"},"aria-expanded":t,"aria-label":"Show romance realism notes",children:["Realism notes (",i.length,")"]}),t&&Mt.jsx("div",{style:{marginTop:"6px",width:"260px",maxHeight:"240px",overflowY:"auto",background:"#fff",border:"1px solid #d0d0d0",borderRadius:"12px",boxShadow:"0 8px 18px rgba(0,0,0,0.16)",padding:"10px",fontSize:"12px",lineHeight:1.4,pointerEvents:"auto"},children:o.map((c,f)=>Mt.jsxs("div",{style:{marginBottom:f===o.length-1?0:"10px"},children:[Mt.jsxs("div",{style:{fontWeight:600,fontSize:"11px",color:"#555"},children:["Note  ",new Date(c.at).toLocaleTimeString()]}),Mt.jsx("div",{style:{marginTop:"2px",whiteSpace:"pre-wrap"},children:c.text})]},`${c.at}-${f}`))})]});return Rv.createPortal(l,a)}function e2(){return console.info("Running in production"),Mt.jsx(Wx,{factory:t=>new Yx(t)})}Du.createRoot(document.getElementById("root")).render(Mt.jsx(e2,{}));
